<!DOCTYPE HTML>
<html>

<head>
	<title>Sort Extras Unit Tests</title>
	<meta http-equiv=content-type content="text/html; charset=utf-8">

	<script src="http://yui.yahooapis.com/3.8.0/build/yui/yui-min.js"></script>
	<script src="gallery-sort-extras-debug.js"></script>
</head>

<body class="yui3-skin-sam">

<h1><a href="http://yuilibrary.com/gallery/show/sort-extras">YUI 3 Sort Extras</a> Unit Tests</h1>

<p><a href="../yuidoc/modules/gallery-sort-extras.html">Show me the documentation</a></p>
<p><a href="/yui-modules/">Back to project list</a></p>

<script type="text/javascript">
YUI({
//	filter: 'raw', combine: false,
	logInclude: { TestRunner: true }
}).use(
	'gallery-sort-extras', 'test',
	'console', 'console-filters', 'dd-plugin',
function(Y)
{
	Y.Test.Runner.add(new Y.Test.Case(
	{
		name: 'Sort Utilities',

		testSort: function()
		{
			Y.ArrayAssert.itemsAreSame([3,2,1], [1,2,3].sort(Y.Sort.flip(Y.Sort.compareAsNumber)));
			Y.ArrayAssert.itemsAreSame(['c','b','a'], ['a','b','c'].sort(Y.Sort.flip(Y.Sort.compareAsString)));
			Y.ArrayAssert.itemsAreSame(['c','a','B'], ['a','B','c'].sort(Y.Sort.flip(Y.Sort.compareAsString)));
			Y.ArrayAssert.itemsAreSame(['c','B','a'], ['a','B','c'].sort(Y.Sort.flip(Y.Sort.compareAsStringNoCase)));
		},

		testKey: function()
		{
			var list =
			[
				{ a: 2, b: 2 },
				{ a: 1, b: 3 },
				{ a: 3, b: 1 }
			];

			list.sort(Y.bind(Y.Sort.compareKey, null, Y.Sort.compareAsNumber, 'a'));
			Y.Assert.areSame(1, list[0].a);
			Y.Assert.areSame(2, list[1].a);
			Y.Assert.areSame(3, list[2].a);

			list.sort(Y.bind(Y.Sort.compareKey, null, Y.Sort.compareAsNumber, 'b'));
			Y.Assert.areSame(3, list[0].a);
			Y.Assert.areSame(2, list[1].a);
			Y.Assert.areSame(1, list[2].a);
		},

		testDrill: function()
		{
			var list =
			[
				{ x: { a: 2, b: 2 } },
				{ x: { a: 1, b: 3 } },
				{ x: { a: 3, b: 1 } }
			];

			list.sort(Y.bind(Y.Sort.compareKey, null, Y.Sort.compareAsNumber, ['x', 'a']));
			Y.Assert.areSame(1, list[0].x.a);
			Y.Assert.areSame(2, list[1].x.a);
			Y.Assert.areSame(3, list[2].x.a);

			list.sort(Y.bind(Y.Sort.compareKey, null, Y.Sort.compareAsNumber, ['x', 'b']));
			Y.Assert.areSame(3, list[0].x.a);
			Y.Assert.areSame(2, list[1].x.a);
			Y.Assert.areSame(1, list[2].x.a);
		}
	}));

	new Y.Console(
	{
		newestOnTop: false,
		plugins: [ {fn: Y.Plugin.Drag, cfg: {handles: ['.yui3-console-hd']}}, Y.Plugin.ConsoleFilters ]
	})
	.render();

	Y.Test.Runner.run();
});
</script>

</body>
</html>
