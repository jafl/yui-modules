<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/gallery-layout-cols/js/PageLayoutCols.js - YUI 3 Gallery Modules</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="YUI 3 Gallery Modules" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Accordion.html">Accordion</a></li>
                                <li><a href="../classes/AnimSequence.html">AnimSequence</a></li>
                                <li><a href="../classes/ArrayIterator.html">ArrayIterator</a></li>
                                <li><a href="../classes/ArrayList~extras.html">ArrayList~extras</a></li>
                                <li><a href="../classes/Array~algorithms.html">Array~algorithms</a></li>
                                <li><a href="../classes/Array~funcprog-extras.html">Array~funcprog-extras</a></li>
                                <li><a href="../classes/Array~object-extras.html">Array~object-extras</a></li>
                                <li><a href="../classes/Assert.html">Assert</a></li>
                                <li><a href="../classes/AtLeastOneCheckboxGroup.html">AtLeastOneCheckboxGroup</a></li>
                                <li><a href="../classes/AtMostOneCheckboxGroup.html">AtMostOneCheckboxGroup</a></li>
                                <li><a href="../classes/BulkEditor.html">BulkEditor</a></li>
                                <li><a href="../classes/Canvas.Context2d.html">Canvas.Context2d</a></li>
                                <li><a href="../classes/CheckboxGroup.html">CheckboxGroup</a></li>
                                <li><a href="../classes/Chipper.html">Chipper</a></li>
                                <li><a href="../classes/CollapseToggle.html">CollapseToggle</a></li>
                                <li><a href="../classes/ComplexMath.html">ComplexMath</a></li>
                                <li><a href="../classes/ComplexNumber.html">ComplexNumber</a></li>
                                <li><a href="../classes/DataSource.AsyncFunction.html">DataSource.AsyncFunction</a></li>
                                <li><a href="../classes/DataSource.BulkEdit.html">DataSource.BulkEdit</a></li>
                                <li><a href="../classes/DataSource.Treeble.html">DataSource.Treeble</a></li>
                                <li><a href="../classes/DateTime.html">DateTime</a></li>
                                <li><a href="../classes/DateTimeRange.html">DateTimeRange</a></li>
                                <li><a href="../classes/DateTimeUtils.html">DateTimeUtils</a></li>
                                <li><a href="../classes/EnableIfAnyCheckboxGroup.html">EnableIfAnyCheckboxGroup</a></li>
                                <li><a href="../classes/ExpirationCache.html">ExpirationCache</a></li>
                                <li><a href="../classes/ExpressionBuilder.html">ExpressionBuilder</a></li>
                                <li><a href="../classes/FormManager.html">FormManager</a></li>
                                <li><a href="../classes/HTMLTableBulkEditor.html">HTMLTableBulkEditor</a></li>
                                <li><a href="../classes/InputPopup.html">InputPopup</a></li>
                                <li><a href="../classes/InstanceManager.html">InstanceManager</a></li>
                                <li><a href="../classes/io~multiresponse.html">io~multiresponse</a></li>
                                <li><a href="../classes/Iterable.html">Iterable</a></li>
                                <li><a href="../classes/LinkedList.html">LinkedList</a></li>
                                <li><a href="../classes/LinkedListItem.html">LinkedListItem</a></li>
                                <li><a href="../classes/LinkedListIterator.html">LinkedListIterator</a></li>
                                <li><a href="../classes/LogFilter.html">LogFilter</a></li>
                                <li><a href="../classes/Math.html">Math</a></li>
                                <li><a href="../classes/MathCanvas.html">MathCanvas</a></li>
                                <li><a href="../classes/MathCanvas.Parser.html">MathCanvas.Parser</a></li>
                                <li><a href="../classes/MathCanvas.RectList.html">MathCanvas.RectList</a></li>
                                <li><a href="../classes/MathFunction.html">MathFunction</a></li>
                                <li><a href="../classes/MathFunction.Arccosine.html">MathFunction.Arccosine</a></li>
                                <li><a href="../classes/MathFunction.Arcsine.html">MathFunction.Arcsine</a></li>
                                <li><a href="../classes/MathFunction.Arctangent.html">MathFunction.Arctangent</a></li>
                                <li><a href="../classes/MathFunction.Arctangent2.html">MathFunction.Arctangent2</a></li>
                                <li><a href="../classes/MathFunction.Conjugate.html">MathFunction.Conjugate</a></li>
                                <li><a href="../classes/MathFunction.Cosine.html">MathFunction.Cosine</a></li>
                                <li><a href="../classes/MathFunction.E.html">MathFunction.E</a></li>
                                <li><a href="../classes/MathFunction.Exponential.html">MathFunction.Exponential</a></li>
                                <li><a href="../classes/MathFunction.FunctionWithArgs.html">MathFunction.FunctionWithArgs</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicCosine.html">MathFunction.HyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicSine.html">MathFunction.HyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicTangent.html">MathFunction.HyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.I.html">MathFunction.I</a></li>
                                <li><a href="../classes/MathFunction.ImaginaryPart.html">MathFunction.ImaginaryPart</a></li>
                                <li><a href="../classes/MathFunction.Input.html">MathFunction.Input</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicCosine.html">MathFunction.InverseHyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicSine.html">MathFunction.InverseHyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicTangent.html">MathFunction.InverseHyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.Logarithm.html">MathFunction.Logarithm</a></li>
                                <li><a href="../classes/MathFunction.Magnitude.html">MathFunction.Magnitude</a></li>
                                <li><a href="../classes/MathFunction.Max.html">MathFunction.Max</a></li>
                                <li><a href="../classes/MathFunction.Min.html">MathFunction.Min</a></li>
                                <li><a href="../classes/MathFunction.NaturalLog.html">MathFunction.NaturalLog</a></li>
                                <li><a href="../classes/MathFunction.Negate.html">MathFunction.Negate</a></li>
                                <li><a href="../classes/MathFunction.Phase.html">MathFunction.Phase</a></li>
                                <li><a href="../classes/MathFunction.Pi.html">MathFunction.Pi</a></li>
                                <li><a href="../classes/MathFunction.Product.html">MathFunction.Product</a></li>
                                <li><a href="../classes/MathFunction.Quotient.html">MathFunction.Quotient</a></li>
                                <li><a href="../classes/MathFunction.RealPart.html">MathFunction.RealPart</a></li>
                                <li><a href="../classes/MathFunction.Rotate.html">MathFunction.Rotate</a></li>
                                <li><a href="../classes/MathFunction.Sine.html">MathFunction.Sine</a></li>
                                <li><a href="../classes/MathFunction.SquareRoot.html">MathFunction.SquareRoot</a></li>
                                <li><a href="../classes/MathFunction.Sum.html">MathFunction.Sum</a></li>
                                <li><a href="../classes/MathFunction.Tangent.html">MathFunction.Tangent</a></li>
                                <li><a href="../classes/MathFunction.Value.html">MathFunction.Value</a></li>
                                <li><a href="../classes/MathFunction.Variable.html">MathFunction.Variable</a></li>
                                <li><a href="../classes/MatrixBackground.html">MatrixBackground</a></li>
                                <li><a href="../classes/MatrixCredits.html">MatrixCredits</a></li>
                                <li><a href="../classes/MRUCache.html">MRUCache</a></li>
                                <li><a href="../classes/MultiObject.html">MultiObject</a></li>
                                <li><a href="../classes/NodeList~extras2.html">NodeList~extras2</a></li>
                                <li><a href="../classes/Node~dimensions.html">Node~dimensions</a></li>
                                <li><a href="../classes/Node~event-set.html">Node~event-set</a></li>
                                <li><a href="../classes/Node~optimizations.html">Node~optimizations</a></li>
                                <li><a href="../classes/Node~scrollIntoView.html">Node~scrollIntoView</a></li>
                                <li><a href="../classes/Node~utils.html">Node~utils</a></li>
                                <li><a href="../classes/Object~extras.html">Object~extras</a></li>
                                <li><a href="../classes/PageLayout.html">PageLayout</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageInput.html">Paginator.ui.CurrentPageInput</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageReport.html">Paginator.ui.CurrentPageReport</a></li>
                                <li><a href="../classes/Paginator.ui.FirstPageLink.html">Paginator.ui.FirstPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.ItemRangeDropdown.html">Paginator.ui.ItemRangeDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.LastPageLink.html">Paginator.ui.LastPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.NextPageLink.html">Paginator.ui.NextPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.PageLinks.html">Paginator.ui.PageLinks</a></li>
                                <li><a href="../classes/Paginator.ui.PreviousPageLink.html">Paginator.ui.PreviousPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.RowsPerPageDropdown.html">Paginator.ui.RowsPerPageDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.ValidationPageLinks.html">Paginator.ui.ValidationPageLinks</a></li>
                                <li><a href="../classes/Parsers.html">Parsers</a></li>
                                <li><a href="../classes/Plugin.BusyOverlay.html">Plugin.BusyOverlay</a></li>
                                <li><a href="../classes/Plugin.ConsoleTest.html">Plugin.ConsoleTest</a></li>
                                <li><a href="../classes/Plugin.DataTableDataSourceBusy.html">Plugin.DataTableDataSourceBusy</a></li>
                                <li><a href="../classes/Plugin.DataTablePaginator.html">Plugin.DataTablePaginator</a></li>
                                <li><a href="../classes/Plugin.DataTableQuickEdit.html">Plugin.DataTableQuickEdit</a></li>
                                <li><a href="../classes/Plugin.DataTableRowExpansion.html">Plugin.DataTableRowExpansion</a></li>
                                <li><a href="../classes/Plugin.DataTableState.html">Plugin.DataTableState</a></li>
                                <li><a href="../classes/Plugin.FixedSizeAccordion.html">Plugin.FixedSizeAccordion</a></li>
                                <li><a href="../classes/Plugin.InputCalendarSync.html">Plugin.InputCalendarSync</a></li>
                                <li><a href="../classes/Plugin.Neon.html">Plugin.Neon</a></li>
                                <li><a href="../classes/Plugin.NodeFXSequence.html">Plugin.NodeFXSequence</a></li>
                                <li><a href="../classes/Plugin.OverlayForm.html">Plugin.OverlayForm</a></li>
                                <li><a href="../classes/Plugin.PageLayoutAnyWidgetModule.html">Plugin.PageLayoutAnyWidgetModule</a></li>
                                <li><a href="../classes/Plugin.PageLayoutDataTableModule.html">Plugin.PageLayoutDataTableModule</a></li>
                                <li><a href="../classes/Popup.html">Popup</a></li>
                                <li><a href="../classes/QueryBuilder.html">QueryBuilder</a></li>
                                <li><a href="../classes/QueryBuilder.DateRange.html">QueryBuilder.DateRange</a></li>
                                <li><a href="../classes/QueryBuilder.MultiselectInput.html">QueryBuilder.MultiselectInput</a></li>
                                <li><a href="../classes/QueryBuilder.Select.html">QueryBuilder.Select</a></li>
                                <li><a href="../classes/QueryBuilder.String.html">QueryBuilder.String</a></li>
                                <li><a href="../classes/RPC.Mojito.html">RPC.Mojito</a></li>
                                <li><a href="../classes/SelectAllCheckboxGroup.html">SelectAllCheckboxGroup</a></li>
                                <li><a href="../classes/Sort.html">Sort</a></li>
                                <li><a href="../classes/Treeble.html">Treeble</a></li>
                                <li><a href="../classes/YUI~funcprog.html">YUI~funcprog</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/gallery-accordion-horiz-vert.html">gallery-accordion-horiz-vert</a></li>
                                <li><a href="../modules/gallery-adobe-air-config.html">gallery-adobe-air-config</a></li>
                                <li><a href="../modules/gallery-adobe-air-page-manager.html">gallery-adobe-air-page-manager</a></li>
                                <li><a href="../modules/gallery-adobe-air-prefs.html">gallery-adobe-air-prefs</a></li>
                                <li><a href="../modules/gallery-algorithms.html">gallery-algorithms</a></li>
                                <li><a href="../modules/gallery-anim-class.html">gallery-anim-class</a></li>
                                <li><a href="../modules/gallery-anim-sequence.html">gallery-anim-sequence</a></li>
                                <li><a href="../modules/gallery-bulkedit.html">gallery-bulkedit</a></li>
                                <li><a href="../modules/gallery-busyoverlay.html">gallery-busyoverlay</a></li>
                                <li><a href="../modules/gallery-canvas.html">gallery-canvas</a></li>
                                <li><a href="../modules/gallery-checkboxgroups.html">gallery-checkboxgroups</a></li>
                                <li><a href="../modules/gallery-chipper.html">gallery-chipper</a></li>
                                <li><a href="../modules/gallery-collapse-toggle.html">gallery-collapse-toggle</a></li>
                                <li><a href="../modules/gallery-complexnumber.html">gallery-complexnumber</a></li>
                                <li><a href="../modules/gallery-console-test.html">gallery-console-test</a></li>
                                <li><a href="../modules/gallery-datasource-async-function.html">gallery-datasource-async-function</a></li>
                                <li><a href="../modules/gallery-datatable-datasource-busy.html">gallery-datatable-datasource-busy</a></li>
                                <li><a href="../modules/gallery-datatable-paginator.html">gallery-datatable-paginator</a></li>
                                <li><a href="../modules/gallery-datatable-row-expansion.html">gallery-datatable-row-expansion</a></li>
                                <li><a href="../modules/gallery-datatable-state.html">gallery-datatable-state</a></li>
                                <li><a href="../modules/gallery-datetime.html">gallery-datetime</a></li>
                                <li><a href="../modules/gallery-datetime-range.html">gallery-datetime-range</a></li>
                                <li><a href="../modules/gallery-datetime-utils.html">gallery-datetime-utils</a></li>
                                <li><a href="../modules/gallery-dimensions.html">gallery-dimensions</a></li>
                                <li><a href="../modules/gallery-expiration-cache.html">gallery-expiration-cache</a></li>
                                <li><a href="../modules/gallery-exprbuilder.html">gallery-exprbuilder</a></li>
                                <li><a href="../modules/gallery-formmgr.html">gallery-formmgr</a></li>
                                <li><a href="../modules/gallery-formmgr-css-validation.html">gallery-formmgr-css-validation</a></li>
                                <li><a href="../modules/gallery-formmgr-overlay-plugin.html">gallery-formmgr-overlay-plugin</a></li>
                                <li><a href="../modules/gallery-funcprog.html">gallery-funcprog</a></li>
                                <li><a href="../modules/gallery-input-calendar-sync.html">gallery-input-calendar-sync</a></li>
                                <li><a href="../modules/gallery-instancemanager.html">gallery-instancemanager</a></li>
                                <li><a href="../modules/gallery-io-adobe-air.html">gallery-io-adobe-air</a></li>
                                <li><a href="../modules/gallery-io-multiresponse.html">gallery-io-multiresponse</a></li>
                                <li><a href="../modules/gallery-iterable-extras.html">gallery-iterable-extras</a></li>
                                <li><a href="../modules/gallery-layout.html">gallery-layout</a></li>
                                <li><a href="../modules/gallery-layout-anywidget.html">gallery-layout-anywidget</a></li>
                                <li><a href="../modules/gallery-layout-cols.html">gallery-layout-cols</a></li>
                                <li><a href="../modules/gallery-layout-datatable.html">gallery-layout-datatable</a></li>
                                <li><a href="../modules/gallery-layout-rows.html">gallery-layout-rows</a></li>
                                <li><a href="../modules/gallery-linkedlist.html">gallery-linkedlist</a></li>
                                <li><a href="../modules/gallery-log-filter.html">gallery-log-filter</a></li>
                                <li><a href="../modules/gallery-math.html">gallery-math</a></li>
                                <li><a href="../modules/gallery-mathcanvas.html">gallery-mathcanvas</a></li>
                                <li><a href="../modules/gallery-matrix-background.html">gallery-matrix-background</a></li>
                                <li><a href="../modules/gallery-matrix-credits.html">gallery-matrix-credits</a></li>
                                <li><a href="../modules/gallery-mojito-rpc.html">gallery-mojito-rpc</a></li>
                                <li><a href="../modules/gallery-mru-cache.html">gallery-mru-cache</a></li>
                                <li><a href="../modules/gallery-multiobject.html">gallery-multiobject</a></li>
                                <li><a href="../modules/gallery-neon.html">gallery-neon</a></li>
                                <li><a href="../modules/gallery-node-event-set.html">gallery-node-event-set</a></li>
                                <li><a href="../modules/gallery-node-optimizations.html">gallery-node-optimizations</a></li>
                                <li><a href="../modules/gallery-node-utils.html">gallery-node-utils</a></li>
                                <li><a href="../modules/gallery-nodelist-extras2.html">gallery-nodelist-extras2</a></li>
                                <li><a href="../modules/gallery-object-extras.html">gallery-object-extras</a></li>
                                <li><a href="../modules/gallery-paginator.html">gallery-paginator</a></li>
                                <li><a href="../modules/gallery-popup.html">gallery-popup</a></li>
                                <li><a href="../modules/gallery-querybuilder.html">gallery-querybuilder</a></li>
                                <li><a href="../modules/gallery-querybuilder-daterange.html">gallery-querybuilder-daterange</a></li>
                                <li><a href="../modules/gallery-querybuilder-multiselect-input.html">gallery-querybuilder-multiselect-input</a></li>
                                <li><a href="../modules/gallery-quickedit.html">gallery-quickedit</a></li>
                                <li><a href="../modules/gallery-scrollintoview.html">gallery-scrollintoview</a></li>
                                <li><a href="../modules/gallery-sort-extras.html">gallery-sort-extras</a></li>
                                <li><a href="../modules/gallery-table-utils.html">gallery-table-utils</a></li>
                                <li><a href="../modules/gallery-test-extras.html">gallery-test-extras</a></li>
                                <li><a href="../modules/gallery-treeble.html">gallery-treeble</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/gallery-layout-cols/js/PageLayoutCols.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&quot;use strict&quot;;

var has_explosive_modules_bug = (0 &lt; Y.UA.ie &amp;&amp; Y.UA.ie &lt; 8);

/**
 * PageLayout plugin for managing horizontally stacked columns on a page,
 * sandwiched vertically between header and footer.  Each column contains
 * one or more modules.
 * 
 * @module gallery-layout
 * @submodule gallery-layout-cols
 */

Y.namespace(&#x27;PageLayoutCols&#x27;);

// must be done after defining Y.PageLayoutCols

Y.PageLayoutCols.collapse_classes =
{
	vert_parent_class:       Y.PageLayout.module_class,
	horiz_parent_class:      Y.PageLayout.module_cols_class,
	collapse_parent_pattern: &#x27;(&#x27; + Y.PageLayout.expand_left_nub_class + &#x27;|&#x27; + Y.PageLayout.expand_right_nub_class + &#x27;)&#x27;
};

function adjustHeight(
	/* int */		total_height,
	/* object */	children)
{
	var h = total_height;

	if (children.hd)
	{
		h -= children.hd.get(&#x27;offsetHeight&#x27;);
	}
	if (children.ft)
	{
		h -= children.ft.get(&#x27;offsetHeight&#x27;);
	}

	h -= children.bd.vertMarginBorderPadding();

	return Math.max(h, Y.PageLayout.min_module_height);
}

function getHeight(
	/* int */		body_height,
	/* array */		row_heights,
	/* int */		col_index,
	/* int */		row_index,
	/* object */	module,
	/* object */	module_info)
{
	module_info.mbp = module.vertMarginBorderPadding();
	return Math.max(1, Math.floor(body_height * row_heights[ col_index ][ row_index ] / 100.0) - module_info.mbp);
}

Y.PageLayoutCols.resize = function(
	/* enum */			mode,
	/* int */			body_width,
	/* int */			body_height)
{
	var match_heights = this.get(&#x27;matchColumnHeights&#x27;);
	var col_count     = this.body_info.outers.size();

	// fit-to-viewport: adjust for vertically collapsed modules

	if (mode === Y.PageLayout.FIT_TO_VIEWPORT)
	{
		var row_heights = [],
			col_heights = [];
		for (var i=0; i&lt;col_count; i++)
		{
			var heights = this.body_info.inner_sizes[i].slice(0);
			row_heights.push(heights);
			col_heights.push(body_height);

			var uncollapsed_count = 0,
				sum               = 0;

			var modules = this.body_info.modules[i];
			var count   = modules.size();
			for (var j=0; j&lt;count; j++)
			{
				var module = modules.item(j);
				if (module.hasClass(Y.PageLayout.collapsed_vert_class))
				{
					module.setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);
					heights[j]      = - module.get(&#x27;offsetHeight&#x27;);
					col_heights[i] -= module.totalHeight();
				}
				else if (heights[j] &gt; 0)
				{
					uncollapsed_count++;
					sum += heights[j];
				}
			}

			if (uncollapsed_count &lt; count)
			{
				for (var j=0; j&lt;count; j++)
				{
					if (heights[j] &gt; 0)
					{
						heights[j] *= (100.0 / sum);
					}
				}
			}
		}
	}

	// adjust for horizontally collapsed or fixed width modules

	var module_info = {};
	var col_widths  = this.body_info.outer_sizes.slice(0);

	var uncollapsed_count = 0,
		sum               = 0;
	for (var i=0; i&lt;col_count; i++)
	{
		var col       = this.body_info.outers.item(i);
		var collapsed = col.hasClass(Y.PageLayout.collapsed_horiz_class);
		var modules   = this.body_info.modules[i];
		if (collapsed || col_widths[i] &lt; 0)
		{
			col_widths[i] = 0;
			if (collapsed)
			{
				col.setStyle(&#x27;width&#x27;, &#x27;auto&#x27;);
				modules.item(0).setStyle(&#x27;width&#x27;, &#x27;auto&#x27;);
			}
			else if (has_explosive_modules_bug)
			{
				var children = modules.item(0)._page_layout.children;
				if (children.bd)
				{
					var root_w = children.bd.totalWidth() + modules.item(j).horizMarginBorderPadding();
					children.root.setStyle(&#x27;width&#x27;, root_w+&#x27;px&#x27;);
					col.setStyle(&#x27;width&#x27;, root_w+&#x27;px&#x27;);
				}
			}

			body_width -= col.totalWidth();
		}
		else
		{
			uncollapsed_count++;
			sum += col_widths[i];

			if (modules.size() == 1)
			{
				modules.item(0).setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);
			}
		}
	}

	if (uncollapsed_count &lt; col_count)
	{
		for (var i=0; i&lt;col_count; i++)
		{
			col_widths[i] *= (100.0 / sum);
		}
	}

	// set width of each column and size of each module

	var total_w  = 0,
		m        = 0,
		ftc_size = [];
	for (var i=0; i&lt;col_count; i++)
	{
		if (col_widths[i] == 0)
		{
			var module   = this.body_info.modules[i].item(0);
			var children = module._page_layout.children;
			if (mode === Y.PageLayout.FIT_TO_VIEWPORT)
			{
				var h = getHeight(col_heights[i], row_heights, i, 0, module, module_info);
				module.setStyle(&#x27;height&#x27;, h+&#x27;px&#x27;);

				if (children.bd)
				{
					var h1 = adjustHeight(h, children);
					var w1 = children.bd.insideWidth();
					this.fire(&#x27;beforeResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
					children.bd.setStyle(&#x27;height&#x27;, h1+&#x27;px&#x27;);
					this.fire(&#x27;afterResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
				}
			}
			else if (children.bd)
			{
				this.fire(&#x27;beforeResizeModule&#x27;, { bd: children.bd, height: &#x27;auto&#x27;, width: &#x27;auto&#x27; });

				children.root.setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);
				children.bd.setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);

				if (match_heights)
				{
					ftc_size.push([ [children.bd, children.bd.insideWidth()] ]);
				}
				else
				{
					this.fire(&#x27;afterResizeModule&#x27;,
					{
						bd:     children.bd,
						height: children.bd.insideHeight(),
						width:  children.bd.insideWidth()
					});
				}
			}
			continue;
		}
		m++;

		var w    = Math.max(1, Math.floor(body_width * col_widths[i] / 100.0));
		total_w += w;
		if (m == uncollapsed_count)
		{
			w += body_width - total_w;
		}

		w = Math.max(1, w - this.body_info.outers.item(i).horizMarginBorderPadding());
		this.body_info.outers.item(i).setStyle(&#x27;width&#x27;, w+&#x27;px&#x27;);
		w = Math.max(1, w - this.body_info.modules[0].item(0).horizMarginBorderPadding());

		var modules = this.body_info.modules[i];
		if (mode === Y.PageLayout.FIT_TO_VIEWPORT)
		{
			// adjust for vertically collapsed or fixed height modules

			var total_h    = 0;
			var open_count = modules.size();
			var count      = open_count;
			for (var j=0; j&lt;count; j++)
			{
				var h = row_heights[i][j];
				if (h &lt; 0)
				{
					total_h += modules.item(j).totalHeight();
					open_count--;
				}
			}

			// set the height of each module

			var k = 0;
			for (var j=0; j&lt;count; j++)
			{
				var module   = modules.item(j);
				var children = module._page_layout.children;
				if (row_heights[i][j] &lt; 0)
				{
					var h1 = children.bd.insideHeight();
					var w1 = w - children.root.horizMarginBorderPadding() -
							 children.bd.horizMarginBorderPadding();
					this.fire(&#x27;beforeResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
					module.setStyle(&#x27;width&#x27;, w+&#x27;px&#x27;);
					this.fire(&#x27;afterResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
					continue;
				}
				k++;

				if (children.bd)
				{
					var h    = getHeight(col_heights[i], row_heights, i, j, module, module_info);
					var h1   = adjustHeight(h, children);
					total_h += h + module_info.mbp;

					if (k == open_count)
					{
						h1 += body_height - total_h;
					}

					var w1 = Math.max(1, w - children.bd.horizMarginBorderPadding());
					this.fire(&#x27;beforeResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
					this._setWidth(children, w);
					children.bd.setStyle(&#x27;height&#x27;, h1+&#x27;px&#x27;);
					this.fire(&#x27;afterResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
				}
			}
		}
		else
		{
			// set the width of each module
			// clear the height of each module

			ftc_size.push([]);
			var count = modules.size();
			for (var j=0; j&lt;count; j++)
			{
				var children = modules.item(j)._page_layout.children;
				if (children.bd)
				{
					var w1 = Math.max(1, w - children.bd.horizMarginBorderPadding());
					this.fire(&#x27;beforeResizeModule&#x27;, { bd: children.bd, height: &#x27;auto&#x27;, width: w1 });
					this._setWidth(children, w);
					children.root.setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);
					children.bd.setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);

					if (match_heights)
					{
						ftc_size[i].push([children.bd, w1]);
					}
					else
					{
						this.fire(&#x27;afterResizeModule&#x27;,
						{
							bd:     children.bd,
							height: children.bd.insideHeight(),
							width:  w1
						});
					}
				}
			}
		}
	}

	// set the height of the last module in each column

	if (mode === Y.PageLayout.FIT_TO_CONTENT &amp;&amp; match_heights)
	{
		var h = 0;
		for (var i=0; i&lt;col_count; i++)
		{
			h = Math.max(h, this.body_info.outers.item(i).get(&#x27;offsetHeight&#x27;));
		}

		for (var i=0; i&lt;col_count; i++)
		{
			var modules = this.body_info.modules[i],
				count   = modules.size(),
				module  = null,
				w1      = 0;
			for (var j=count-1; j&gt;=0; j--)
			{
				var module1 = modules.item(j);
				if (count == 1 ||
					(!module &amp;&amp;
					 !module1.hasClass(Y.PageLayout.collapsed_vert_class) &amp;&amp;
					 this.body_info.inner_sizes[i][j] &gt; 0))
				{
					module = module1;
					w1     = ftc_size[i][j][1];
				}
				else
				{
					var bd = ftc_size[i][j][0];
					this.fire(&#x27;afterResizeModule&#x27;,
					{
						bd:     bd,
						height: bd.insideHeight(),
						width:  ftc_size[i][j][1]
					});
				}
			}

			if (module)
			{
				var delta = h - this.body_info.outers.item(i).get(&#x27;offsetHeight&#x27;);
				if (delta &gt; 0 &amp;&amp; module.get(&#x27;parentNode&#x27;).hasClass(Y.PageLayout.collapsed_horiz_class))
				{
					module.setStyle(&#x27;height&#x27;, (module.insideHeight() + delta)+&#x27;px&#x27;);
				}
				else	// always fire afterResizeModule
				{
					var children = module._page_layout.children;
					if (children.bd)
					{
						var h1 = children.bd.insideHeight() + delta;
						module.setStyle(&#x27;height&#x27;, &#x27;auto&#x27;);
						children.bd.setStyle(&#x27;height&#x27;, h1+&#x27;px&#x27;);
						this.fire(&#x27;afterResizeModule&#x27;, { bd: children.bd, height: h1, width: w1 });
					}
				}
			}
		}
	}
};

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
