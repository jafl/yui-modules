<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/gallery-quickedit/js/QuickEdit.js - YUI 3 Gallery Modules</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="YUI 3 Gallery Modules" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Accordion.html">Accordion</a></li>
                                <li><a href="../classes/AnimSequence.html">AnimSequence</a></li>
                                <li><a href="../classes/ArrayIterator.html">ArrayIterator</a></li>
                                <li><a href="../classes/ArrayList~extras.html">ArrayList~extras</a></li>
                                <li><a href="../classes/Array~algorithms.html">Array~algorithms</a></li>
                                <li><a href="../classes/Array~funcprog-extras.html">Array~funcprog-extras</a></li>
                                <li><a href="../classes/Array~object-extras.html">Array~object-extras</a></li>
                                <li><a href="../classes/Assert.html">Assert</a></li>
                                <li><a href="../classes/AtLeastOneCheckboxGroup.html">AtLeastOneCheckboxGroup</a></li>
                                <li><a href="../classes/AtMostOneCheckboxGroup.html">AtMostOneCheckboxGroup</a></li>
                                <li><a href="../classes/BulkEditor.html">BulkEditor</a></li>
                                <li><a href="../classes/Canvas.Context2d.html">Canvas.Context2d</a></li>
                                <li><a href="../classes/CheckboxGroup.html">CheckboxGroup</a></li>
                                <li><a href="../classes/Chipper.html">Chipper</a></li>
                                <li><a href="../classes/CollapseToggle.html">CollapseToggle</a></li>
                                <li><a href="../classes/ComplexMath.html">ComplexMath</a></li>
                                <li><a href="../classes/ComplexNumber.html">ComplexNumber</a></li>
                                <li><a href="../classes/DataSource.AsyncFunction.html">DataSource.AsyncFunction</a></li>
                                <li><a href="../classes/DataSource.BulkEdit.html">DataSource.BulkEdit</a></li>
                                <li><a href="../classes/DataSource.Treeble.html">DataSource.Treeble</a></li>
                                <li><a href="../classes/DateTime.html">DateTime</a></li>
                                <li><a href="../classes/DateTimeRange.html">DateTimeRange</a></li>
                                <li><a href="../classes/DateTimeUtils.html">DateTimeUtils</a></li>
                                <li><a href="../classes/EnableIfAnyCheckboxGroup.html">EnableIfAnyCheckboxGroup</a></li>
                                <li><a href="../classes/ExpirationCache.html">ExpirationCache</a></li>
                                <li><a href="../classes/ExpressionBuilder.html">ExpressionBuilder</a></li>
                                <li><a href="../classes/FormManager.html">FormManager</a></li>
                                <li><a href="../classes/HTMLTableBulkEditor.html">HTMLTableBulkEditor</a></li>
                                <li><a href="../classes/InputPopup.html">InputPopup</a></li>
                                <li><a href="../classes/InstanceManager.html">InstanceManager</a></li>
                                <li><a href="../classes/io~multiresponse.html">io~multiresponse</a></li>
                                <li><a href="../classes/Iterable.html">Iterable</a></li>
                                <li><a href="../classes/LinkedList.html">LinkedList</a></li>
                                <li><a href="../classes/LinkedListItem.html">LinkedListItem</a></li>
                                <li><a href="../classes/LinkedListIterator.html">LinkedListIterator</a></li>
                                <li><a href="../classes/LogFilter.html">LogFilter</a></li>
                                <li><a href="../classes/Math.html">Math</a></li>
                                <li><a href="../classes/MathCanvas.html">MathCanvas</a></li>
                                <li><a href="../classes/MathCanvas.Parser.html">MathCanvas.Parser</a></li>
                                <li><a href="../classes/MathCanvas.RectList.html">MathCanvas.RectList</a></li>
                                <li><a href="../classes/MathFunction.html">MathFunction</a></li>
                                <li><a href="../classes/MathFunction.Arccosine.html">MathFunction.Arccosine</a></li>
                                <li><a href="../classes/MathFunction.Arcsine.html">MathFunction.Arcsine</a></li>
                                <li><a href="../classes/MathFunction.Arctangent.html">MathFunction.Arctangent</a></li>
                                <li><a href="../classes/MathFunction.Arctangent2.html">MathFunction.Arctangent2</a></li>
                                <li><a href="../classes/MathFunction.Conjugate.html">MathFunction.Conjugate</a></li>
                                <li><a href="../classes/MathFunction.Cosine.html">MathFunction.Cosine</a></li>
                                <li><a href="../classes/MathFunction.E.html">MathFunction.E</a></li>
                                <li><a href="../classes/MathFunction.Exponential.html">MathFunction.Exponential</a></li>
                                <li><a href="../classes/MathFunction.FunctionWithArgs.html">MathFunction.FunctionWithArgs</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicCosine.html">MathFunction.HyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicSine.html">MathFunction.HyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicTangent.html">MathFunction.HyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.I.html">MathFunction.I</a></li>
                                <li><a href="../classes/MathFunction.ImaginaryPart.html">MathFunction.ImaginaryPart</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicCosine.html">MathFunction.InverseHyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicSine.html">MathFunction.InverseHyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicTangent.html">MathFunction.InverseHyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.Logarithm.html">MathFunction.Logarithm</a></li>
                                <li><a href="../classes/MathFunction.Magnitude.html">MathFunction.Magnitude</a></li>
                                <li><a href="../classes/MathFunction.Max.html">MathFunction.Max</a></li>
                                <li><a href="../classes/MathFunction.Min.html">MathFunction.Min</a></li>
                                <li><a href="../classes/MathFunction.NaturalLog.html">MathFunction.NaturalLog</a></li>
                                <li><a href="../classes/MathFunction.Negate.html">MathFunction.Negate</a></li>
                                <li><a href="../classes/MathFunction.Phase.html">MathFunction.Phase</a></li>
                                <li><a href="../classes/MathFunction.Pi.html">MathFunction.Pi</a></li>
                                <li><a href="../classes/MathFunction.Product.html">MathFunction.Product</a></li>
                                <li><a href="../classes/MathFunction.Quotient.html">MathFunction.Quotient</a></li>
                                <li><a href="../classes/MathFunction.RealPart.html">MathFunction.RealPart</a></li>
                                <li><a href="../classes/MathFunction.Rotate.html">MathFunction.Rotate</a></li>
                                <li><a href="../classes/MathFunction.Sine.html">MathFunction.Sine</a></li>
                                <li><a href="../classes/MathFunction.SquareRoot.html">MathFunction.SquareRoot</a></li>
                                <li><a href="../classes/MathFunction.Sum.html">MathFunction.Sum</a></li>
                                <li><a href="../classes/MathFunction.Tangent.html">MathFunction.Tangent</a></li>
                                <li><a href="../classes/MathFunction.Value.html">MathFunction.Value</a></li>
                                <li><a href="../classes/MathFunction.Variable.html">MathFunction.Variable</a></li>
                                <li><a href="../classes/MatrixBackground.html">MatrixBackground</a></li>
                                <li><a href="../classes/MatrixCredits.html">MatrixCredits</a></li>
                                <li><a href="../classes/MRUCache.html">MRUCache</a></li>
                                <li><a href="../classes/MultiObject.html">MultiObject</a></li>
                                <li><a href="../classes/NodeList~extras2.html">NodeList~extras2</a></li>
                                <li><a href="../classes/Node~dimensions.html">Node~dimensions</a></li>
                                <li><a href="../classes/Node~event-set.html">Node~event-set</a></li>
                                <li><a href="../classes/Node~optimizations.html">Node~optimizations</a></li>
                                <li><a href="../classes/Node~scrollIntoView.html">Node~scrollIntoView</a></li>
                                <li><a href="../classes/Node~utils.html">Node~utils</a></li>
                                <li><a href="../classes/Object~extras.html">Object~extras</a></li>
                                <li><a href="../classes/PageLayout.html">PageLayout</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageInput.html">Paginator.ui.CurrentPageInput</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageReport.html">Paginator.ui.CurrentPageReport</a></li>
                                <li><a href="../classes/Paginator.ui.FirstPageLink.html">Paginator.ui.FirstPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.ItemRangeDropdown.html">Paginator.ui.ItemRangeDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.LastPageLink.html">Paginator.ui.LastPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.NextPageLink.html">Paginator.ui.NextPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.PageLinks.html">Paginator.ui.PageLinks</a></li>
                                <li><a href="../classes/Paginator.ui.PreviousPageLink.html">Paginator.ui.PreviousPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.RowsPerPageDropdown.html">Paginator.ui.RowsPerPageDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.ValidationPageLinks.html">Paginator.ui.ValidationPageLinks</a></li>
                                <li><a href="../classes/Parsers.html">Parsers</a></li>
                                <li><a href="../classes/Plugin.BusyOverlay.html">Plugin.BusyOverlay</a></li>
                                <li><a href="../classes/Plugin.ConsoleTest.html">Plugin.ConsoleTest</a></li>
                                <li><a href="../classes/Plugin.DataTableDataSourceBusy.html">Plugin.DataTableDataSourceBusy</a></li>
                                <li><a href="../classes/Plugin.DataTablePaginator.html">Plugin.DataTablePaginator</a></li>
                                <li><a href="../classes/Plugin.DataTableQuickEdit.html">Plugin.DataTableQuickEdit</a></li>
                                <li><a href="../classes/Plugin.DataTableRowExpansion.html">Plugin.DataTableRowExpansion</a></li>
                                <li><a href="../classes/Plugin.DataTableState.html">Plugin.DataTableState</a></li>
                                <li><a href="../classes/Plugin.FixedSizeAccordion.html">Plugin.FixedSizeAccordion</a></li>
                                <li><a href="../classes/Plugin.InputCalendarSync.html">Plugin.InputCalendarSync</a></li>
                                <li><a href="../classes/Plugin.Neon.html">Plugin.Neon</a></li>
                                <li><a href="../classes/Plugin.NodeFXSequence.html">Plugin.NodeFXSequence</a></li>
                                <li><a href="../classes/Plugin.OverlayForm.html">Plugin.OverlayForm</a></li>
                                <li><a href="../classes/Plugin.PageLayoutAnyWidgetModule.html">Plugin.PageLayoutAnyWidgetModule</a></li>
                                <li><a href="../classes/Plugin.PageLayoutDataTableModule.html">Plugin.PageLayoutDataTableModule</a></li>
                                <li><a href="../classes/Popup.html">Popup</a></li>
                                <li><a href="../classes/QueryBuilder.html">QueryBuilder</a></li>
                                <li><a href="../classes/QueryBuilder.DateRange.html">QueryBuilder.DateRange</a></li>
                                <li><a href="../classes/QueryBuilder.MultiselectInput.html">QueryBuilder.MultiselectInput</a></li>
                                <li><a href="../classes/QueryBuilder.Select.html">QueryBuilder.Select</a></li>
                                <li><a href="../classes/QueryBuilder.String.html">QueryBuilder.String</a></li>
                                <li><a href="../classes/RPC.Mojito.html">RPC.Mojito</a></li>
                                <li><a href="../classes/SelectAllCheckboxGroup.html">SelectAllCheckboxGroup</a></li>
                                <li><a href="../classes/Sort.html">Sort</a></li>
                                <li><a href="../classes/Treeble.html">Treeble</a></li>
                                <li><a href="../classes/YUI~funcprog.html">YUI~funcprog</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/gallery-accordion-horiz-vert.html">gallery-accordion-horiz-vert</a></li>
                                <li><a href="../modules/gallery-adobe-air-config.html">gallery-adobe-air-config</a></li>
                                <li><a href="../modules/gallery-adobe-air-page-manager.html">gallery-adobe-air-page-manager</a></li>
                                <li><a href="../modules/gallery-adobe-air-prefs.html">gallery-adobe-air-prefs</a></li>
                                <li><a href="../modules/gallery-algorithms.html">gallery-algorithms</a></li>
                                <li><a href="../modules/gallery-anim-class.html">gallery-anim-class</a></li>
                                <li><a href="../modules/gallery-anim-sequence.html">gallery-anim-sequence</a></li>
                                <li><a href="../modules/gallery-bulkedit.html">gallery-bulkedit</a></li>
                                <li><a href="../modules/gallery-busyoverlay.html">gallery-busyoverlay</a></li>
                                <li><a href="../modules/gallery-canvas.html">gallery-canvas</a></li>
                                <li><a href="../modules/gallery-checkboxgroups.html">gallery-checkboxgroups</a></li>
                                <li><a href="../modules/gallery-chipper.html">gallery-chipper</a></li>
                                <li><a href="../modules/gallery-collapse-toggle.html">gallery-collapse-toggle</a></li>
                                <li><a href="../modules/gallery-complexnumber.html">gallery-complexnumber</a></li>
                                <li><a href="../modules/gallery-console-test.html">gallery-console-test</a></li>
                                <li><a href="../modules/gallery-datasource-async-function.html">gallery-datasource-async-function</a></li>
                                <li><a href="../modules/gallery-datatable-datasource-busy.html">gallery-datatable-datasource-busy</a></li>
                                <li><a href="../modules/gallery-datatable-paginator.html">gallery-datatable-paginator</a></li>
                                <li><a href="../modules/gallery-datatable-row-expansion.html">gallery-datatable-row-expansion</a></li>
                                <li><a href="../modules/gallery-datatable-state.html">gallery-datatable-state</a></li>
                                <li><a href="../modules/gallery-datetime.html">gallery-datetime</a></li>
                                <li><a href="../modules/gallery-datetime-range.html">gallery-datetime-range</a></li>
                                <li><a href="../modules/gallery-datetime-utils.html">gallery-datetime-utils</a></li>
                                <li><a href="../modules/gallery-dimensions.html">gallery-dimensions</a></li>
                                <li><a href="../modules/gallery-expiration-cache.html">gallery-expiration-cache</a></li>
                                <li><a href="../modules/gallery-exprbuilder.html">gallery-exprbuilder</a></li>
                                <li><a href="../modules/gallery-formmgr.html">gallery-formmgr</a></li>
                                <li><a href="../modules/gallery-formmgr-css-validation.html">gallery-formmgr-css-validation</a></li>
                                <li><a href="../modules/gallery-formmgr-overlay-plugin.html">gallery-formmgr-overlay-plugin</a></li>
                                <li><a href="../modules/gallery-funcprog.html">gallery-funcprog</a></li>
                                <li><a href="../modules/gallery-input-calendar-sync.html">gallery-input-calendar-sync</a></li>
                                <li><a href="../modules/gallery-instancemanager.html">gallery-instancemanager</a></li>
                                <li><a href="../modules/gallery-io-adobe-air.html">gallery-io-adobe-air</a></li>
                                <li><a href="../modules/gallery-io-multiresponse.html">gallery-io-multiresponse</a></li>
                                <li><a href="../modules/gallery-iterable-extras.html">gallery-iterable-extras</a></li>
                                <li><a href="../modules/gallery-layout.html">gallery-layout</a></li>
                                <li><a href="../modules/gallery-layout-anywidget.html">gallery-layout-anywidget</a></li>
                                <li><a href="../modules/gallery-layout-cols.html">gallery-layout-cols</a></li>
                                <li><a href="../modules/gallery-layout-datatable.html">gallery-layout-datatable</a></li>
                                <li><a href="../modules/gallery-layout-rows.html">gallery-layout-rows</a></li>
                                <li><a href="../modules/gallery-linkedlist.html">gallery-linkedlist</a></li>
                                <li><a href="../modules/gallery-log-filter.html">gallery-log-filter</a></li>
                                <li><a href="../modules/gallery-math.html">gallery-math</a></li>
                                <li><a href="../modules/gallery-mathcanvas.html">gallery-mathcanvas</a></li>
                                <li><a href="../modules/gallery-matrix-background.html">gallery-matrix-background</a></li>
                                <li><a href="../modules/gallery-matrix-credits.html">gallery-matrix-credits</a></li>
                                <li><a href="../modules/gallery-mojito-rpc.html">gallery-mojito-rpc</a></li>
                                <li><a href="../modules/gallery-mru-cache.html">gallery-mru-cache</a></li>
                                <li><a href="../modules/gallery-multiobject.html">gallery-multiobject</a></li>
                                <li><a href="../modules/gallery-neon.html">gallery-neon</a></li>
                                <li><a href="../modules/gallery-node-event-set.html">gallery-node-event-set</a></li>
                                <li><a href="../modules/gallery-node-optimizations.html">gallery-node-optimizations</a></li>
                                <li><a href="../modules/gallery-node-utils.html">gallery-node-utils</a></li>
                                <li><a href="../modules/gallery-nodelist-extras2.html">gallery-nodelist-extras2</a></li>
                                <li><a href="../modules/gallery-object-extras.html">gallery-object-extras</a></li>
                                <li><a href="../modules/gallery-paginator.html">gallery-paginator</a></li>
                                <li><a href="../modules/gallery-popup.html">gallery-popup</a></li>
                                <li><a href="../modules/gallery-querybuilder.html">gallery-querybuilder</a></li>
                                <li><a href="../modules/gallery-querybuilder-daterange.html">gallery-querybuilder-daterange</a></li>
                                <li><a href="../modules/gallery-querybuilder-multiselect-input.html">gallery-querybuilder-multiselect-input</a></li>
                                <li><a href="../modules/gallery-quickedit.html">gallery-quickedit</a></li>
                                <li><a href="../modules/gallery-scrollintoview.html">gallery-scrollintoview</a></li>
                                <li><a href="../modules/gallery-sort-extras.html">gallery-sort-extras</a></li>
                                <li><a href="../modules/gallery-table-utils.html">gallery-table-utils</a></li>
                                <li><a href="../modules/gallery-test-extras.html">gallery-test-extras</a></li>
                                <li><a href="../modules/gallery-treeble.html">gallery-treeble</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/gallery-quickedit/js/QuickEdit.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&quot;use strict&quot;;

/**
 * @module gallery-quickedit
 */

/**
 * &lt;p&gt;The QuickEdit plugin provides a new mode for DataTable where all
 * values in the table can be edited simultaneously, controlled by the
 * column configuration.  Each editable cell contains an input field.  If
 * the user decides to save the changes, then you can extract the changed
 * values by calling &lt;code&gt;&lt;i&gt;dt&lt;/i&gt;.qe.getChanges()&lt;/code&gt;.&lt;/p&gt;
 *
 * &lt;p&gt;For a column to be editable in QuickEdit mode, the column
 * configuration must include &lt;code&gt;quickEdit&lt;/code&gt;.  The contents of
 * this object define the column&#x27;s behavior in QuickEdit mode.&lt;/p&gt;
 *
 * &lt;p&gt;To move up or down within a column while in QuickEdit mode, hold down
 * the Ctrl key and press the up or down arrow.&lt;/p&gt;
 *
 * &lt;p&gt;If a column should not be editable, but needs to be formatted
 * differently in QuickEdit mode, then you must define qeFormatter in
 * the column configuration. This is simply a normal cell formatter
 * function that will be used in QuickEdit mode.  The static functions
 * &lt;code&gt;readonly*Formatter&lt;/code&gt; provide examples.&lt;/p&gt;
 *
 * &lt;p&gt;The following configuration can be provided as part of
 * quickEdit:&lt;/p&gt;
 *
 * &lt;dl&gt;
 *
 * &lt;dt&gt;changed&lt;/dt&gt;&lt;dd&gt;Optional.  The function to call with the old and new
 * value.  Should return true if the values are different.&lt;/dd&gt;
 *
 * &lt;dt&gt;formatter&lt;/dt&gt;&lt;dd&gt;The cell formatter which will render an
 * appropriate form field: &amp;lt;input type=&quot;text&quot;&amp;gt;, &amp;lt;textarea&amp;gt;,
 * or &amp;lt;select&amp;gt;.&lt;/dd&gt;
 *
 * &lt;dt&gt;validation&lt;/dt&gt;&lt;dd&gt;Validation configuration for every field in
 * the column.&lt;/dd&gt;
 *
 * &lt;dt&gt;copyDown&lt;/dt&gt;&lt;dd&gt;If true, the top cell in the column will have a
 * button to copy the value down to the rest of the rows.&lt;/dd&gt;
 *
 * &lt;/dl&gt;
 *
 * &lt;p&gt;The following configuration can be provided as part of
 * quickEdit.validation:&lt;/p&gt;
 *
 * &lt;dl&gt;
 *
 * &lt;dt&gt;css&lt;/dt&gt;&lt;dd&gt;CSS classes encoding basic validation rules:
 *  &lt;dl&gt;
 *  &lt;dt&gt;&lt;code&gt;yiv-required&lt;/code&gt;&lt;/dt&gt;
 *      &lt;dd&gt;Value must not be empty.&lt;/dd&gt;
 *
 *  &lt;dt&gt;&lt;code&gt;yiv-length:[x,y]&lt;/code&gt;&lt;/dt&gt;
 *      &lt;dd&gt;String must be at least x characters and at most y characters.
 *      At least one of x and y must be specified.&lt;/dd&gt;
 *
 *  &lt;dt&gt;&lt;code&gt;yiv-integer:[x,y]&lt;/code&gt;&lt;/dt&gt;
 *      &lt;dd&gt;The integer value must be at least x and at most y.
 *      x and y are both optional.&lt;/dd&gt;
 *
 *  &lt;dt&gt;&lt;code&gt;yiv-decimal:[x,y]&lt;/code&gt;&lt;/dt&gt;
 *      &lt;dd&gt;The decimal value must be at least x and at most y.  Exponents are
 *      not allowed.  x and y are both optional.&lt;/dd&gt;
 *  &lt;/dl&gt;
 * &lt;/dd&gt;
 *
 * &lt;dt&gt;fn&lt;/dt&gt;&lt;dd&gt;A function that will be called with the DataTable as its
 * scope and the cell&#x27;s form element as the argument. Return true if the
 * value is valid. Otherwise, call this.qe.displayMessage(...) to display
 * an error and return false.&lt;/dd&gt;
 *
 * &lt;dt&gt;msg&lt;/dt&gt;&lt;dd&gt;A map of types to messages that will be displayed
 * when a basic or regex validation rule fails. The valid types are:
 * required, min_length, max_length, integer, decimal, and regex.
 * There is no default for type regex, so you must specify a message if
 * you configure a regex validation.&lt;/dd&gt;
 *
 * &lt;dt&gt;regex&lt;/dt&gt;&lt;dd&gt;Regular expression that the value must satisfy in
 * order to be considered valid.&lt;/dd&gt;
 *
 * &lt;/dl&gt;
 *
 * &lt;p&gt;Custom QuickEdit Formatters&lt;/p&gt;
 *
 * &lt;p&gt;To write a custom cell formatter for QuickEdit mode, you must
 * structure the function as follows:&lt;/p&gt;
 *
 * &lt;pre&gt;
 * function myQuickEditFormatter(o) {
 * &amp;nbsp;&amp;nbsp;var markup =
 * &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#x27;&amp;lt;input type=&quot;text&quot; class=&quot;{yiv} quickedit-field quickedit-key:{key}&quot; value=&quot;{value}&quot;/&amp;gt;&#x27; +
 * &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#x27;{cd}&#x27; + Y.Plugin.DataTableQuickEdit.error_display_markup;
 *
 * &amp;nbsp;&amp;nbsp;var qe = o.column.quickEdit;
 * &amp;nbsp;&amp;nbsp;return Y.Lang.sub(markup, {
 * &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;key: o.column.key,
 * &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: o.value.toString().replace(/&quot;/g, &#x27;&amp;quot;&#x27;),
 * &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;yiv: qe.validation ? (qe.validation.css || &#x27;&#x27;) : &#x27;&#x27;,
 * &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cd: QuickEdit.copyDownFormatter.call(this, o)
 * &amp;nbsp;&amp;nbsp;});
 * };
 * &lt;/pre&gt;
 *
 * &lt;p&gt;You can use textarea or select instead of input, but you can only
 * create a single field.&lt;/p&gt;
 *
 * &lt;p&gt;&lt;code&gt;extractMyEditableValue&lt;/code&gt; does not have to be a separate
 * function. The work should normally be done inline in the formatter
 * function, but the name of the sample function makes the point clear.&lt;/p&gt;
 *
 * @main gallery-quickedit
 * @class DataTableQuickEdit
 * @namespace Plugin
 * @extends Plugin.Base
 * @constructor
 * @param config {Object} Object literal to set component configuration.
 */
function QuickEdit(config)
{
	QuickEdit.superclass.constructor.call(this, config);
}

QuickEdit.NAME = &quot;QuickEditPlugin&quot;;
QuickEdit.NS   = &quot;qe&quot;;

QuickEdit.ATTRS =
{
	/**
	 * @attribute changesAlwaysInclude
	 * @description Record keys to always include in result from getChanges().
	 * @type Array
	 */
	changesAlwaysInclude:
	{
		value:     [],
		validator: Y.Lang.isArray
	},

	/**
	 * @attribute includeAllRowsInChanges
	 * @description If true, getChanges() returns a record for every row, even if the record is empty.  Set to false if you want getChanges() to only return records that contain data.
	 * @type Boolean
	 * @default true
	 */
	includeAllRowsInChanges:
	{
		value:     true,
		validator: Y.Lang.isBoolean
	},

	/**
	 * @attribute includeRowIndexInChanges
	 * @description If true, getChanges() includes the row index in each record, using the _row_index key.
	 * @type Boolean
	 * @default false
	 */
	includeRowIndexInChanges:
	{
		value:     false,
		validator: Y.Lang.isBoolean
	}
};

var quick_edit_re          = /quickedit-key:([^\s]+)/,
	qe_row_status_prefix   = &#x27;quickedit-has&#x27;,
	qe_row_status_pattern  = qe_row_status_prefix + &#x27;([a-z]+)&#x27;,
	qe_row_status_re       = new RegExp(Y.Node.class_re_prefix + qe_row_status_pattern + Y.Node.class_re_suffix),
	qe_cell_status_prefix  = &#x27;quickedit-has&#x27;,
	qe_cell_status_pattern = qe_cell_status_prefix + &#x27;([a-z]+)&#x27;,
	qe_cell_status_re      = new RegExp(Y.Node.class_re_prefix + qe_cell_status_pattern + Y.Node.class_re_suffix);

/**
 * The CSS class that marks the container for the error message inside a cell.
 *
 * @property error_text_class
 * @static
 * @type {String}
 */
QuickEdit.error_text_class = &#x27;quickedit-message-text&#x27;;

/**
 * The markup for the container for the error message inside a cell.
 *
 * @property error_display_markup
 * @static
 * @type {String}
 */
QuickEdit.error_display_markup = &#x27;&lt;div class=&quot;quickedit-message-text&quot;&gt;&lt;/div&gt;&#x27;;

/**
 * The CSS class that marks the &quot;Copy Down&quot; button inside a cell.
 *
 * @property copy_down_button_class
 * @static
 * @type {String}
 */
QuickEdit.copy_down_button_class = &#x27;quickedit-copy-down&#x27;;

/**
 * Called with exactly the same arguments as any other cell
 * formatter, this function displays an input field.
 *
 * @method textFormatter
 * @static
 * @param o {Object} standard DataTable formatter data
 */
QuickEdit.textFormatter = function(o)
{
	var markup =
		&#x27;&lt;input type=&quot;text&quot; class=&quot;{yiv} quickedit-field quickedit-key:{key}&quot; value=&quot;{value}&quot;/&gt;&#x27; +
		&#x27;{cd}&#x27; + QuickEdit.error_display_markup;

	var qe = o.column.quickEdit;
	return Y.Lang.sub(markup,
	{
		key:   o.column.key,
		value: o.value.toString().replace(/&quot;/g, &#x27;&amp;quot;&#x27;),
		yiv:   qe.validation ? (qe.validation.css || &#x27;&#x27;) : &#x27;&#x27;,
		cd:    QuickEdit.copyDownFormatter.call(this, o)
	});
};

/**
 * Called with exactly the same arguments as any other cell
 * formatter, this function displays a textarea field.
 *
 * @method textareaFormatter
 * @static
 * @param o {Object} standard DataTable formatter data
 */
QuickEdit.textareaFormatter = function(o)
{
	var markup =
		&#x27;&lt;textarea class=&quot;{yiv} quickedit-field quickedit-key:{key}&quot;&gt;{value}&lt;/textarea&gt;&#x27; +
		&#x27;{cd}&#x27; + QuickEdit.error_display_markup;

	var qe = o.column.quickEdit;
	return Y.Lang.sub(markup,
	{
		key:   o.column.key,
		value: o.value,
		yiv:   qe.validation ? (qe.validation.css || &#x27;&#x27;) : &#x27;&#x27;,
		cd:    QuickEdit.copyDownFormatter.call(this, o)
	});
};

/**
 * Called with exactly the same arguments as any other cell
 * formatter, this function displays an email address without the
 * anchor tag.  Use this as the column&#x27;s qeFormatter if the column
 * should not be editable in QuickEdit mode.
 *
 * @method readonlyEmailFormatter
 * @static
 * @param o {Object} standard DataTable formatter data
 */
QuickEdit.readonlyEmailFormatter = function(o)
{
	return (o.value || &#x27;&#x27;);		// don&#x27;t need to check for zero
};

/**
 * Called with exactly the same arguments as any other cell
 * formatter, this function displays a link without the anchor tag.
 * Use this as the column&#x27;s qeFormatter if the column should not be
 * editable in QuickEdit mode.
 *
 * @method readonlyLinkFormatter
 * @static
 * @param o {Object} standard DataTable formatter data
 */
QuickEdit.readonlyLinkFormatter = function(o)
{
	return (o.value || &#x27;&#x27;);		// don&#x27;t need to check for zero
};

/*
 * Copy value from first cell to all other cells in the column.
 *
 * @method copyDown
 * @private
 * @param e {Event} triggering event
 */
function copyDown(e)
{
	var cell  = e.currentTarget.ancestor(&#x27;.yui3-datatable-cell&#x27;);
	var field = cell.one(&#x27;.quickedit-field&#x27;);
	if (!field)
	{
		return;
	}

	var value = Y.Lang.trim(field.get(&#x27;value&#x27;));
	if (!value &amp;&amp; value !== 0)
	{
		return;
	}

	while (1)
	{
		cell = this.getCell(cell, &#x27;below&#x27;);
		if (!cell)
		{
			break;
		}

		field = cell.one(&#x27;.quickedit-field&#x27;);
		if (field)
		{
			field.set(&#x27;value&#x27;, value);
		}
	}
}

/**
 * Inserts a &quot;Copy down&quot; button if the cell is in the first row of the
 * DataTable.  Call this at the end of your QuickEdit formatter.
 *
 * @method copyDownFormatter
 * @static
 * @param o {Object} cell formatter object
 * @param td {Node} cell
 */
QuickEdit.copyDownFormatter = function(o, td)
{
	if (o.column.quickEdit.copyDown &amp;&amp; o.rowIndex === 0)
	{
		return Y.Lang.sub(&#x27;&lt;button type=&quot;button&quot; title=&quot;Copy down&quot; class=&quot;{c}&quot;&gt;&amp;darr;&lt;/button&gt;&#x27;,
		{
			c: QuickEdit.copy_down_button_class
		});
	}
	else
	{
		return &#x27;&#x27;;
	}
};

function wrapFormatter(editFmt, origFmt)
{
	return function(o)
	{
		if (!o.record &amp;&amp; Y.Lang.isString(origFmt))
		{
			return origFmt;
		}
		else
		{
			return (o.record ? editFmt : origFmt).apply(this, arguments);
		}
	};
}

/*
 * Shift the focus up/down within a column.
 */
function moveFocus(e)
{
	var cell = this.getCell(e.target, e.charCode == 38 ? &#x27;above&#x27; : &#x27;below&#x27;);
	if (cell)
	{
		var input = cell.one(&#x27;.quickedit-field&#x27;);
		if (input)
		{
			input.focus();
			input.select();
			e.halt(true);
		}
	}
}

/*
 * Parse the column configuration for easy lookup.
 */
function parseColumns()
{
	var forest = this.get(&#x27;host&#x27;).get(&#x27;columns&#x27;);
	var map    = {};

	function accumulate(list, node)
	{
		if (Y.Lang.isString(node))
		{
			var col = { key: node };
			list.push(col);
			map[node] = col;
		}
		else if (node.children)
		{
			list = Y.reduce(node.children, list, accumulate);
		}
		else
		{
			list.push(node);
			map[ node.key ] = node;
		}

		return list;
	}

	this.column_list = Y.reduce(forest, [], accumulate);
	this.column_map  = map;
}

/*
 * Validate the given form fields.
 *
 * @method validateElements
 * @private
 * @param e {Array} Array of form fields.
 * @return {boolean} true if all validation checks pass
 */
function validateElements(
	/* NodeList */ list)
{
	var host = this.get(&#x27;host&#x27;);

	var status = true;
	var count  = list.size();
	for (var i=0; i&lt;count; i++)
	{
		var e = list.item(i);
		if (!Y.DOM.hasClass(e, &#x27;quickedit-field&#x27;))
		{
			continue;
		}

		var qe = this.column_map[ this._getColumnKey(e) ].quickEdit;
		if (!qe)
		{
			continue;
		}
		var msg_list = qe.validation ? qe.validation.msg : null;

		var info = Y.FormManager.validateFromCSSData(e, msg_list);
		if (info.error)
		{
			this.displayMessage(e, info.error, &#x27;error&#x27;);
			status = false;
			continue;
		}

		if (info.keepGoing)
		{
			if (qe.validation &amp;&amp;
				qe.validation.regex instanceof RegExp &amp;&amp;
				!qe.validation.regex.test(e.get(&#x27;value&#x27;)))
			{
				this.displayMessage(e, msg_list ? msg_list.regex : null, &#x27;error&#x27;);
				status = false;
				continue;
			}
		}

		if (qe.validation &amp;&amp;
			Y.Lang.isFunction(qe.validation.fn) &amp;&amp;
			!qe.validation.fn.call(host, e))
		{
			status = false;
			continue;
		}
	}

	return status;
}

Y.extend(QuickEdit, Y.Plugin.Base,
{
	initializer: function(config)
	{
		var host = this.get(&#x27;host&#x27;);

		this.hasMessages = false;

		parseColumns.call(this);
		this.get(&#x27;host&#x27;).after(&#x27;columnsChange&#x27;, parseColumns, this);

		var h = this.afterHostEvent(&#x27;render&#x27;, function()
		{
			host.get(&#x27;boundingBox&#x27;).delegate(&#x27;click&#x27;, copyDown, &#x27;.&#x27;+QuickEdit.copy_down_button_class, host);
			h.detach();
		});
	},

	/**
	 * Switch to QuickEdit mode.  Columns that have quickEdit defined will
	 * be editable.  If the table has paginators, you must hide them.
	 * 
	 * @method start
	 */
	start: function()
	{
		this.fire(&#x27;clearErrorNotification&#x27;);

		var host      = this.get(&#x27;host&#x27;);
		this.saveSort = [];
		this.saveEdit = [];
		this.saveFmt  = {};
		for (var i=0; i&lt;this.column_list.length; i++)
		{
			var col = this.column_list[i];
			var key = col.key;
			this.saveSort.push(col.sortable);
			col.sortable = false;
//			this.saveEdit.push(col.editor);
//			col.editor = null;

			var qe  = col.quickEdit,
				qef = col.qeFormatter;
			if (/* !col.hidden &amp;&amp; */ (qe || qef))
			{
				var fn = null;
				if (qe &amp;&amp; Y.Lang.isFunction(qe.formatter))
				{
					fn = qe.formatter;
				}
				else if (Y.Lang.isFunction(qef))
				{
					fn = qef;
				}
				else
				{
					fn = QuickEdit.textFormatter;
				}

				if (fn)
				{
					this.saveFmt[key] =
					{
						formatter:     col.formatter,
						nodeFormatter: col.nodeFormatter,
						_formatterFn:  col._formatterFn,
						allowHTML:     col.allowHTML
					};

					col.formatter     = wrapFormatter.call(this, fn, col.formatter || col.nodeFormatter);
					col.nodeFormatter = null;
					col.allowHTML     = true;
				}
			}
		}

		var container = host.get(&#x27;contentBox&#x27;);
		container.addClass(host.getClassName(&#x27;quickedit&#x27;));
		this.move_event_handle = container.on(&#x27;key&#x27;, moveFocus, &#x27;down:38+ctrl,40+ctrl&#x27;, host);

		// trigger re-parsing of columns -- since we saved references to
		// the column objects, the original forest has been modified :)
		host.set(&#x27;columns&#x27;, host.get(&#x27;columns&#x27;));
	},

	/**
	 * Stop QuickEdit mode.  THIS DISCARDS ALL DATA!  If you want to save
	 * the data, call getChanges() BEFORE calling this function.  If the
	 * table has paginators, you must show them.
	 * 
	 * @method cancel
	 */
	cancel: function()
	{
		this.fire(&#x27;clearErrorNotification&#x27;);

		for (var i=0; i&lt;this.column_list.length; i++)
		{
			var col      = this.column_list[i];
			col.sortable = this.saveSort[i];
//			col.editor   = this.saveEdit[i];
		}
		delete this.saveSort;
		delete this.saveEdit;

		Y.each(this.saveFmt, function(fmt, key)
		{
			var col           = this.column_map[key];
			col.formatter     = fmt.formatter;
			col.nodeFormatter = fmt.nodeFormatter;
			col._formatterFn  = fmt._formatterFn;
			col.allowHTML     = fmt.allowHTML;
		},
		this);
		delete this.saveFmt;

		var host      = this.get(&#x27;host&#x27;);
		var container = host.get(&#x27;contentBox&#x27;);
		container.removeClass(host.getClassName(&#x27;quickedit&#x27;));
		if (this.move_event_handle)
		{
			this.move_event_handle.detach();
			delete this.move_event_handle;
		}

		// trigger re-parsing of columns -- since we saved references to
		// the column objects, the original forest has been modified :)
		host.set(&#x27;columns&#x27;, host.get(&#x27;columns&#x27;));
	},

	/**
	 * Return the changed values.  For each row, an object is created with
	 * only the changed values.  The object keys are the column keys.  If
	 * you need values from particular columns to be included always, even
	 * if the value did not change, include the key &#x60;changesAlwaysInclude&#x60;
	 * in the plugin configuration and pass an array of column keys.
	 * If you need the row indexes, configure &#x60;includeRowIndexInChanges&#x60;.
	 * 
	 * If you only want the records with changes, configure
	 * &#x60;includeAllRowsInChanges&#x60; to be false.  For this to be useful, you
	 * will need to configure either &#x60;changesAlwaysInclude&#x60; or
	 * &#x60;includeRowIndexInChanges&#x60;.
	 *
	 * @method getChanges
	 * @return {mixed} array of objects if all validations pass, false otherwise
	 */
	getChanges: function()
	{
		if (!this.validate())
		{
			return false;
		}

		var changes        = [],
			always_include = this.get(&#x27;changesAlwaysInclude&#x27;),
			include_index  = this.get(&#x27;includeRowIndexInChanges&#x27;),
			include_all    = this.get(&#x27;includeAllRowsInChanges&#x27;);

		var host      = this.get(&#x27;host&#x27;);
		var rows      = host._tbodyNode.get(&#x27;children&#x27;);
		host.get(&#x27;data&#x27;).each(function(rec, i)
		{
			var list = rows.item(i).all(&#x27;.quickedit-field&#x27;);

			var change  = {},
				changed = false;

			list.each(function(field)
			{
				var key  = this._getColumnKey(field);
				var qe   = this.column_map[key].quickEdit;
				var prev = rec.get(key);

				var val = Y.Lang.trim(field.get(&#x27;value&#x27;));
				if (qe.changed ? qe.changed(prev, val) :
						val !== (prev ? prev.toString() : &#x27;&#x27;))
				{
					change[key] = val;
					changed     = true;
				}
			},
			this);

			if (changed || include_all)
			{
				for (var j=0; j&lt;always_include.length; j++)
				{
					var key     = always_include[j];
					change[key] = rec.get(key);
				}

				if (include_index)
				{
					change._row_index = i;
				}

				changes.push(change);
			}
		},
		this);

		return changes;
	},

	/**
	 * Validate the QuickEdit data.
	 *
	 * @method validate
	 * @return {boolean} true if all validation checks pass
	 */
	validate: function()
	{
		this.clearMessages();
		var status = true;
		var host   = this.get(&#x27;host&#x27;);

		var e1 = host._tbodyNode.getElementsByTagName(&#x27;input&#x27;);
		var e2 = host._tbodyNode.getElementsByTagName(&#x27;textarea&#x27;);
		var e3 = host._tbodyNode.getElementsByTagName(&#x27;select&#x27;);

		status = validateElements.call(this, e1) &amp;&amp; status;	// status last to guarantee call
		status = validateElements.call(this, e2) &amp;&amp; status;
		status = validateElements.call(this, e3) &amp;&amp; status;

		if (!status)
		{
			this.fire(&#x27;notifyErrors&#x27;);
		}

		return status;
	},

	/**
	 * Clear all validation messages in QuickEdit mode.
	 * 
	 * @method clearMessages
	 */
	clearMessages: function()
	{
		this.hasMessages = false;

		this.fire(&#x27;clearErrorNotification&#x27;);

		var host = this.get(&#x27;host&#x27;);
		host._tbodyNode.getElementsByClassName(qe_row_status_pattern)
			.removeClass(qe_row_status_pattern);
		host._tbodyNode.getElementsByClassName(qe_cell_status_pattern)
			.removeClass(qe_cell_status_pattern);
		host._tbodyNode.all(&#x27;.&#x27; + QuickEdit.error_text_class)
			.set(&#x27;innerHTML&#x27;, &#x27;&#x27;);
	},

	/**
	 * Display a message for a QuickEdit field.  If an existing message with
	 * a higher precedence is already visible, it will not be replaced.
	 *
	 * @method displayMessage
	 * @param e {Element} form field
	 * @param msg {String} message to display
	 * @param type {String} message type: error, warn, success, info
	 * @param scroll {boolean} If false, does not scroll, even if this is the first message to display.
	 */
	displayMessage: function(
		/* element */	e,
		/* string */	msg,
		/* string */	type,
		/* boolean */	scroll)
	{
		if (Y.Lang.isUndefined(scroll))
		{
			scroll = true;
		}

		e       = Y.one(e);
		var row = e.getAncestorByTagName(&#x27;tr&#x27;);
		if (Y.FormManager.statusTakesPrecedence(this._getElementStatus(row, qe_row_status_re), type))
		{
			if (!this.hasMessages &amp;&amp; scroll)
			{
				Y.one(row.get(&#x27;firstChild&#x27;)).scrollIntoView();
			}

			row.replaceClass(qe_row_status_pattern, qe_row_status_prefix + type);
			this.hasMessages = true;
		}

		var cell = e.getAncestorByTagName(&#x27;td&#x27;);
		if (Y.FormManager.statusTakesPrecedence(this._getElementStatus(cell, qe_cell_status_re), type))
		{
			if (msg)
			{
				cell.one(&#x27;.&#x27; + QuickEdit.error_text_class)
					.set(&#x27;innerHTML&#x27;, msg);
			}

			cell.replaceClass(qe_cell_status_pattern, qe_cell_status_prefix + type);
			this.hasMessages = true;
		}
	},

	/**
	 * Return the status of the field.
	 *
	 * @method _getElementStatus
	 * @protected
	 * @param e {Node} form field
	 * @param r {RegExp} regex to match against className
	 * @return {String}
	 */
	_getElementStatus: function(
		/* Node */	e,
		/* regex */	r)
	{
		var m = e.get(&#x27;className&#x27;).match(r);
		return ((m &amp;&amp; m.length) ? m[1] : false);
	},

	/**
	 * Return the column key for the specified field.
	 * 
	 * @method _getColumnKey
	 * @protected
	 * @param e {Node} form field
	 * @return {String}
	 */
	_getColumnKey: function(
		/* Node */ e)
	{
		var m = quick_edit_re.exec(e.get(&#x27;className&#x27;));
		return m[1];
	}
});

Y.namespace(&quot;Plugin&quot;);
Y.Plugin.DataTableQuickEdit = QuickEdit;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
