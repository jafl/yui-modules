<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/gallery-querybuilder-daterange/js/daterange.js - YUI 3 Gallery Modules</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="YUI 3 Gallery Modules" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Accordion.html">Accordion</a></li>
                                <li><a href="../classes/AnimSequence.html">AnimSequence</a></li>
                                <li><a href="../classes/ArrayIterator.html">ArrayIterator</a></li>
                                <li><a href="../classes/ArrayList~extras.html">ArrayList~extras</a></li>
                                <li><a href="../classes/Array~algorithms.html">Array~algorithms</a></li>
                                <li><a href="../classes/Array~funcprog-extras.html">Array~funcprog-extras</a></li>
                                <li><a href="../classes/Array~object-extras.html">Array~object-extras</a></li>
                                <li><a href="../classes/Assert.html">Assert</a></li>
                                <li><a href="../classes/AtLeastOneCheckboxGroup.html">AtLeastOneCheckboxGroup</a></li>
                                <li><a href="../classes/AtMostOneCheckboxGroup.html">AtMostOneCheckboxGroup</a></li>
                                <li><a href="../classes/BulkEditor.html">BulkEditor</a></li>
                                <li><a href="../classes/Canvas.Context2d.html">Canvas.Context2d</a></li>
                                <li><a href="../classes/CheckboxGroup.html">CheckboxGroup</a></li>
                                <li><a href="../classes/Chipper.html">Chipper</a></li>
                                <li><a href="../classes/CollapseToggle.html">CollapseToggle</a></li>
                                <li><a href="../classes/ComplexMath.html">ComplexMath</a></li>
                                <li><a href="../classes/ComplexNumber.html">ComplexNumber</a></li>
                                <li><a href="../classes/DataSource.AsyncFunction.html">DataSource.AsyncFunction</a></li>
                                <li><a href="../classes/DataSource.BulkEdit.html">DataSource.BulkEdit</a></li>
                                <li><a href="../classes/DataSource.Treeble.html">DataSource.Treeble</a></li>
                                <li><a href="../classes/DateTime.html">DateTime</a></li>
                                <li><a href="../classes/DateTimeRange.html">DateTimeRange</a></li>
                                <li><a href="../classes/DateTimeUtils.html">DateTimeUtils</a></li>
                                <li><a href="../classes/EnableIfAnyCheckboxGroup.html">EnableIfAnyCheckboxGroup</a></li>
                                <li><a href="../classes/ExpirationCache.html">ExpirationCache</a></li>
                                <li><a href="../classes/ExpressionBuilder.html">ExpressionBuilder</a></li>
                                <li><a href="../classes/FormManager.html">FormManager</a></li>
                                <li><a href="../classes/HTMLTableBulkEditor.html">HTMLTableBulkEditor</a></li>
                                <li><a href="../classes/InputPopup.html">InputPopup</a></li>
                                <li><a href="../classes/InstanceManager.html">InstanceManager</a></li>
                                <li><a href="../classes/io~multiresponse.html">io~multiresponse</a></li>
                                <li><a href="../classes/Iterable.html">Iterable</a></li>
                                <li><a href="../classes/LinkedList.html">LinkedList</a></li>
                                <li><a href="../classes/LinkedListItem.html">LinkedListItem</a></li>
                                <li><a href="../classes/LinkedListIterator.html">LinkedListIterator</a></li>
                                <li><a href="../classes/LogFilter.html">LogFilter</a></li>
                                <li><a href="../classes/Math.html">Math</a></li>
                                <li><a href="../classes/MathCanvas.html">MathCanvas</a></li>
                                <li><a href="../classes/MathCanvas.Parser.html">MathCanvas.Parser</a></li>
                                <li><a href="../classes/MathCanvas.RectList.html">MathCanvas.RectList</a></li>
                                <li><a href="../classes/MathFunction.html">MathFunction</a></li>
                                <li><a href="../classes/MathFunction.Arccosine.html">MathFunction.Arccosine</a></li>
                                <li><a href="../classes/MathFunction.Arcsine.html">MathFunction.Arcsine</a></li>
                                <li><a href="../classes/MathFunction.Arctangent.html">MathFunction.Arctangent</a></li>
                                <li><a href="../classes/MathFunction.Arctangent2.html">MathFunction.Arctangent2</a></li>
                                <li><a href="../classes/MathFunction.Conjugate.html">MathFunction.Conjugate</a></li>
                                <li><a href="../classes/MathFunction.Cosine.html">MathFunction.Cosine</a></li>
                                <li><a href="../classes/MathFunction.E.html">MathFunction.E</a></li>
                                <li><a href="../classes/MathFunction.Exponential.html">MathFunction.Exponential</a></li>
                                <li><a href="../classes/MathFunction.FunctionWithArgs.html">MathFunction.FunctionWithArgs</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicCosine.html">MathFunction.HyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicSine.html">MathFunction.HyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicTangent.html">MathFunction.HyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.I.html">MathFunction.I</a></li>
                                <li><a href="../classes/MathFunction.ImaginaryPart.html">MathFunction.ImaginaryPart</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicCosine.html">MathFunction.InverseHyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicSine.html">MathFunction.InverseHyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicTangent.html">MathFunction.InverseHyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.Logarithm.html">MathFunction.Logarithm</a></li>
                                <li><a href="../classes/MathFunction.Magnitude.html">MathFunction.Magnitude</a></li>
                                <li><a href="../classes/MathFunction.Max.html">MathFunction.Max</a></li>
                                <li><a href="../classes/MathFunction.Min.html">MathFunction.Min</a></li>
                                <li><a href="../classes/MathFunction.NaturalLog.html">MathFunction.NaturalLog</a></li>
                                <li><a href="../classes/MathFunction.Negate.html">MathFunction.Negate</a></li>
                                <li><a href="../classes/MathFunction.Phase.html">MathFunction.Phase</a></li>
                                <li><a href="../classes/MathFunction.Pi.html">MathFunction.Pi</a></li>
                                <li><a href="../classes/MathFunction.Product.html">MathFunction.Product</a></li>
                                <li><a href="../classes/MathFunction.Quotient.html">MathFunction.Quotient</a></li>
                                <li><a href="../classes/MathFunction.RealPart.html">MathFunction.RealPart</a></li>
                                <li><a href="../classes/MathFunction.Rotate.html">MathFunction.Rotate</a></li>
                                <li><a href="../classes/MathFunction.Sine.html">MathFunction.Sine</a></li>
                                <li><a href="../classes/MathFunction.SquareRoot.html">MathFunction.SquareRoot</a></li>
                                <li><a href="../classes/MathFunction.Sum.html">MathFunction.Sum</a></li>
                                <li><a href="../classes/MathFunction.Tangent.html">MathFunction.Tangent</a></li>
                                <li><a href="../classes/MathFunction.Value.html">MathFunction.Value</a></li>
                                <li><a href="../classes/MathFunction.Variable.html">MathFunction.Variable</a></li>
                                <li><a href="../classes/MatrixBackground.html">MatrixBackground</a></li>
                                <li><a href="../classes/MatrixCredits.html">MatrixCredits</a></li>
                                <li><a href="../classes/MRUCache.html">MRUCache</a></li>
                                <li><a href="../classes/MultiObject.html">MultiObject</a></li>
                                <li><a href="../classes/NodeList~extras2.html">NodeList~extras2</a></li>
                                <li><a href="../classes/Node~dimensions.html">Node~dimensions</a></li>
                                <li><a href="../classes/Node~event-set.html">Node~event-set</a></li>
                                <li><a href="../classes/Node~optimizations.html">Node~optimizations</a></li>
                                <li><a href="../classes/Node~scrollIntoView.html">Node~scrollIntoView</a></li>
                                <li><a href="../classes/Node~utils.html">Node~utils</a></li>
                                <li><a href="../classes/Object~extras.html">Object~extras</a></li>
                                <li><a href="../classes/PageLayout.html">PageLayout</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageInput.html">Paginator.ui.CurrentPageInput</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageReport.html">Paginator.ui.CurrentPageReport</a></li>
                                <li><a href="../classes/Paginator.ui.FirstPageLink.html">Paginator.ui.FirstPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.ItemRangeDropdown.html">Paginator.ui.ItemRangeDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.LastPageLink.html">Paginator.ui.LastPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.NextPageLink.html">Paginator.ui.NextPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.PageLinks.html">Paginator.ui.PageLinks</a></li>
                                <li><a href="../classes/Paginator.ui.PreviousPageLink.html">Paginator.ui.PreviousPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.RowsPerPageDropdown.html">Paginator.ui.RowsPerPageDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.ValidationPageLinks.html">Paginator.ui.ValidationPageLinks</a></li>
                                <li><a href="../classes/Parsers.html">Parsers</a></li>
                                <li><a href="../classes/Plugin.BusyOverlay.html">Plugin.BusyOverlay</a></li>
                                <li><a href="../classes/Plugin.ConsoleTest.html">Plugin.ConsoleTest</a></li>
                                <li><a href="../classes/Plugin.DataTableDataSourceBusy.html">Plugin.DataTableDataSourceBusy</a></li>
                                <li><a href="../classes/Plugin.DataTablePaginator.html">Plugin.DataTablePaginator</a></li>
                                <li><a href="../classes/Plugin.DataTableQuickEdit.html">Plugin.DataTableQuickEdit</a></li>
                                <li><a href="../classes/Plugin.DataTableRowExpansion.html">Plugin.DataTableRowExpansion</a></li>
                                <li><a href="../classes/Plugin.DataTableState.html">Plugin.DataTableState</a></li>
                                <li><a href="../classes/Plugin.FixedSizeAccordion.html">Plugin.FixedSizeAccordion</a></li>
                                <li><a href="../classes/Plugin.InputCalendarSync.html">Plugin.InputCalendarSync</a></li>
                                <li><a href="../classes/Plugin.Neon.html">Plugin.Neon</a></li>
                                <li><a href="../classes/Plugin.NodeFXSequence.html">Plugin.NodeFXSequence</a></li>
                                <li><a href="../classes/Plugin.OverlayForm.html">Plugin.OverlayForm</a></li>
                                <li><a href="../classes/Plugin.PageLayoutAnyWidgetModule.html">Plugin.PageLayoutAnyWidgetModule</a></li>
                                <li><a href="../classes/Plugin.PageLayoutDataTableModule.html">Plugin.PageLayoutDataTableModule</a></li>
                                <li><a href="../classes/Popup.html">Popup</a></li>
                                <li><a href="../classes/QueryBuilder.html">QueryBuilder</a></li>
                                <li><a href="../classes/QueryBuilder.DateRange.html">QueryBuilder.DateRange</a></li>
                                <li><a href="../classes/QueryBuilder.MultiselectInput.html">QueryBuilder.MultiselectInput</a></li>
                                <li><a href="../classes/QueryBuilder.Select.html">QueryBuilder.Select</a></li>
                                <li><a href="../classes/QueryBuilder.String.html">QueryBuilder.String</a></li>
                                <li><a href="../classes/RPC.Mojito.html">RPC.Mojito</a></li>
                                <li><a href="../classes/SelectAllCheckboxGroup.html">SelectAllCheckboxGroup</a></li>
                                <li><a href="../classes/Sort.html">Sort</a></li>
                                <li><a href="../classes/Treeble.html">Treeble</a></li>
                                <li><a href="../classes/YUI~funcprog.html">YUI~funcprog</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/gallery-accordion-horiz-vert.html">gallery-accordion-horiz-vert</a></li>
                                <li><a href="../modules/gallery-adobe-air-config.html">gallery-adobe-air-config</a></li>
                                <li><a href="../modules/gallery-adobe-air-page-manager.html">gallery-adobe-air-page-manager</a></li>
                                <li><a href="../modules/gallery-adobe-air-prefs.html">gallery-adobe-air-prefs</a></li>
                                <li><a href="../modules/gallery-algorithms.html">gallery-algorithms</a></li>
                                <li><a href="../modules/gallery-anim-class.html">gallery-anim-class</a></li>
                                <li><a href="../modules/gallery-anim-sequence.html">gallery-anim-sequence</a></li>
                                <li><a href="../modules/gallery-bulkedit.html">gallery-bulkedit</a></li>
                                <li><a href="../modules/gallery-busyoverlay.html">gallery-busyoverlay</a></li>
                                <li><a href="../modules/gallery-canvas.html">gallery-canvas</a></li>
                                <li><a href="../modules/gallery-checkboxgroups.html">gallery-checkboxgroups</a></li>
                                <li><a href="../modules/gallery-chipper.html">gallery-chipper</a></li>
                                <li><a href="../modules/gallery-collapse-toggle.html">gallery-collapse-toggle</a></li>
                                <li><a href="../modules/gallery-complexnumber.html">gallery-complexnumber</a></li>
                                <li><a href="../modules/gallery-console-test.html">gallery-console-test</a></li>
                                <li><a href="../modules/gallery-datasource-async-function.html">gallery-datasource-async-function</a></li>
                                <li><a href="../modules/gallery-datatable-datasource-busy.html">gallery-datatable-datasource-busy</a></li>
                                <li><a href="../modules/gallery-datatable-paginator.html">gallery-datatable-paginator</a></li>
                                <li><a href="../modules/gallery-datatable-row-expansion.html">gallery-datatable-row-expansion</a></li>
                                <li><a href="../modules/gallery-datatable-state.html">gallery-datatable-state</a></li>
                                <li><a href="../modules/gallery-datetime.html">gallery-datetime</a></li>
                                <li><a href="../modules/gallery-datetime-range.html">gallery-datetime-range</a></li>
                                <li><a href="../modules/gallery-datetime-utils.html">gallery-datetime-utils</a></li>
                                <li><a href="../modules/gallery-dimensions.html">gallery-dimensions</a></li>
                                <li><a href="../modules/gallery-expiration-cache.html">gallery-expiration-cache</a></li>
                                <li><a href="../modules/gallery-exprbuilder.html">gallery-exprbuilder</a></li>
                                <li><a href="../modules/gallery-formmgr.html">gallery-formmgr</a></li>
                                <li><a href="../modules/gallery-formmgr-css-validation.html">gallery-formmgr-css-validation</a></li>
                                <li><a href="../modules/gallery-formmgr-overlay-plugin.html">gallery-formmgr-overlay-plugin</a></li>
                                <li><a href="../modules/gallery-funcprog.html">gallery-funcprog</a></li>
                                <li><a href="../modules/gallery-input-calendar-sync.html">gallery-input-calendar-sync</a></li>
                                <li><a href="../modules/gallery-instancemanager.html">gallery-instancemanager</a></li>
                                <li><a href="../modules/gallery-io-adobe-air.html">gallery-io-adobe-air</a></li>
                                <li><a href="../modules/gallery-io-multiresponse.html">gallery-io-multiresponse</a></li>
                                <li><a href="../modules/gallery-iterable-extras.html">gallery-iterable-extras</a></li>
                                <li><a href="../modules/gallery-layout.html">gallery-layout</a></li>
                                <li><a href="../modules/gallery-layout-anywidget.html">gallery-layout-anywidget</a></li>
                                <li><a href="../modules/gallery-layout-cols.html">gallery-layout-cols</a></li>
                                <li><a href="../modules/gallery-layout-datatable.html">gallery-layout-datatable</a></li>
                                <li><a href="../modules/gallery-layout-rows.html">gallery-layout-rows</a></li>
                                <li><a href="../modules/gallery-linkedlist.html">gallery-linkedlist</a></li>
                                <li><a href="../modules/gallery-log-filter.html">gallery-log-filter</a></li>
                                <li><a href="../modules/gallery-math.html">gallery-math</a></li>
                                <li><a href="../modules/gallery-mathcanvas.html">gallery-mathcanvas</a></li>
                                <li><a href="../modules/gallery-matrix-background.html">gallery-matrix-background</a></li>
                                <li><a href="../modules/gallery-matrix-credits.html">gallery-matrix-credits</a></li>
                                <li><a href="../modules/gallery-mojito-rpc.html">gallery-mojito-rpc</a></li>
                                <li><a href="../modules/gallery-mru-cache.html">gallery-mru-cache</a></li>
                                <li><a href="../modules/gallery-multiobject.html">gallery-multiobject</a></li>
                                <li><a href="../modules/gallery-neon.html">gallery-neon</a></li>
                                <li><a href="../modules/gallery-node-event-set.html">gallery-node-event-set</a></li>
                                <li><a href="../modules/gallery-node-optimizations.html">gallery-node-optimizations</a></li>
                                <li><a href="../modules/gallery-node-utils.html">gallery-node-utils</a></li>
                                <li><a href="../modules/gallery-nodelist-extras2.html">gallery-nodelist-extras2</a></li>
                                <li><a href="../modules/gallery-object-extras.html">gallery-object-extras</a></li>
                                <li><a href="../modules/gallery-paginator.html">gallery-paginator</a></li>
                                <li><a href="../modules/gallery-popup.html">gallery-popup</a></li>
                                <li><a href="../modules/gallery-querybuilder.html">gallery-querybuilder</a></li>
                                <li><a href="../modules/gallery-querybuilder-daterange.html">gallery-querybuilder-daterange</a></li>
                                <li><a href="../modules/gallery-querybuilder-multiselect-input.html">gallery-querybuilder-multiselect-input</a></li>
                                <li><a href="../modules/gallery-quickedit.html">gallery-quickedit</a></li>
                                <li><a href="../modules/gallery-scrollintoview.html">gallery-scrollintoview</a></li>
                                <li><a href="../modules/gallery-sort-extras.html">gallery-sort-extras</a></li>
                                <li><a href="../modules/gallery-table-utils.html">gallery-table-utils</a></li>
                                <li><a href="../modules/gallery-test-extras.html">gallery-test-extras</a></li>
                                <li><a href="../modules/gallery-treeble.html">gallery-treeble</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/gallery-querybuilder-daterange/js/daterange.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module gallery-querybuilder
 * @submodule gallery-querybuilder-daterange
 */

/**********************************************************************
 * Plugin for accepting date/time range.
 * 
 * The &#x60;value&#x60; argument passed to &#x60;QueryBuilder.appendNew()&#x60; must be an
 * array with two elements: &#x60;[ start_date, end_date ]&#x60;.
 * 
 * &#x60;var_config&#x60; accepts &#x60;show_time&#x60;, &#x60;start_config&#x60;, &#x60;end_config&#x60;.  The
 * configs must define objects: &#x60;Calendar&#x60;, &#x60;InputCalendarSync&#x60;,
 * &#x60;DateTime&#x60;, &#x60;date_InputPopup&#x60;, &#x60;time_InputPopup&#x60;.
 * 
 * &#x60;op_list&#x60; must be an array: &#x60;[ greater_than, less_than ]&#x60;.
 * 
 * @namespace QueryBuilder
 * @class DateRange
 */

Y.QueryBuilder.DateRange = function(
	/* object */	query_builder,
	/* object */	config)
{
	this.qb = query_builder;

	this.start_date_input_name_pattern = config.field_prefix + &#x27;start_date_{i}&#x27;;
	this.start_time_input_name_pattern = config.field_prefix + &#x27;start_time_{i}&#x27;;
	this.end_date_input_name_pattern   = config.field_prefix + &#x27;end_date_{i}&#x27;;
	this.end_time_input_name_pattern   = config.field_prefix + &#x27;end_time_{i}&#x27;;
};

Y.QueryBuilder.DateRange.prototype =
{
	create: function(
		/* int */		query_index,
		/* object */	var_config,
		/* array */		op_list,
		/* array */		value)
	{
		this.db_query_gt = op_list[0];
		this.db_query_lt = op_list[1];

		this.start_id  = Y.guid();
		this.end_id    = Y.guid();
		this.show_time = var_config.show_time;

		var result    = [],
			separator = &#x27;&amp;nbsp;&amp;mdash;&amp;nbsp;&#x27;;

		var start_date_cell = this.qb._createContainer();
		start_date_cell.set(&#x27;className&#x27;, this.qb.getClassName(&#x27;start-date&#x27;));
		start_date_cell.set(&#x27;innerHTML&#x27;,
			this._dateInput(this.start_id, this.dateName(&#x27;start&#x27;, query_index)) +
			(var_config.show_time ? &#x27;&#x27; : separator));
		this.start_date_input = start_date_cell.one(&#x27;input&#x27;);
		result.push(start_date_cell);

		if (this.show_time)
		{
			var start_time_cell = this.qb._createContainer();
			start_time_cell.set(&#x27;className&#x27;, this.qb.getClassName(&#x27;start-time&#x27;));
			start_time_cell.set(&#x27;innerHTML&#x27;,
				this._timeInput(this.start_id, this.timeName(&#x27;start&#x27;, query_index)) +
				separator);
			this.start_time_input = start_time_cell.one(&#x27;input&#x27;);
			result.push(start_time_cell);
		}

		var end_date_cell = this.qb._createContainer();
		end_date_cell.set(&#x27;className&#x27;, this.qb.getClassName(&#x27;end-date&#x27;));
		end_date_cell.set(&#x27;innerHTML&#x27;, this._dateInput(this.end_id, this.dateName(&#x27;end&#x27;, query_index)));
		this.end_date_input = end_date_cell.one(&#x27;input&#x27;);
		result.push(end_date_cell);

		if (this.show_time)
		{
			var end_time_cell = this.qb._createContainer();
			end_time_cell.set(&#x27;className&#x27;, this.qb.getClassName(&#x27;end-time&#x27;));
			end_time_cell.set(&#x27;innerHTML&#x27;, this._timeInput(this.end_id, this.timeName(&#x27;end&#x27;, query_index)));
			this.end_time_input = end_time_cell.one(&#x27;input&#x27;);
			result.push(end_time_cell);
		}

		return result;
	},

	postCreate: function(
		/* int */		query_index,
		/* object */	var_config,
		/* array */		op_list,
		/* array */		value)
	{
		value = value || [&#x27;&#x27;, &#x27;&#x27;];

		if (value[0])
		{
			Y.namespace.call(var_config, &#x27;start_config.DateTime&#x27;);
			var_config.start_config.DateTime.defaultDateTime = value[0];
		}
		this.start_widgets = this._attachDateTimeWidgets(this.start_id, var_config.start_config);
		if (value[0])
		{
			delete var_config.start_config.DateTime.defaultDateTime;
		}

		if (value[1])
		{
			Y.namespace.call(var_config, &#x27;end_config.DateTime&#x27;);
			var_config.end_config.DateTime.defaultDateTime = value[1];
		}
		this.end_widgets = this._attachDateTimeWidgets(this.end_id, var_config.end_config);
		if (value[1])
		{
			delete var_config.end_config.DateTime.defaultDateTime;
		}

		this.range = new Y.DateTimeRange(
		{
			startDateTime: this.start_widgets.datetime,
			endDateTime:   this.end_widgets.datetime
		});

		this.start_date_input.focus();

		this.start_date_input.on(&#x27;valueSet&#x27;, this.qb._notifyChanged, this.qb);
		this.end_date_input.on(&#x27;valueSet&#x27;, this.qb._notifyChanged, this.qb);

		if (this.show_time)
		{
			this.start_time_input.on(&#x27;valueSet&#x27;, this.qb._notifyChanged, this.qb);
			this.end_time_input.on(&#x27;valueSet&#x27;, this.qb._notifyChanged, this.qb);
		}
	},

	destroy: function()
	{
		this._destroyDateTimeWidgets(this.start_widgets, this.start_date_input);
		this._destroyDateTimeWidgets(this.end_widgets, this.end_date_input);

		this.start_date_input.remove(true);
		this.end_date_input.remove(true);
		if (this.show_time)
		{
			this.start_time_input.remove(true);
			this.end_time_input.remove(true);
		}

		this.start_date_input = null;
	},

	updateName: function(
		/* int */	new_index)
	{
		this.start_date_input.setAttribute(&#x27;name&#x27;, this.dateName(&#x27;start&#x27;, new_index));
		this.end_date_input.setAttribute(&#x27;name&#x27;, this.dateName(&#x27;end&#x27;, new_index));
		if (this.show_time)
		{
			this.start_time_input.setAttribute(&#x27;name&#x27;, this.timeName(&#x27;start&#x27;, new_index));
			this.end_time_input.setAttribute(&#x27;name&#x27;, this.timeName(&#x27;end&#x27;, new_index));
		}
	},

	toDatabaseQuery: function()
	{
		var start  = this.start_widgets.datetime.getDateTime(),
			end    = this.end_widgets.datetime.getDateTime(),
			result = [];

		if (start)
		{
			result.push([ this.db_query_gt, start ]);
		}

		if (end)
		{
			result.push([ this.db_query_lt, end ]);
		}

		return result;
	},

	_attachDateTimeWidgets: function(id, config)
	{
		config = config || {};

		var selector = &#x27;#&#x27; + id;

		// Calendar

		var c = config.Calendar || {};
		if (Y.Lang.isUndefined(c.width))
		{
			c.width = 300;
		}
		c.showPrevMonth = c.showNextMonth = true;

		var cal = new Y.Calendar(c);
		cal.render(selector + &#x27;-calendar&#x27;);

		// InputCalendarSync

		c          = config.InputCalendarSync || {};
		c.calendar = cal;

		Y.one(selector + &#x27;-date&#x27;).plug(Y.Plugin.InputCalendarSync, c);	// must be before Y.DateTime

		// Timepicker

		if (this.show_time)
		{
			var tp = new Y.Saw.Timepicker();
			tp.render(selector + &#x27;-timepicker&#x27;);

			tp.on(&#x27;cellclick&#x27;, function()
			{
				Y.later(100, null, function()
				{
					Y.one(selector + &#x27;-time&#x27;).set(&#x27;value&#x27;, tp.get(&#x27;time&#x27;).s24hour);
				});
			});
		}

		// DateTime

		c          = config.DateTime || {};
		c.dateInput = selector + &#x27;-date&#x27;;

		if (this.show_time)
		{
			c.timeInput = selector + &#x27;-time&#x27;;
		}

		var dt = new Y.DateTime(c);

		// date InputPopup

		c                = config.date_InputPopup || {};
		c.srcNode        = selector + &#x27;-popup-calendar&#x27;;
		c.visible        = false;
		c.inputField     = selector + &#x27;-date&#x27;,
		c.clickNodes     = Y.InputPopup.CalendarNodes,
		c.reparentToBody = true;

		if (Y.Lang.isUndefined(c.zIndex))
		{
			c.zIndex = 100;
		}

		var cal_popup = new Y.InputPopup(c);
		cal_popup.render();

		if (this.show_time)
		{
			c                = config.time_InputPopup || {};
			c.srcNode        = selector + &#x27;-popup-timepicker&#x27;;
			c.visible        = false;
			c.inputField     = selector + &#x27;-time&#x27;,
			c.clickNodes     = Y.InputPopup.SawTimepickerNodes,
			c.reparentToBody = true;

			if (Y.Lang.isUndefined(c.zIndex))
			{
				c.zIndex = 100;
			}

			var tp_popup = new Y.InputPopup(c);
			tp_popup.render();
		}

		var result =
		{
			calendar:         cal,
			timepicker:       tp,
			datetime:         dt,
			calendar_popup:   cal_popup,
			timepicker_popup: tp_popup
		};
		return result;
	},

	_destroyDateTimeWidgets: function(obj, input)
	{
		input.unplug(Y.Plugin.InputCalendarSync);

		obj.calendar.destroy();
		obj.datetime.destroy();
		obj.calendar_popup.destroy();

		if (this.show_time)
		{
			obj.timepicker.destroy();
			obj.timepicker_popup.destroy();
		}
	},

	/* *********************************************************************
	 * Form element names.
	 */

	dateName: function(
		/* string */	type,
		/* int */		i)
	{
		return Y.Lang.sub(this[ type + &#x27;_date_input_name_pattern&#x27; ], {i:i});
	},

	timeName: function(
		/* string */	type,
		/* int */		i)
	{
		return Y.Lang.sub(this[ type + &#x27;_time_input_name_pattern&#x27; ], {i:i});
	},

	//
	// Markup
	//

	_dateInput: function(
		/* string */ id,
		/* string */ input_name)
	{
		// This must use an input tag!

		var markup =
			&#x27;&lt;input type=&quot;text&quot; name=&quot;{n}&quot; id=&quot;{id}-date&quot; class=&quot;{f} {c} date&quot;/&gt;&#x27; +
			&#x27;&lt;div id=&quot;{id}-popup-calendar&quot; class=&quot;yui3-inputpopup-loading&quot;&gt;&#x27; +
				&#x27;&lt;div id=&quot;{id}-calendar&quot;&gt;&lt;/div&gt;&#x27; +
			&#x27;&lt;/div&gt;&#x27;;

		return Y.Lang.sub(markup,
		{
			id: id,
			n:  input_name,
			f:  Y.FormManager.field_marker_class,
			c:  this.qb.getClassName(&#x27;field&#x27;)
		});
	},

	_timeInput: function(
		/* string */ id,
		/* string */ input_name)
	{
		// This must use an input tag!

		var markup =
			&#x27;&lt;input type=&quot;text&quot; name=&quot;{n}&quot; id=&quot;{id}-time&quot; class=&quot;{f} {c} time&quot;/&gt;&#x27; +
			&#x27;&lt;div id=&quot;{id}-popup-timepicker&quot; class=&quot;popup-timepicker yui3-inputpopup-loading&quot;&gt;&#x27; +
				&#x27;&lt;div id=&quot;{id}-timepicker&quot;&gt;&lt;/div&gt;&#x27; +
			&#x27;&lt;/div&gt;&#x27;;

		return Y.Lang.sub(markup,
		{
			id: id,
			n:  input_name,
			f:  Y.FormManager.field_marker_class,
			c:  this.qb.getClassName(&#x27;field&#x27;)
		});
	}
};

Y.QueryBuilder.plugin_mapping[ &#x27;daterange&#x27; ] = Y.QueryBuilder.DateRange;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
