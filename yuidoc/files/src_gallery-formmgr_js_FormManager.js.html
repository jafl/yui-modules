<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/gallery-formmgr/js/FormManager.js - YUI 3 Gallery Modules</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="YUI 3 Gallery Modules" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Accordion.html">Accordion</a></li>
                                <li><a href="../classes/AnimSequence.html">AnimSequence</a></li>
                                <li><a href="../classes/ArrayIterator.html">ArrayIterator</a></li>
                                <li><a href="../classes/ArrayList~extras.html">ArrayList~extras</a></li>
                                <li><a href="../classes/Array~algorithms.html">Array~algorithms</a></li>
                                <li><a href="../classes/Array~funcprog-extras.html">Array~funcprog-extras</a></li>
                                <li><a href="../classes/Array~object-extras.html">Array~object-extras</a></li>
                                <li><a href="../classes/Assert.html">Assert</a></li>
                                <li><a href="../classes/AtLeastOneCheckboxGroup.html">AtLeastOneCheckboxGroup</a></li>
                                <li><a href="../classes/AtMostOneCheckboxGroup.html">AtMostOneCheckboxGroup</a></li>
                                <li><a href="../classes/BulkEditor.html">BulkEditor</a></li>
                                <li><a href="../classes/Canvas.Context2d.html">Canvas.Context2d</a></li>
                                <li><a href="../classes/CheckboxGroup.html">CheckboxGroup</a></li>
                                <li><a href="../classes/Chipper.html">Chipper</a></li>
                                <li><a href="../classes/CollapseToggle.html">CollapseToggle</a></li>
                                <li><a href="../classes/ComplexMath.html">ComplexMath</a></li>
                                <li><a href="../classes/ComplexNumber.html">ComplexNumber</a></li>
                                <li><a href="../classes/DataSource.AsyncFunction.html">DataSource.AsyncFunction</a></li>
                                <li><a href="../classes/DataSource.BulkEdit.html">DataSource.BulkEdit</a></li>
                                <li><a href="../classes/DataSource.Treeble.html">DataSource.Treeble</a></li>
                                <li><a href="../classes/DateTime.html">DateTime</a></li>
                                <li><a href="../classes/DateTimeRange.html">DateTimeRange</a></li>
                                <li><a href="../classes/DateTimeUtils.html">DateTimeUtils</a></li>
                                <li><a href="../classes/EnableIfAnyCheckboxGroup.html">EnableIfAnyCheckboxGroup</a></li>
                                <li><a href="../classes/ExpirationCache.html">ExpirationCache</a></li>
                                <li><a href="../classes/ExpressionBuilder.html">ExpressionBuilder</a></li>
                                <li><a href="../classes/FormManager.html">FormManager</a></li>
                                <li><a href="../classes/HTMLTableBulkEditor.html">HTMLTableBulkEditor</a></li>
                                <li><a href="../classes/InputPopup.html">InputPopup</a></li>
                                <li><a href="../classes/InstanceManager.html">InstanceManager</a></li>
                                <li><a href="../classes/io~multiresponse.html">io~multiresponse</a></li>
                                <li><a href="../classes/Iterable.html">Iterable</a></li>
                                <li><a href="../classes/LinkedList.html">LinkedList</a></li>
                                <li><a href="../classes/LinkedListItem.html">LinkedListItem</a></li>
                                <li><a href="../classes/LinkedListIterator.html">LinkedListIterator</a></li>
                                <li><a href="../classes/LogFilter.html">LogFilter</a></li>
                                <li><a href="../classes/Math.html">Math</a></li>
                                <li><a href="../classes/MathCanvas.html">MathCanvas</a></li>
                                <li><a href="../classes/MathCanvas.Parser.html">MathCanvas.Parser</a></li>
                                <li><a href="../classes/MathCanvas.RectList.html">MathCanvas.RectList</a></li>
                                <li><a href="../classes/MathFunction.html">MathFunction</a></li>
                                <li><a href="../classes/MathFunction.Arccosine.html">MathFunction.Arccosine</a></li>
                                <li><a href="../classes/MathFunction.Arcsine.html">MathFunction.Arcsine</a></li>
                                <li><a href="../classes/MathFunction.Arctangent.html">MathFunction.Arctangent</a></li>
                                <li><a href="../classes/MathFunction.Arctangent2.html">MathFunction.Arctangent2</a></li>
                                <li><a href="../classes/MathFunction.Conjugate.html">MathFunction.Conjugate</a></li>
                                <li><a href="../classes/MathFunction.Cosine.html">MathFunction.Cosine</a></li>
                                <li><a href="../classes/MathFunction.E.html">MathFunction.E</a></li>
                                <li><a href="../classes/MathFunction.Exponential.html">MathFunction.Exponential</a></li>
                                <li><a href="../classes/MathFunction.FunctionWithArgs.html">MathFunction.FunctionWithArgs</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicCosine.html">MathFunction.HyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicSine.html">MathFunction.HyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicTangent.html">MathFunction.HyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.I.html">MathFunction.I</a></li>
                                <li><a href="../classes/MathFunction.ImaginaryPart.html">MathFunction.ImaginaryPart</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicCosine.html">MathFunction.InverseHyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicSine.html">MathFunction.InverseHyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicTangent.html">MathFunction.InverseHyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.Logarithm.html">MathFunction.Logarithm</a></li>
                                <li><a href="../classes/MathFunction.Magnitude.html">MathFunction.Magnitude</a></li>
                                <li><a href="../classes/MathFunction.Max.html">MathFunction.Max</a></li>
                                <li><a href="../classes/MathFunction.Min.html">MathFunction.Min</a></li>
                                <li><a href="../classes/MathFunction.NaturalLog.html">MathFunction.NaturalLog</a></li>
                                <li><a href="../classes/MathFunction.Negate.html">MathFunction.Negate</a></li>
                                <li><a href="../classes/MathFunction.Phase.html">MathFunction.Phase</a></li>
                                <li><a href="../classes/MathFunction.Pi.html">MathFunction.Pi</a></li>
                                <li><a href="../classes/MathFunction.Product.html">MathFunction.Product</a></li>
                                <li><a href="../classes/MathFunction.Quotient.html">MathFunction.Quotient</a></li>
                                <li><a href="../classes/MathFunction.RealPart.html">MathFunction.RealPart</a></li>
                                <li><a href="../classes/MathFunction.Rotate.html">MathFunction.Rotate</a></li>
                                <li><a href="../classes/MathFunction.Sine.html">MathFunction.Sine</a></li>
                                <li><a href="../classes/MathFunction.SquareRoot.html">MathFunction.SquareRoot</a></li>
                                <li><a href="../classes/MathFunction.Sum.html">MathFunction.Sum</a></li>
                                <li><a href="../classes/MathFunction.Tangent.html">MathFunction.Tangent</a></li>
                                <li><a href="../classes/MathFunction.Value.html">MathFunction.Value</a></li>
                                <li><a href="../classes/MathFunction.Variable.html">MathFunction.Variable</a></li>
                                <li><a href="../classes/MatrixBackground.html">MatrixBackground</a></li>
                                <li><a href="../classes/MatrixCredits.html">MatrixCredits</a></li>
                                <li><a href="../classes/MRUCache.html">MRUCache</a></li>
                                <li><a href="../classes/MultiObject.html">MultiObject</a></li>
                                <li><a href="../classes/NodeList~extras2.html">NodeList~extras2</a></li>
                                <li><a href="../classes/Node~dimensions.html">Node~dimensions</a></li>
                                <li><a href="../classes/Node~event-set.html">Node~event-set</a></li>
                                <li><a href="../classes/Node~optimizations.html">Node~optimizations</a></li>
                                <li><a href="../classes/Node~scrollIntoView.html">Node~scrollIntoView</a></li>
                                <li><a href="../classes/Node~utils.html">Node~utils</a></li>
                                <li><a href="../classes/Object~extras.html">Object~extras</a></li>
                                <li><a href="../classes/PageLayout.html">PageLayout</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageInput.html">Paginator.ui.CurrentPageInput</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageReport.html">Paginator.ui.CurrentPageReport</a></li>
                                <li><a href="../classes/Paginator.ui.FirstPageLink.html">Paginator.ui.FirstPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.ItemRangeDropdown.html">Paginator.ui.ItemRangeDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.LastPageLink.html">Paginator.ui.LastPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.NextPageLink.html">Paginator.ui.NextPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.PageLinks.html">Paginator.ui.PageLinks</a></li>
                                <li><a href="../classes/Paginator.ui.PreviousPageLink.html">Paginator.ui.PreviousPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.RowsPerPageDropdown.html">Paginator.ui.RowsPerPageDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.ValidationPageLinks.html">Paginator.ui.ValidationPageLinks</a></li>
                                <li><a href="../classes/Parsers.html">Parsers</a></li>
                                <li><a href="../classes/Plugin.BusyOverlay.html">Plugin.BusyOverlay</a></li>
                                <li><a href="../classes/Plugin.ConsoleTest.html">Plugin.ConsoleTest</a></li>
                                <li><a href="../classes/Plugin.DataTableDataSourceBusy.html">Plugin.DataTableDataSourceBusy</a></li>
                                <li><a href="../classes/Plugin.DataTablePaginator.html">Plugin.DataTablePaginator</a></li>
                                <li><a href="../classes/Plugin.DataTableQuickEdit.html">Plugin.DataTableQuickEdit</a></li>
                                <li><a href="../classes/Plugin.DataTableRowExpansion.html">Plugin.DataTableRowExpansion</a></li>
                                <li><a href="../classes/Plugin.DataTableState.html">Plugin.DataTableState</a></li>
                                <li><a href="../classes/Plugin.FixedSizeAccordion.html">Plugin.FixedSizeAccordion</a></li>
                                <li><a href="../classes/Plugin.InputCalendarSync.html">Plugin.InputCalendarSync</a></li>
                                <li><a href="../classes/Plugin.Neon.html">Plugin.Neon</a></li>
                                <li><a href="../classes/Plugin.NodeFXSequence.html">Plugin.NodeFXSequence</a></li>
                                <li><a href="../classes/Plugin.OverlayForm.html">Plugin.OverlayForm</a></li>
                                <li><a href="../classes/Plugin.PageLayoutAnyWidgetModule.html">Plugin.PageLayoutAnyWidgetModule</a></li>
                                <li><a href="../classes/Plugin.PageLayoutDataTableModule.html">Plugin.PageLayoutDataTableModule</a></li>
                                <li><a href="../classes/Popup.html">Popup</a></li>
                                <li><a href="../classes/QueryBuilder.html">QueryBuilder</a></li>
                                <li><a href="../classes/QueryBuilder.DateRange.html">QueryBuilder.DateRange</a></li>
                                <li><a href="../classes/QueryBuilder.MultiselectInput.html">QueryBuilder.MultiselectInput</a></li>
                                <li><a href="../classes/QueryBuilder.Select.html">QueryBuilder.Select</a></li>
                                <li><a href="../classes/QueryBuilder.String.html">QueryBuilder.String</a></li>
                                <li><a href="../classes/RPC.Mojito.html">RPC.Mojito</a></li>
                                <li><a href="../classes/SelectAllCheckboxGroup.html">SelectAllCheckboxGroup</a></li>
                                <li><a href="../classes/Sort.html">Sort</a></li>
                                <li><a href="../classes/Treeble.html">Treeble</a></li>
                                <li><a href="../classes/YUI~funcprog.html">YUI~funcprog</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/gallery-accordion-horiz-vert.html">gallery-accordion-horiz-vert</a></li>
                                <li><a href="../modules/gallery-adobe-air-config.html">gallery-adobe-air-config</a></li>
                                <li><a href="../modules/gallery-adobe-air-page-manager.html">gallery-adobe-air-page-manager</a></li>
                                <li><a href="../modules/gallery-adobe-air-prefs.html">gallery-adobe-air-prefs</a></li>
                                <li><a href="../modules/gallery-algorithms.html">gallery-algorithms</a></li>
                                <li><a href="../modules/gallery-anim-class.html">gallery-anim-class</a></li>
                                <li><a href="../modules/gallery-anim-sequence.html">gallery-anim-sequence</a></li>
                                <li><a href="../modules/gallery-bulkedit.html">gallery-bulkedit</a></li>
                                <li><a href="../modules/gallery-busyoverlay.html">gallery-busyoverlay</a></li>
                                <li><a href="../modules/gallery-canvas.html">gallery-canvas</a></li>
                                <li><a href="../modules/gallery-checkboxgroups.html">gallery-checkboxgroups</a></li>
                                <li><a href="../modules/gallery-chipper.html">gallery-chipper</a></li>
                                <li><a href="../modules/gallery-collapse-toggle.html">gallery-collapse-toggle</a></li>
                                <li><a href="../modules/gallery-complexnumber.html">gallery-complexnumber</a></li>
                                <li><a href="../modules/gallery-console-test.html">gallery-console-test</a></li>
                                <li><a href="../modules/gallery-datasource-async-function.html">gallery-datasource-async-function</a></li>
                                <li><a href="../modules/gallery-datatable-datasource-busy.html">gallery-datatable-datasource-busy</a></li>
                                <li><a href="../modules/gallery-datatable-paginator.html">gallery-datatable-paginator</a></li>
                                <li><a href="../modules/gallery-datatable-row-expansion.html">gallery-datatable-row-expansion</a></li>
                                <li><a href="../modules/gallery-datatable-state.html">gallery-datatable-state</a></li>
                                <li><a href="../modules/gallery-datetime.html">gallery-datetime</a></li>
                                <li><a href="../modules/gallery-datetime-range.html">gallery-datetime-range</a></li>
                                <li><a href="../modules/gallery-datetime-utils.html">gallery-datetime-utils</a></li>
                                <li><a href="../modules/gallery-dimensions.html">gallery-dimensions</a></li>
                                <li><a href="../modules/gallery-expiration-cache.html">gallery-expiration-cache</a></li>
                                <li><a href="../modules/gallery-exprbuilder.html">gallery-exprbuilder</a></li>
                                <li><a href="../modules/gallery-formmgr.html">gallery-formmgr</a></li>
                                <li><a href="../modules/gallery-formmgr-css-validation.html">gallery-formmgr-css-validation</a></li>
                                <li><a href="../modules/gallery-formmgr-overlay-plugin.html">gallery-formmgr-overlay-plugin</a></li>
                                <li><a href="../modules/gallery-funcprog.html">gallery-funcprog</a></li>
                                <li><a href="../modules/gallery-input-calendar-sync.html">gallery-input-calendar-sync</a></li>
                                <li><a href="../modules/gallery-instancemanager.html">gallery-instancemanager</a></li>
                                <li><a href="../modules/gallery-io-adobe-air.html">gallery-io-adobe-air</a></li>
                                <li><a href="../modules/gallery-io-multiresponse.html">gallery-io-multiresponse</a></li>
                                <li><a href="../modules/gallery-iterable-extras.html">gallery-iterable-extras</a></li>
                                <li><a href="../modules/gallery-layout.html">gallery-layout</a></li>
                                <li><a href="../modules/gallery-layout-anywidget.html">gallery-layout-anywidget</a></li>
                                <li><a href="../modules/gallery-layout-cols.html">gallery-layout-cols</a></li>
                                <li><a href="../modules/gallery-layout-datatable.html">gallery-layout-datatable</a></li>
                                <li><a href="../modules/gallery-layout-rows.html">gallery-layout-rows</a></li>
                                <li><a href="../modules/gallery-linkedlist.html">gallery-linkedlist</a></li>
                                <li><a href="../modules/gallery-log-filter.html">gallery-log-filter</a></li>
                                <li><a href="../modules/gallery-math.html">gallery-math</a></li>
                                <li><a href="../modules/gallery-mathcanvas.html">gallery-mathcanvas</a></li>
                                <li><a href="../modules/gallery-matrix-background.html">gallery-matrix-background</a></li>
                                <li><a href="../modules/gallery-matrix-credits.html">gallery-matrix-credits</a></li>
                                <li><a href="../modules/gallery-mojito-rpc.html">gallery-mojito-rpc</a></li>
                                <li><a href="../modules/gallery-mru-cache.html">gallery-mru-cache</a></li>
                                <li><a href="../modules/gallery-multiobject.html">gallery-multiobject</a></li>
                                <li><a href="../modules/gallery-neon.html">gallery-neon</a></li>
                                <li><a href="../modules/gallery-node-event-set.html">gallery-node-event-set</a></li>
                                <li><a href="../modules/gallery-node-optimizations.html">gallery-node-optimizations</a></li>
                                <li><a href="../modules/gallery-node-utils.html">gallery-node-utils</a></li>
                                <li><a href="../modules/gallery-nodelist-extras2.html">gallery-nodelist-extras2</a></li>
                                <li><a href="../modules/gallery-object-extras.html">gallery-object-extras</a></li>
                                <li><a href="../modules/gallery-paginator.html">gallery-paginator</a></li>
                                <li><a href="../modules/gallery-popup.html">gallery-popup</a></li>
                                <li><a href="../modules/gallery-querybuilder.html">gallery-querybuilder</a></li>
                                <li><a href="../modules/gallery-querybuilder-daterange.html">gallery-querybuilder-daterange</a></li>
                                <li><a href="../modules/gallery-querybuilder-multiselect-input.html">gallery-querybuilder-multiselect-input</a></li>
                                <li><a href="../modules/gallery-quickedit.html">gallery-quickedit</a></li>
                                <li><a href="../modules/gallery-scrollintoview.html">gallery-scrollintoview</a></li>
                                <li><a href="../modules/gallery-sort-extras.html">gallery-sort-extras</a></li>
                                <li><a href="../modules/gallery-table-utils.html">gallery-table-utils</a></li>
                                <li><a href="../modules/gallery-test-extras.html">gallery-test-extras</a></li>
                                <li><a href="../modules/gallery-treeble.html">gallery-treeble</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/gallery-formmgr/js/FormManager.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&quot;use strict&quot;;

/**********************************************************************
 * &lt;p&gt;FormManager provides support for initializing a form, pre-validating
 * user input, and displaying messages returned by the server.&lt;/p&gt;
 * 
 * &lt;p&gt;Also see the documentation for gallery-formmgr-css-validation.&lt;/p&gt;
 * 
 * @module gallery-formmgr
 * @main gallery-formmgr
 */

/**
 * &lt;p&gt;&lt;strong&gt;Required Markup Structure&lt;/strong&gt;&lt;/p&gt;
 *
 * &lt;p&gt;Each element (or tighly coupled set of elements) must be contained by
 * an element that has the CSS class &lt;code&gt;formmgr-row&lt;/code&gt;.  Within each
 * row, validation messages are displayed inside the container with CSS
 * class &lt;code&gt;formmgr-message-text&lt;/code&gt;.
 *
 * &lt;p&gt;When a message is displayed inside a row, the CSS class
 * &lt;code&gt;formmgr-has{type}&lt;/code&gt; is placed on the row container and the
 * containing fieldset (if any), where &lt;code&gt;{type}&lt;/code&gt; is the message
 * type passed to &lt;code&gt;displayMessage()&lt;/code&gt;.&lt;/p&gt;
 *
 * &lt;p&gt;&lt;strong&gt;Initializing the Form&lt;/strong&gt;&lt;/p&gt;
 *
 * &lt;p&gt;Default values can be either encoded in the markup or passed to the
 * FormManager constructor via &lt;code&gt;config.default_value_map&lt;/code&gt;.  (The
 * former method is obviously better for progressive enhancement.)  The
 * values passed to the constructor override the values encoded in the
 * markup.&lt;/p&gt;
 *
 * &lt;p&gt;&lt;code&gt;prepareForm()&lt;/code&gt; must be called before the form is
 * displayed.  To initialize focus to the first element in a form, call
 * &lt;code&gt;initFocus()&lt;/code&gt;.  If the form is in an overlay, you can delay
 * these calls until just before showing the overlay.&lt;/p&gt;
 *
 * &lt;p&gt;The default values passed to the constructor are inserted by
 * &lt;code&gt;populateForm()&lt;/code&gt;.  (This is automatically called by
 * &lt;code&gt;prepareForm()&lt;/code&gt;.)&lt;/p&gt;
 * 
 * &lt;p&gt;Hidden fields are ignored.  If you want &#x60;FormManager&#x60; to process a
 * value that is invisible to the user, use a normal input with
 * &#x60;display:none;&#x60;.&lt;/p&gt;
 *
 * &lt;p&gt;&lt;strong&gt;Displaying Messages&lt;/strong&gt;&lt;/p&gt;
 *
 * &lt;p&gt;To display a message for a single form row, call
 * &lt;code&gt;displayMessage()&lt;/code&gt;.  To display a message for the form in
 * general, call &lt;code&gt;displayFormMessage()&lt;/code&gt;.  These functions can be
 * used for initializing the error display when the page loads, for
 * displaying the results of pre-validation, and for displaying the results
 * of submitting a form via XHR.&lt;/p&gt;
 *
 * &lt;p&gt;&lt;strong&gt;Specifying Validations&lt;/strong&gt;&lt;/p&gt;
 *
 * &lt;p&gt;The following classes can be applied to a form element for
 * pre-validation:&lt;/p&gt;
 *
 * &lt;dl&gt;
 * &lt;dt&gt;&lt;code&gt;yiv-required&lt;/code&gt;&lt;/dt&gt;
 * &lt;dd&gt;Value must not be empty.&lt;/dd&gt;
 *
 * &lt;dt&gt;&lt;code&gt;yiv-length:[x,y]&lt;/code&gt;&lt;/dt&gt;
 * &lt;dd&gt;String must be at least x characters and at most y characters.
 * At least one of x and y must be specified.&lt;/dd&gt;
 *
 * &lt;dt&gt;&lt;code&gt;yiv-integer:[x,y]&lt;/code&gt;&lt;/dt&gt;
 * &lt;dd&gt;The integer value must be at least x and at most y.
 * x and y are both optional.&lt;/dd&gt;
 *
 * &lt;dt&gt;&lt;code&gt;yiv-decimal:[x,y]&lt;/code&gt;&lt;/dt&gt;
 * &lt;dd&gt;The decimal value must be at least x and at most y.  Exponents are
 * not allowed.  x and y are both optional.&lt;/dd&gt;
 * &lt;/dl&gt;
 *
 * &lt;p&gt;If we ever need to allow exponents, we can use yiv-float.&lt;/p&gt;
 *
 * &lt;p&gt;The following functions allow additional pre-validation to be
 * attached to individual form elements:&lt;/p&gt;
 *
 * &lt;dl&gt;
 * &lt;dt&gt;&lt;code&gt;setRegex()&lt;/code&gt;&lt;/dt&gt;
 * &lt;dd&gt;Sets the regular expression that must match in order for the value
 * to be acceptable.&lt;/dd&gt;
 *
 * &lt;dt&gt;&lt;code&gt;setFunction()&lt;/code&gt;&lt;/dt&gt;
 * &lt;dd&gt;Sets the function that must return true in order for the value to
 * be acceptable.  The function is called in the scope of the Form
 * object with the arguments:  the form and the element.&lt;/dd&gt;
 * &lt;/dl&gt;
 *
 * &lt;p&gt;&lt;code&gt;setErrorMessages()&lt;/code&gt; specifies the error message to be
 * displayed when a pre-validation check fails.&lt;/p&gt;
 *
 * &lt;p&gt;Functions are expected to call &lt;code&gt;displayMessage()&lt;/code&gt;
 * directly.&lt;/p&gt;
 *
 * &lt;p&gt;More complex pre-validations can be added by overriding
 * &lt;code&gt;postValidateForm()&lt;/code&gt;, described below.&lt;/p&gt;
 *
 * &lt;p&gt;Validation normally strips leading and trailing whitespace from every
 * value.  If you have a special case where this should not be done, add
 * the CSS class &lt;code&gt;yiv-no-trim&lt;/code&gt; to the input field.&lt;/p&gt;
 *
 * &lt;p&gt;Derived classes may also override the following functions:&lt;/p&gt;
 *
 * &lt;dl&gt;
 * &lt;dt&gt;&lt;code&gt;prePrepareForm&lt;/code&gt;(arguments passed to prepareForm)&lt;/dt&gt;
 * &lt;dd&gt;Called before filling in default values for the form elements.
 * Return false to cancel dialog.&lt;/dd&gt;
 *
 * &lt;dt&gt;&lt;code&gt;postPrepareForm&lt;/code&gt;(arguments passed to prepareForm)&lt;/dt&gt;
 * &lt;dd&gt;Called after filling in default values for the form elements.&lt;/dd&gt;
 *
 * &lt;dt&gt;&lt;code&gt;postValidateForm&lt;/code&gt;(form)&lt;/dt&gt;
 * &lt;dd&gt;Called after performing the basic pre-validations.  Returns
 * true if the form contents are acceptable.  Reports error if there
 * is a problem.&lt;/dd&gt;
 * &lt;/dl&gt;
 *
 * @class FormManager
 * @constructor
 * @param form_name {String} The name attribute of the HTML form.
 * @param config {Object} Configuration.
 *		&lt;code&gt;status_node&lt;/code&gt; is an optional element in which to display
 *		overall status.  &lt;code&gt;default_value_map&lt;/code&gt; is an optional
 *		mapping of form element names to default values.  Default values
 *		encoded in the markup will be merged into this map, but values
 *		passed to the constructor will take precedence.
 */

function FormManager(
	/* string */	form_name,
	/* object */	config)		// {status_node, default_value_map}
{
	config = config || {};
	FormManager.superclass.constructor.call(this, config);

	this.form_name   = form_name;
	this.status_node = Y.one(config.status_node);
	this.enabled     = true;

	// default values for form elements

	this.default_value_map = config.default_value_map || {};

	// pre-validation methods

	this.validation =
	{
		fn:    {},	// function for validating each element id
		regex: {}	// regex for validating each element id
	};

	// error messages

	this.validation_msgs = {};		// message list, keyed on type, for each element id

	this.has_messages = false;
	this.has_errors   = false;

	// buttons -- disabled during submission

	this.button_list      = [];
	this.user_button_list = [];

	// file uploading is nasty

	this.has_file_inputs = false;
}

/**
 * The CSS class which marks each row of the form.  Typically, each field
 * (or a very tightly coupled set of fields) is placed in a separate row.
 * 
 * @property row_marker_class
 * @type {String}
 */
FormManager.row_marker_class = &#x27;formmgr-row&#x27;;

/**
 * The CSS class which marks each field in a row of the form.  This enables
 * messaging when multiple fields are in a single row.
 * 
 * @property field_marker_class
 * @type {String}
 */
FormManager.field_marker_class = &#x27;formmgr-field&#x27;;

/**
 * The CSS class which marks the container for the status message within a
 * row of the form.
 * 
 * @property status_marker_class
 * @type {String}
 */
FormManager.status_marker_class = &#x27;formmgr-message-text&#x27;;

/**
 * The CSS class placed on &lt;code&gt;status_node&lt;/code&gt; when it is empty.
 * 
 * @property status_none_class
 * @type {String}
 */
FormManager.status_none_class = &#x27;formmgr-status-hidden&#x27;;

/**
 * The CSS class placed on &lt;code&gt;status_node&lt;/code&gt; when
 * &lt;code&gt;displayFormMessage()&lt;/code&gt; is called with
 * &lt;code&gt;error=false&lt;/code&gt;.
 * 
 * @property status_success_class
 * @type {String}
 */
FormManager.status_success_class = &#x27;formmgr-status-success&#x27;;

/**
 * The CSS class placed on &lt;code&gt;status_node&lt;/code&gt; when
 * &lt;code&gt;displayFormMessage()&lt;/code&gt; is called with
 * &lt;code&gt;error=true&lt;/code&gt;.
 * 
 * @property status_failure_class
 * @type {String}
 */
FormManager.status_failure_class = &#x27;formmgr-status-failure&#x27;;

/**
 * The prefix for all CSS classes placed on a form row when pre-validation
 * fails.  The full CSS class is formed by appending the value from
 * &#x60;Y.FormManager.status_order&#x60;.
 * 
 * @property row_status_prefix
 * @type {String}
 */
FormManager.row_status_prefix = &#x27;formmgr-has&#x27;;

// By using functions for the internal values, we allow the above constants
// to be changed before they are first used.

var cached_status_pattern;
var cached_row_status_pattern;
var cached_row_status_regex;

function statusPattern()
{
	if (!cached_status_pattern)
	{
		cached_status_pattern = FormManager.status_success_class+&#x27;|&#x27;+FormManager.status_failure_class;
	}
	return cached_status_pattern;
}

function rowStatusPattern()
{
	if (!cached_row_status_pattern)
	{
		cached_row_status_pattern = FormManager.row_status_prefix + &#x27;([^\\s]+)&#x27;;
	}
	return cached_row_status_pattern;
}

function rowStatusRegex()
{
	if (!cached_row_status_regex)
	{
		cached_row_status_regex = new RegExp(Y.Node.class_re_prefix + rowStatusPattern() + Y.Node.class_re_suffix);
	}
	return cached_row_status_regex;
}

/**
 * Get the status of the given fieldset or form row.
 * 
 * @method getElementStatus
 * @static
 * @param e {String|Object} The descriptor or DOM element.
 * @return {mixed} The status (String) or &lt;code&gt;false&lt;/code&gt;.
 */
FormManager.getElementStatus = function(
	/* string/object */	e)
{
	var m = Y.one(e).get(&#x27;className&#x27;).match(rowStatusRegex());
	return (m &amp;&amp; m.length &gt; 1 ? m[1] : false);
};

function getId(
	/* string/Node/object */	e)
{
	if (Y.Lang.isString(e))
	{
		return e.replace(/^#/, &#x27;&#x27;);
	}
	else if (e._node)
	{
		return e.get(&#x27;id&#x27;);
	}
	else
	{
		return e.id;
	}
}

function _populateForm()
{
	var collect_buttons = (this.button_list.length === 0);

	for (var i=0; i&lt;this.form.elements.length; i++)
	{
		var e = this.form.elements[i];

		var name = e.tagName;
		var type = (e.type ? e.type.toLowerCase() : null);
		if (collect_buttons &amp;&amp;
			(type == &#x27;submit&#x27; || type == &#x27;reset&#x27; || name == &#x27;BUTTON&#x27;))
		{
			this.button_list.push(e);
		}

		if (!e.name)
		{
			continue;
		}

		var v = this.default_value_map[ e.name ];
		if (name == &#x27;INPUT&#x27; &amp;&amp; type == &#x27;file&#x27;)
		{
			e.value = &#x27;&#x27;;
		}
		else if (Y.Lang.isUndefined(v))
		{
			// save value for next time

			if (name == &#x27;INPUT&#x27; &amp;&amp;
				(type == &#x27;password&#x27; || type == &#x27;text&#x27;))
			{
				this.default_value_map[ e.name ] = e.value;
			}
			else if (name == &#x27;INPUT&#x27; &amp;&amp; type == &#x27;checkbox&#x27;)
			{
				this.default_value_map[ e.name ] = (e.checked ? e.value : &#x27;&#x27;);
			}
			else if (name == &#x27;INPUT&#x27; &amp;&amp; type == &#x27;radio&#x27;)
			{
				var rb = this.form[ e.name ];	// null if dynamically generated in IE
				if (rb &amp;&amp; !rb.length)
				{
					this.default_value_map[ e.name ] = rb.value;
				}
				else if (rb)
				{
					this.default_value_map[ e.name ] = rb[0].value;

					for (var j=0; j&lt;rb.length; j++)
					{
						if (rb[j].checked)
						{
							this.default_value_map[ e.name ] = rb[j].value;
							break;
						}
					}
				}
			}
			else if ((name == &#x27;SELECT&#x27; &amp;&amp; type == &#x27;select-one&#x27;) ||
					 name == &#x27;TEXTAREA&#x27;)
			{
				this.default_value_map[ e.name ] = e.value;
			}
		}
		else if (name == &#x27;INPUT&#x27; &amp;&amp;
				 (type == &#x27;password&#x27; || type == &#x27;text&#x27;))
		{
			e.value = v;
		}
		else if (name == &#x27;INPUT&#x27; &amp;&amp;
				 (type == &#x27;checkbox&#x27; || type == &#x27;radio&#x27;))
		{
			e.checked = (e.value == v);
		}
		else if (name == &#x27;SELECT&#x27; &amp;&amp; type == &#x27;select-one&#x27;)
		{
			e.value = v;
			if (e.selectedIndex &gt;= 0 &amp;&amp;
				e.options[ e.selectedIndex ].value !== v.toString())
			{
				e.selectedIndex = -1;
			}
		}
		else if (name == &#x27;TEXTAREA&#x27;)
		{
			e.value = v;
		}
	}
}

function _isChanged(i)
{
	var e = this.form.elements[i];
	if (!e.name)
	{
		return false;
	}

	var type = (e.type ? e.type.toLowerCase() : null);
	var name = e.tagName;
	var v    = this.default_value_map[ e.name ];
	if (v === null || typeof v === &#x27;undefined&#x27;)
	{
		v = &#x27;&#x27;;
	}

	if (name == &#x27;INPUT&#x27; &amp;&amp; type == &#x27;file&#x27;)
	{
		if (e.value)
		{
			return true;
		}
	}
	else if (name == &#x27;INPUT&#x27; &amp;&amp;
			 (type == &#x27;password&#x27; || type == &#x27;text&#x27; || type == &#x27;file&#x27;))
	{
		if (e.value != v)
		{
			return true;
		}
	}
	else if (name == &#x27;INPUT&#x27; &amp;&amp;
			 (type == &#x27;checkbox&#x27; || type == &#x27;radio&#x27;))
	{
		var checked = (e.value == v);
		if ((checked &amp;&amp; !e.checked) || (!checked &amp;&amp; e.checked))
		{
			return true;
		}
	}
	else if ((name == &#x27;SELECT&#x27; &amp;&amp; type == &#x27;select-one&#x27;) ||
			 name == &#x27;TEXTAREA&#x27;)
	{
		if (e.value != v)
		{
			return true;
		}
	}
	else
	{
		return false;
	}
}

/**
 * &lt;p&gt;Exposed for use by Y.QueryBuilder&lt;/p&gt;
 * 
 * &lt;p&gt;Clear the message for the given field.&lt;/p&gt;
 * 
 * @method clearMessage
 * @static
 * @param e {Element|Node} the field
 */
FormManager.clearMessage = function(e)
{
	var p = Y.one(e).getAncestorByClassName(Y.FormManager.row_marker_class);
	if (p &amp;&amp; p.hasClass(rowStatusPattern()))
	{
		p.all(&#x27;.&#x27;+Y.FormManager.status_marker_class).set(&#x27;innerHTML&#x27;, &#x27;&#x27;);
		p.removeClass(rowStatusPattern());

		p.all(&#x27;.&#x27;+Y.FormManager.field_marker_class).removeClass(rowStatusPattern());
	}
};

/**
 * &lt;p&gt;Exposed for use by Y.QueryBuilder&lt;/p&gt;
 * 
 * &lt;p&gt;Display a message for the form row containing the specified element.
 * The message will only be displayed if no message with a higher
 * precedence is already visible. (see Y.FormManager.status_order)&lt;/p&gt;
 * 
 * @method displayMessage
 * @static
 * @param e {String|Object} The selector for the element or the element itself
 * @param msg {String} The message
 * @param type {String} The message type (see Y.FormManager.status_order)
 * @param [had_messages] {boolean} &#x60;true&#x60; if the form already has messages displayed
 * @param [scroll] {boolean} &#x60;true&#x60; if the form row should be scrolled into view
 * @return {boolean} true if the message was displayed, false if a higher precedence message was already there
 */
FormManager.displayMessage = function(
	/* id/object */	e,
	/* string */	msg,
	/* string */	type,
	/* boolean */	had_messages,
	/* boolean */	scroll)
{
	if (Y.Lang.isUndefined(scroll))
	{
		scroll = !had_messages;
	}

	e     = Y.one(e);
	var p = e.getAncestorByClassName(FormManager.row_marker_class);
	if (p &amp;&amp; FormManager.statusTakesPrecedence(FormManager.getElementStatus(p), type))
	{
		var f = p.all(&#x27;.&#x27;+FormManager.field_marker_class);
		if (f)
		{
			f.removeClass(rowStatusPattern());
		}

		if (msg)
		{
			p.one(&#x27;.&#x27;+FormManager.status_marker_class).set(&#x27;innerHTML&#x27;, msg);
		}

		var new_class = FormManager.row_status_prefix + type;
		p.replaceClass(rowStatusPattern(), new_class);

		f = e.getAncestorByClassName(FormManager.field_marker_class, true);
		if (f)
		{
			f.replaceClass(rowStatusPattern(), new_class);
		}

		var fieldset = e.getAncestorByTagName(&#x27;fieldset&#x27;);
		if (fieldset &amp;&amp; FormManager.statusTakesPrecedence(FormManager.getElementStatus(fieldset), type))
		{
			fieldset.removeClass(rowStatusPattern());
			fieldset.addClass(FormManager.row_status_prefix + type);
		}

		if (scroll &amp;&amp; e.get(&#x27;offsetHeight&#x27;) !== 0)
		{
			p.scrollIntoView();
			e.focus();
		}

		return true;
	}

	return false;
};

Y.extend(FormManager, Y.Plugin.Host,
{
	/* *********************************************************************
	 * Access functions.
	 */

	/**
	 * @method getForm
	 * @return {DOM} The form DOM element.
	 */
	getForm: function()
	{
		if (!this.form)
		{
			this.form = Y.config.doc.forms[ this.form_name ];
		}
		return this.form;
	},

	/**
	 * @method hasFileInputs
	 * @return {boolean} &lt;code&gt;true&lt;/code&gt; if the form contains file inputs.  These require special treatment when submitting via XHR.
	 */
	hasFileInputs: function()
	{
		return this.has_file_inputs;
	},

	/**
	 * @method setStatusNode
	 * @param node {String|Y.Node} the node in which status should be displayed
	 */
	setStatusNode: function(
		/* Node */	node)
	{
		this.status_node = Y.one(node);
	},

	/**
	 * Set the default values for all form elements.
	 * 
	 * @method setDefaultValues
	 * @param default_value_map {Object|Model} Mapping of form element names to values.
	 */
	setDefaultValues: function(
		/* object */	map)
	{
		if (Y.Model &amp;&amp; (map instanceof Y.Model))
		{
			map = map.getAttrs();
		}

		this.default_value_map = map;
	},

	/**
	 * Set the default values for a single form element.
	 * 
	 * @method setDefaultValue
	 * @param field_name {String} The form element name.
	 * @param default_value {String|Int|Float} The default value.
	 */
	setDefaultValue: function(
		/* string*/		field_name,
		/* string */	default_value)
	{
		this.default_value_map[ field_name ] = default_value;
	},

	/**
	 * Store the current form values in &lt;code&gt;default_value_map&lt;/code&gt;.
	 * 
	 * @method saveCurrentValuesAsDefault
	 */
	saveCurrentValuesAsDefault: function()
	{
		this.default_value_map = {};
		this.button_list       = [];
		_populateForm.call(this);
	},

	/* *********************************************************************
	 * Validation control
	 */

	/**
	 * Set the validation function for a form element.
	 * 
	 * @method setFunction
	 * @param id {String|Object} The selector for the element or the element itself
	 * @param f {Function|String|Object}
	 *  The function to call after basic validations succeed.  If this
	 *  is a String, it is resolved in the scope of the FormManager
	 *  object.  If this is an object, it must be &#x60;{fn:,
	 *  scope:}&#x60;.  The function will then be invoked in the
	 *  specified scope.
	 */
	setFunction: function(
		/* string */				id,
		/* function/string/obj */	f)
	{
		this.validation.fn[ getId(id) ] = f;
	},

	/**
	 * &lt;p&gt;Set the regular expression used to validate the field value.&lt;/p&gt;
	 * 
	 * &lt;p&gt;&lt;strong&gt;Since there is no default message for failed regular
	 * expression validation, this function will complain if you have not
	 * already called &#x60;setErrorMessages()&#x60; or
	 * &#x60;addErrorMessage&#x60; to specify an error message.&lt;/strong&gt;&lt;/p&gt;
	 * 
	 * @method setRegex
	 * @param id {String|Object} The selector for the element or the element itself
	 * @param regex {String|RegExp} The regular expression to use
	 * @param flags {String} If regex is a String, these are the flags used to construct a RegExp.
	 */
	setRegex: function(
		/* string */		id,
		/* string/RegExp */	regex,
		/* string */		flags)		// ignored if regex is RegExp object
	{
		id = getId(id);

		if (Y.Lang.isString(regex))
		{
			this.validation.regex[id] = new RegExp(regex, flags);
		}
		else
		{
			this.validation.regex[id] = regex;
		}

		if (!this.validation_msgs[id] || !this.validation_msgs[id].regex)
		{
			Y.error(Y.substitute(&#x27;No error message provided for regex validation of {id}!&#x27;, {id:id}), null, &#x27;FormManager&#x27;);
		}
	},

	/**
	 * &lt;p&gt;Set the error messages for a form element.  This can be used to
	 * override the default messages for individual elements&lt;/p&gt;
	 * 
	 * &lt;p&gt;The valid error types are:&lt;/p&gt;
	 * &lt;dl&gt;
	 * &lt;dt&gt;&lt;code&gt;required&lt;/code&gt;&lt;/dt&gt;
	 * &lt;dd&gt;&amp;nbsp;&lt;/dd&gt;
	 * &lt;dt&gt;&lt;code&gt;min_length&lt;/code&gt;&lt;/dt&gt;
	 * &lt;dd&gt;&lt;code&gt;{min}&lt;/code&gt; and &lt;code&gt;{max}&lt;/code&gt; are replaced&lt;/dd&gt;
	 * &lt;dt&gt;&lt;code&gt;max_length&lt;/code&gt;&lt;/dt&gt;
	 * &lt;dd&gt;&lt;code&gt;{min}&lt;/code&gt; and &lt;code&gt;{max}&lt;/code&gt; are replaced&lt;/dd&gt;
	 * &lt;dt&gt;&lt;code&gt;integer&lt;/code&gt;&lt;/dt&gt;
	 * &lt;dd&gt;&lt;code&gt;{min}&lt;/code&gt; and &lt;code&gt;{max}&lt;/code&gt; are replaced&lt;/dd&gt;
	 * &lt;dt&gt;&lt;code&gt;decimal&lt;/code&gt;&lt;/dt&gt;
	 * &lt;dd&gt;&lt;code&gt;{min}&lt;/code&gt; and &lt;code&gt;{max}&lt;/code&gt; are replaced&lt;/dd&gt;
	 * &lt;dt&gt;&lt;code&gt;regex&lt;/code&gt;&lt;/dt&gt;
	 * &lt;dd&gt;This &lt;string&gt;must&lt;/strong&gt; be set for elements which validate with regular expressions.&lt;/dd&gt;
	 * &lt;/dl&gt;
	 * 
	 * @method setErrorMessages
	 * @param id {String|Object} The selector for the element or the element itself
	 * @param map {Object} Map of error types to error messages.
	 */
	setErrorMessages: function(
		/* string */	id,
		/* object */	map)
	{
		this.validation_msgs[ getId(id) ] = map;
	},

	/**
	 * Set one particular error message for a form element.
	 * 
	 * @method addErrorMessage
	 * @param id {String|Object} The selector for the element or the element itself
	 * @param error_type {String} The error message type.  Refer to setErrorMessages() for details.
	 * @param msg {String} The error message
	 */
	addErrorMessage: function(
		/* string */	id,
		/* string */	error_type,
		/* string */	msg)
	{
		id = getId(id);
		if (!this.validation_msgs[id])
		{
			this.validation_msgs[id] = {};
		}
		this.validation_msgs[id][error_type] = msg;
	},

	/**
	 * Reset all values in the form to the defaults specified in the markup.
	 * 
	 * @method clearForm
	 */
	clearForm: function()
	{
		this.clearMessages();
		this.form.reset();
		this.postPopulateForm();
	},

	/**
	 * Reset all values in the form to the defaults passed to the
	 * constructor or to &#x60;setDefaultValues()&#x60;.
	 * 
	 * @method populateForm
	 */
	populateForm: function()
	{
		this.clearMessages();

		_populateForm.call(this);

		// let derived class adjust

		this.postPopulateForm();
	},

	/**
	 * Hook for performing additional actions after &#x60;populateForm()&#x60;
	 * completes.
	 * 
	 * @method postPopulateForm
	 */
	postPopulateForm: function()
	{
	},

	/**
	 * Check if form values have been modified.
	 * 
	 * @method isChanged
	 * @return {boolean} &#x60;false&#x60; if all form elements have the default values passed to the constructor
	 */
	isChanged: function()
	{
		for (var i=0; i&lt;this.form.elements.length; i++)
		{
			if (_isChanged.call(this, i))
			{
				return true;
			}
		}

		return false;
	},

	/**
	 * Return the modified values.
	 * 
	 * @method getChanges
	 * @return {Object} map of form element names to new values
	 */
	getChanges: function()
	{
		var result = {};
		for (var i=0; i&lt;this.form.elements.length; i++)
		{
			if (_isChanged.call(this, i))
			{
				var e            = this.form.elements[i];
				result[ e.name ] = e.value;
			}
		}

		return result;
	},

	/**
	 * Prepare the form for display.
	 * 
	 * @method prepareForm
	 * @return {boolean} &lt;code&gt;true&lt;/code&gt; if both pre &amp; post hooks are happy
	 */
	prepareForm: function()
	{
		this.getForm();

		if (!this.prePrepareForm.apply(this, arguments))
		{
			return false;
		}

		// fill in starting values

		this.populateForm();

		return this.postPrepareForm.apply(this, arguments);
	},

	/**
	 * Hook called before &lt;code&gt;prepareForm()&lt;/code&gt; executes.
	 * 
	 * @method prePrepareForm
	 * @return {boolean} &lt;code&gt;false&lt;/code&gt; cancels &lt;code&gt;prepareForm()&lt;/code&gt;.
	 */
	prePrepareForm: function()
	{
		return true;
	},

	/**
	 * Hook called after &lt;code&gt;prepareForm()&lt;/code&gt; executes.
	 * 
	 * @method postPrepareForm
	 * @return {boolean} Return value from this function is returned by &lt;code&gt;prepareForm()&lt;/code&gt;.
	 */
	postPrepareForm: function()
	{
		return true;
	},

	/**
	 * Set focus to first input field.  If a page contains multiple forms,
	 * only call this for one of them.
	 * 
	 * @method initFocus
	 */
	initFocus: function()
	{
		for (var i=0; i&lt;this.form.elements.length; i++)
		{
			var e = this.form.elements[i];
			if (e.disabled || e.offsetHeight === 0)
			{
				continue;
			}

			var name = e.tagName;
			var type = (e.type ? e.type.toLowerCase() : null);

			if ((name == &#x27;INPUT&#x27; &amp;&amp;
				 (type == &#x27;file&#x27; || type == &#x27;password&#x27; || type == &#x27;text&#x27;)) ||
				name == &#x27;TEXTAREA&#x27;)
			{
				e.focus();
				e.select();
				break;
			}
		}
	},

	/**
	 * @method validateForm
	 * @return {Boolean} true if all validation checks passed
	 */
	validateForm: function()
	{
		this.clearMessages();
		var status = true;

		var e                = this.form.elements;
		this.has_file_inputs = FormManager.cleanValues(e);

		for (var i=0; i&lt;e.length; i++)
		{
			var e_id     = e[i].id;
			var msg_list = this.validation_msgs[e_id];

			var info = FormManager.validateFromCSSData(e[i], msg_list);
			if (info.error)
			{
				this.displayMessage(e[i], info.error, &#x27;error&#x27;);
				status = false;
				continue;
			}

			if (info.keepGoing)
			{
				if (this.validation.regex[e_id] &amp;&amp;
					!this.validation.regex[e_id].test(e[i].value))
				{
					this.displayMessage(e[i], msg_list ? msg_list.regex : null, &#x27;error&#x27;);
					status = false;
					continue;
				}
			}

			var f     = this.validation.fn[e_id];
			var scope = this;
			if (Y.Lang.isFunction(f))
			{
				// use it
			}
			else if (Y.Lang.isString(f))
			{
				f = scope[f];
			}
			else if (f &amp;&amp; f.scope)
			{
				scope = f.scope;
				f     = (Y.Lang.isString(f.fn) ? scope[f.fn] : f.fn);
			}
			else
			{
				f = null;
			}

			if (f &amp;&amp; !f.call(scope, this.form, Y.one(e[i])))
			{
				status = false;
				continue;
			}
		}

		if (!this.postValidateForm(this.form))
		{
			status = false;
		}

		if (!status)
		{
			this.notifyErrors();
		}

		return status;
	},

	/**
	 * Hook called at the end of &#x60;validateForm()&#x60;.  This is the best place
	 * to put holistic validations that touch multiple form elements.
	 * 
	 * @method postValidateForm
	 * @return {boolean} &#x60;false&#x60; if validation fails
	 */
	postValidateForm: function(
		/* DOM element */	form)
	{
		return true;
	},

	/* *********************************************************************
	 * Buttons can be disabled during submission.
	 */

	/**
	 * Register an object that can be disabled.  The object must support
	 * the set(&#x27;disabled&#x27;, ...) API.  (The exception is DOM nodes, since
	 * they are automatically wrapped in Y.Node.)  Buttons contained within
	 * the form DOM element are automatically registered.
	 * 
	 * @method registerButton
	 * @param el {String|Object} The selector for the element or the element itself
	 */
	registerButton: function(
		/* string/object */ el)
	{
		var info =
		{
			e: Y.Lang.isString(el) || el.tagName ? Y.one(el) : el
		};

		this.user_button_list.push(info);
	},

	/**
	 * @method isFormEnabled
	 * @return {boolean} &lt;code&gt;true&lt;/code&gt; if form is enabled
	 */
	isFormEnabled: function()
	{
		return this.enabled;
	},

	/**
	 * Enable all the registered buttons.
	 * 
	 * @method enableForm
	 */
	enableForm: function()
	{
		this.setFormEnabled(true);
	},

	/**
	 * Disable all the registered buttons.
	 * 
	 * @method disableForm
	 */
	disableForm: function()
	{
		this.setFormEnabled(false);
	},

	/**
	 * Set the enabled state all the registered buttons.
	 * 
	 * @method setFormEnabled
	 * @param enabled {boolean} &lt;code&gt;true&lt;/code&gt; to enable the form, &lt;code&gt;false&lt;/code&gt; to disable the form
	 */
	setFormEnabled: function(
		/* boolean */	enabled)
	{
		this.enabled = enabled;

		var disabled = ! enabled;
		for (var i=0; i&lt;this.button_list.length; i++)
		{
			this.button_list[i].disabled = disabled;
		}

		for (i=0; i&lt;this.user_button_list.length; i++)
		{
			var info = this.user_button_list[i];
			info.e.set(&#x27;disabled&#x27;, disabled);
		}
	},

	/* *********************************************************************
	 * Message display
	 */

	/**
	 * @method hasMessages
	 * @return {boolean} &lt;code&gt;true&lt;/code&gt; if there are any messages displayed, of any type
	 */
	hasMessages: function()
	{
		return this.has_messages;
	},

	/**
	 * @method hasErrors
	 * @return {boolean} &lt;code&gt;true&lt;/code&gt; if there are any error messages displayed
	 */
	hasErrors: function()
	{
		return this.has_errors;
	},

	/**
	 * Get the message type displayed for the row containing the specified element.
	 * 
	 * @method getRowStatus
	 * @param e {String|Object} The selector for the element or the element itself
	 * @return {mixed} The status (String) or &lt;code&gt;false&lt;/code&gt;.
	 */
	getRowStatus: function(
		/* id/object */	e)
	{
		var p = Y.one(e).getAncestorByClassName(FormManager.row_marker_class, true);
		return FormManager.getElementStatus(p);
	},

	/**
	 * Clear all messages in &lt;code&gt;status_node&lt;/code&gt; and the form rows.
	 * 
	 * @method clearMessages
	 */
	clearMessages: function()
	{
		this.has_messages = false;
		this.has_errors   = false;

		if (this.status_node)
		{
			this.status_node.set(&#x27;innerHTML&#x27;, &#x27;&#x27;);
			this.status_node.replaceClass(statusPattern(), FormManager.status_none_class);
		}

		Y.Array.each(this.form.elements, function(e)
		{
			var type = (e.type ? e.type.toLowerCase() : null);
			if (e.tagName != &#x27;BUTTON&#x27; &amp;&amp; type != &#x27;submit&#x27; &amp;&amp; type != &#x27;reset&#x27;)
			{
				FormManager.clearMessage(e);
			}
		});

		Y.one(this.form).all(&#x27;fieldset&#x27;).removeClass(rowStatusPattern());
	},

	/**
	 * Display a message for the form row containing the specified element.
	 * The message will only be displayed if no message with a higher
	 * precedence is already visible. (see Y.FormManager.status_order)
	 * 
	 * @method displayMessage
	 * @param e {String|Object} The selector for the element or the element itself
	 * @param msg {String} The message
	 * @param type {String} The message type (see Y.FormManager.status_order)
	 * @param [scroll] {boolean} &#x60;true&#x60; if the form row should be scrolled into view
	 * @return {boolean} true if the message was displayed, false if a higher precedence message was already there
	 */
	displayMessage: function(
		/* id/object */	e,
		/* string */	msg,
		/* string */	type,
		/* boolean */	scroll)
	{
		if (FormManager.displayMessage(e, msg, type, this.has_messages, scroll))
		{
			this.has_messages = true;
			if (type == &#x27;error&#x27;)
			{
				this.has_errors = true;
			}

			return true;
		}
		else
		{
			return false;
		}
	},

	/**
	 * Displays a generic message in &lt;code&gt;status_node&lt;/code&gt; stating that
	 * the form data failed to validate.  Override this if you want to get
	 * fancy.
	 * 
	 * @method notifyErrors
	 */
	notifyErrors: function()
	{
		this.displayFormMessage(FormManager.Strings.validation_error, true, false);
	},

	/**
	 * Display a message in &lt;code&gt;status_node&lt;/code&gt;.
	 * 
	 * @method displayFormMessage
	 * @param msg {String} The message
	 * @param error {boolean} &lt;code&gt;true&lt;/code&gt; if the message is an error
	 * @param scroll {boolean} &lt;code&gt;true&lt;/code&gt; if &lt;code&gt;status_node&lt;/code&gt; should be scrolled into view
	 */
	displayFormMessage: function(
		/* string */	msg,
		/* boolean */	error,
		/* boolean */	scroll)
	{
		if (Y.Lang.isUndefined(scroll))
		{
			scroll = true;
		}

		if (this.status_node)
		{
			if (!this.status_node.innerHTML)
			{
				this.status_node.replaceClass(
					FormManager.status_none_class,
					(error ? FormManager.status_failure_class :
							 FormManager.status_success_class));
				this.status_node.set(&#x27;innerHTML&#x27;, msg);
			}

			if (scroll)
			{
				this.status_node.scrollIntoView();
			}
		}
		else
		{
			Y.log(msg, &#x27;warn&#x27;, &#x27;FormManager&#x27;);
		}
	}
});

// static data &amp; functions from gallery-formmgr-css-validation
Y.aggregate(FormManager, Y.FormManager);

Y.FormManager = FormManager;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
