<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/gallery-datetime/js/DateTime.js - YUI 3 Gallery Modules</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="YUI 3 Gallery Modules" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Accordion.html">Accordion</a></li>
                                <li><a href="../classes/AnimSequence.html">AnimSequence</a></li>
                                <li><a href="../classes/ArrayIterator.html">ArrayIterator</a></li>
                                <li><a href="../classes/ArrayList~extras.html">ArrayList~extras</a></li>
                                <li><a href="../classes/Array~algorithms.html">Array~algorithms</a></li>
                                <li><a href="../classes/Array~funcprog-extras.html">Array~funcprog-extras</a></li>
                                <li><a href="../classes/Array~object-extras.html">Array~object-extras</a></li>
                                <li><a href="../classes/Assert.html">Assert</a></li>
                                <li><a href="../classes/AtLeastOneCheckboxGroup.html">AtLeastOneCheckboxGroup</a></li>
                                <li><a href="../classes/AtMostOneCheckboxGroup.html">AtMostOneCheckboxGroup</a></li>
                                <li><a href="../classes/BulkEditor.html">BulkEditor</a></li>
                                <li><a href="../classes/Canvas.Context2d.html">Canvas.Context2d</a></li>
                                <li><a href="../classes/CheckboxGroup.html">CheckboxGroup</a></li>
                                <li><a href="../classes/Chipper.html">Chipper</a></li>
                                <li><a href="../classes/CollapseToggle.html">CollapseToggle</a></li>
                                <li><a href="../classes/ComplexMath.html">ComplexMath</a></li>
                                <li><a href="../classes/ComplexNumber.html">ComplexNumber</a></li>
                                <li><a href="../classes/DataSource.AsyncFunction.html">DataSource.AsyncFunction</a></li>
                                <li><a href="../classes/DataSource.BulkEdit.html">DataSource.BulkEdit</a></li>
                                <li><a href="../classes/DataSource.Treeble.html">DataSource.Treeble</a></li>
                                <li><a href="../classes/DateTime.html">DateTime</a></li>
                                <li><a href="../classes/DateTimeRange.html">DateTimeRange</a></li>
                                <li><a href="../classes/DateTimeUtils.html">DateTimeUtils</a></li>
                                <li><a href="../classes/EnableIfAnyCheckboxGroup.html">EnableIfAnyCheckboxGroup</a></li>
                                <li><a href="../classes/ExpirationCache.html">ExpirationCache</a></li>
                                <li><a href="../classes/ExpressionBuilder.html">ExpressionBuilder</a></li>
                                <li><a href="../classes/FormManager.html">FormManager</a></li>
                                <li><a href="../classes/HTMLTableBulkEditor.html">HTMLTableBulkEditor</a></li>
                                <li><a href="../classes/InputPopup.html">InputPopup</a></li>
                                <li><a href="../classes/InstanceManager.html">InstanceManager</a></li>
                                <li><a href="../classes/io~multiresponse.html">io~multiresponse</a></li>
                                <li><a href="../classes/Iterable.html">Iterable</a></li>
                                <li><a href="../classes/LinkedList.html">LinkedList</a></li>
                                <li><a href="../classes/LinkedListItem.html">LinkedListItem</a></li>
                                <li><a href="../classes/LinkedListIterator.html">LinkedListIterator</a></li>
                                <li><a href="../classes/LogFilter.html">LogFilter</a></li>
                                <li><a href="../classes/Math.html">Math</a></li>
                                <li><a href="../classes/MathCanvas.html">MathCanvas</a></li>
                                <li><a href="../classes/MathCanvas.Parser.html">MathCanvas.Parser</a></li>
                                <li><a href="../classes/MathCanvas.RectList.html">MathCanvas.RectList</a></li>
                                <li><a href="../classes/MathFunction.html">MathFunction</a></li>
                                <li><a href="../classes/MathFunction.Arccosine.html">MathFunction.Arccosine</a></li>
                                <li><a href="../classes/MathFunction.Arcsine.html">MathFunction.Arcsine</a></li>
                                <li><a href="../classes/MathFunction.Arctangent.html">MathFunction.Arctangent</a></li>
                                <li><a href="../classes/MathFunction.Arctangent2.html">MathFunction.Arctangent2</a></li>
                                <li><a href="../classes/MathFunction.Conjugate.html">MathFunction.Conjugate</a></li>
                                <li><a href="../classes/MathFunction.Cosine.html">MathFunction.Cosine</a></li>
                                <li><a href="../classes/MathFunction.E.html">MathFunction.E</a></li>
                                <li><a href="../classes/MathFunction.Exponential.html">MathFunction.Exponential</a></li>
                                <li><a href="../classes/MathFunction.FunctionWithArgs.html">MathFunction.FunctionWithArgs</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicCosine.html">MathFunction.HyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicSine.html">MathFunction.HyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.HyperbolicTangent.html">MathFunction.HyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.I.html">MathFunction.I</a></li>
                                <li><a href="../classes/MathFunction.ImaginaryPart.html">MathFunction.ImaginaryPart</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicCosine.html">MathFunction.InverseHyperbolicCosine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicSine.html">MathFunction.InverseHyperbolicSine</a></li>
                                <li><a href="../classes/MathFunction.InverseHyperbolicTangent.html">MathFunction.InverseHyperbolicTangent</a></li>
                                <li><a href="../classes/MathFunction.Logarithm.html">MathFunction.Logarithm</a></li>
                                <li><a href="../classes/MathFunction.Magnitude.html">MathFunction.Magnitude</a></li>
                                <li><a href="../classes/MathFunction.Max.html">MathFunction.Max</a></li>
                                <li><a href="../classes/MathFunction.Min.html">MathFunction.Min</a></li>
                                <li><a href="../classes/MathFunction.NaturalLog.html">MathFunction.NaturalLog</a></li>
                                <li><a href="../classes/MathFunction.Negate.html">MathFunction.Negate</a></li>
                                <li><a href="../classes/MathFunction.Phase.html">MathFunction.Phase</a></li>
                                <li><a href="../classes/MathFunction.Pi.html">MathFunction.Pi</a></li>
                                <li><a href="../classes/MathFunction.Product.html">MathFunction.Product</a></li>
                                <li><a href="../classes/MathFunction.Quotient.html">MathFunction.Quotient</a></li>
                                <li><a href="../classes/MathFunction.RealPart.html">MathFunction.RealPart</a></li>
                                <li><a href="../classes/MathFunction.Rotate.html">MathFunction.Rotate</a></li>
                                <li><a href="../classes/MathFunction.Sine.html">MathFunction.Sine</a></li>
                                <li><a href="../classes/MathFunction.SquareRoot.html">MathFunction.SquareRoot</a></li>
                                <li><a href="../classes/MathFunction.Sum.html">MathFunction.Sum</a></li>
                                <li><a href="../classes/MathFunction.Tangent.html">MathFunction.Tangent</a></li>
                                <li><a href="../classes/MathFunction.Value.html">MathFunction.Value</a></li>
                                <li><a href="../classes/MathFunction.Variable.html">MathFunction.Variable</a></li>
                                <li><a href="../classes/MatrixBackground.html">MatrixBackground</a></li>
                                <li><a href="../classes/MatrixCredits.html">MatrixCredits</a></li>
                                <li><a href="../classes/MRUCache.html">MRUCache</a></li>
                                <li><a href="../classes/MultiObject.html">MultiObject</a></li>
                                <li><a href="../classes/NodeList~extras2.html">NodeList~extras2</a></li>
                                <li><a href="../classes/Node~dimensions.html">Node~dimensions</a></li>
                                <li><a href="../classes/Node~event-set.html">Node~event-set</a></li>
                                <li><a href="../classes/Node~optimizations.html">Node~optimizations</a></li>
                                <li><a href="../classes/Node~scrollIntoView.html">Node~scrollIntoView</a></li>
                                <li><a href="../classes/Node~utils.html">Node~utils</a></li>
                                <li><a href="../classes/Object~extras.html">Object~extras</a></li>
                                <li><a href="../classes/PageLayout.html">PageLayout</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageInput.html">Paginator.ui.CurrentPageInput</a></li>
                                <li><a href="../classes/Paginator.ui.CurrentPageReport.html">Paginator.ui.CurrentPageReport</a></li>
                                <li><a href="../classes/Paginator.ui.FirstPageLink.html">Paginator.ui.FirstPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.ItemRangeDropdown.html">Paginator.ui.ItemRangeDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.LastPageLink.html">Paginator.ui.LastPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.NextPageLink.html">Paginator.ui.NextPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.PageLinks.html">Paginator.ui.PageLinks</a></li>
                                <li><a href="../classes/Paginator.ui.PreviousPageLink.html">Paginator.ui.PreviousPageLink</a></li>
                                <li><a href="../classes/Paginator.ui.RowsPerPageDropdown.html">Paginator.ui.RowsPerPageDropdown</a></li>
                                <li><a href="../classes/Paginator.ui.ValidationPageLinks.html">Paginator.ui.ValidationPageLinks</a></li>
                                <li><a href="../classes/Parsers.html">Parsers</a></li>
                                <li><a href="../classes/Plugin.BusyOverlay.html">Plugin.BusyOverlay</a></li>
                                <li><a href="../classes/Plugin.ConsoleTest.html">Plugin.ConsoleTest</a></li>
                                <li><a href="../classes/Plugin.DataTableDataSourceBusy.html">Plugin.DataTableDataSourceBusy</a></li>
                                <li><a href="../classes/Plugin.DataTablePaginator.html">Plugin.DataTablePaginator</a></li>
                                <li><a href="../classes/Plugin.DataTableQuickEdit.html">Plugin.DataTableQuickEdit</a></li>
                                <li><a href="../classes/Plugin.DataTableRowExpansion.html">Plugin.DataTableRowExpansion</a></li>
                                <li><a href="../classes/Plugin.DataTableState.html">Plugin.DataTableState</a></li>
                                <li><a href="../classes/Plugin.FixedSizeAccordion.html">Plugin.FixedSizeAccordion</a></li>
                                <li><a href="../classes/Plugin.InputCalendarSync.html">Plugin.InputCalendarSync</a></li>
                                <li><a href="../classes/Plugin.Neon.html">Plugin.Neon</a></li>
                                <li><a href="../classes/Plugin.NodeFXSequence.html">Plugin.NodeFXSequence</a></li>
                                <li><a href="../classes/Plugin.OverlayForm.html">Plugin.OverlayForm</a></li>
                                <li><a href="../classes/Plugin.PageLayoutAnyWidgetModule.html">Plugin.PageLayoutAnyWidgetModule</a></li>
                                <li><a href="../classes/Plugin.PageLayoutDataTableModule.html">Plugin.PageLayoutDataTableModule</a></li>
                                <li><a href="../classes/Popup.html">Popup</a></li>
                                <li><a href="../classes/QueryBuilder.html">QueryBuilder</a></li>
                                <li><a href="../classes/QueryBuilder.DateRange.html">QueryBuilder.DateRange</a></li>
                                <li><a href="../classes/QueryBuilder.MultiselectInput.html">QueryBuilder.MultiselectInput</a></li>
                                <li><a href="../classes/QueryBuilder.Select.html">QueryBuilder.Select</a></li>
                                <li><a href="../classes/QueryBuilder.String.html">QueryBuilder.String</a></li>
                                <li><a href="../classes/RPC.Mojito.html">RPC.Mojito</a></li>
                                <li><a href="../classes/SelectAllCheckboxGroup.html">SelectAllCheckboxGroup</a></li>
                                <li><a href="../classes/Sort.html">Sort</a></li>
                                <li><a href="../classes/Treeble.html">Treeble</a></li>
                                <li><a href="../classes/YUI~funcprog.html">YUI~funcprog</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/gallery-accordion-horiz-vert.html">gallery-accordion-horiz-vert</a></li>
                                <li><a href="../modules/gallery-adobe-air-config.html">gallery-adobe-air-config</a></li>
                                <li><a href="../modules/gallery-adobe-air-page-manager.html">gallery-adobe-air-page-manager</a></li>
                                <li><a href="../modules/gallery-adobe-air-prefs.html">gallery-adobe-air-prefs</a></li>
                                <li><a href="../modules/gallery-algorithms.html">gallery-algorithms</a></li>
                                <li><a href="../modules/gallery-anim-class.html">gallery-anim-class</a></li>
                                <li><a href="../modules/gallery-anim-sequence.html">gallery-anim-sequence</a></li>
                                <li><a href="../modules/gallery-bulkedit.html">gallery-bulkedit</a></li>
                                <li><a href="../modules/gallery-busyoverlay.html">gallery-busyoverlay</a></li>
                                <li><a href="../modules/gallery-canvas.html">gallery-canvas</a></li>
                                <li><a href="../modules/gallery-checkboxgroups.html">gallery-checkboxgroups</a></li>
                                <li><a href="../modules/gallery-chipper.html">gallery-chipper</a></li>
                                <li><a href="../modules/gallery-collapse-toggle.html">gallery-collapse-toggle</a></li>
                                <li><a href="../modules/gallery-complexnumber.html">gallery-complexnumber</a></li>
                                <li><a href="../modules/gallery-console-test.html">gallery-console-test</a></li>
                                <li><a href="../modules/gallery-datasource-async-function.html">gallery-datasource-async-function</a></li>
                                <li><a href="../modules/gallery-datatable-datasource-busy.html">gallery-datatable-datasource-busy</a></li>
                                <li><a href="../modules/gallery-datatable-paginator.html">gallery-datatable-paginator</a></li>
                                <li><a href="../modules/gallery-datatable-row-expansion.html">gallery-datatable-row-expansion</a></li>
                                <li><a href="../modules/gallery-datatable-state.html">gallery-datatable-state</a></li>
                                <li><a href="../modules/gallery-datetime.html">gallery-datetime</a></li>
                                <li><a href="../modules/gallery-datetime-range.html">gallery-datetime-range</a></li>
                                <li><a href="../modules/gallery-datetime-utils.html">gallery-datetime-utils</a></li>
                                <li><a href="../modules/gallery-dimensions.html">gallery-dimensions</a></li>
                                <li><a href="../modules/gallery-expiration-cache.html">gallery-expiration-cache</a></li>
                                <li><a href="../modules/gallery-exprbuilder.html">gallery-exprbuilder</a></li>
                                <li><a href="../modules/gallery-formmgr.html">gallery-formmgr</a></li>
                                <li><a href="../modules/gallery-formmgr-css-validation.html">gallery-formmgr-css-validation</a></li>
                                <li><a href="../modules/gallery-formmgr-overlay-plugin.html">gallery-formmgr-overlay-plugin</a></li>
                                <li><a href="../modules/gallery-funcprog.html">gallery-funcprog</a></li>
                                <li><a href="../modules/gallery-input-calendar-sync.html">gallery-input-calendar-sync</a></li>
                                <li><a href="../modules/gallery-instancemanager.html">gallery-instancemanager</a></li>
                                <li><a href="../modules/gallery-io-adobe-air.html">gallery-io-adobe-air</a></li>
                                <li><a href="../modules/gallery-io-multiresponse.html">gallery-io-multiresponse</a></li>
                                <li><a href="../modules/gallery-iterable-extras.html">gallery-iterable-extras</a></li>
                                <li><a href="../modules/gallery-layout.html">gallery-layout</a></li>
                                <li><a href="../modules/gallery-layout-anywidget.html">gallery-layout-anywidget</a></li>
                                <li><a href="../modules/gallery-layout-cols.html">gallery-layout-cols</a></li>
                                <li><a href="../modules/gallery-layout-datatable.html">gallery-layout-datatable</a></li>
                                <li><a href="../modules/gallery-layout-rows.html">gallery-layout-rows</a></li>
                                <li><a href="../modules/gallery-linkedlist.html">gallery-linkedlist</a></li>
                                <li><a href="../modules/gallery-log-filter.html">gallery-log-filter</a></li>
                                <li><a href="../modules/gallery-math.html">gallery-math</a></li>
                                <li><a href="../modules/gallery-mathcanvas.html">gallery-mathcanvas</a></li>
                                <li><a href="../modules/gallery-matrix-background.html">gallery-matrix-background</a></li>
                                <li><a href="../modules/gallery-matrix-credits.html">gallery-matrix-credits</a></li>
                                <li><a href="../modules/gallery-mojito-rpc.html">gallery-mojito-rpc</a></li>
                                <li><a href="../modules/gallery-mru-cache.html">gallery-mru-cache</a></li>
                                <li><a href="../modules/gallery-multiobject.html">gallery-multiobject</a></li>
                                <li><a href="../modules/gallery-neon.html">gallery-neon</a></li>
                                <li><a href="../modules/gallery-node-event-set.html">gallery-node-event-set</a></li>
                                <li><a href="../modules/gallery-node-optimizations.html">gallery-node-optimizations</a></li>
                                <li><a href="../modules/gallery-node-utils.html">gallery-node-utils</a></li>
                                <li><a href="../modules/gallery-nodelist-extras2.html">gallery-nodelist-extras2</a></li>
                                <li><a href="../modules/gallery-object-extras.html">gallery-object-extras</a></li>
                                <li><a href="../modules/gallery-paginator.html">gallery-paginator</a></li>
                                <li><a href="../modules/gallery-popup.html">gallery-popup</a></li>
                                <li><a href="../modules/gallery-querybuilder.html">gallery-querybuilder</a></li>
                                <li><a href="../modules/gallery-querybuilder-daterange.html">gallery-querybuilder-daterange</a></li>
                                <li><a href="../modules/gallery-querybuilder-multiselect-input.html">gallery-querybuilder-multiselect-input</a></li>
                                <li><a href="../modules/gallery-quickedit.html">gallery-quickedit</a></li>
                                <li><a href="../modules/gallery-scrollintoview.html">gallery-scrollintoview</a></li>
                                <li><a href="../modules/gallery-sort-extras.html">gallery-sort-extras</a></li>
                                <li><a href="../modules/gallery-table-utils.html">gallery-table-utils</a></li>
                                <li><a href="../modules/gallery-test-extras.html">gallery-test-extras</a></li>
                                <li><a href="../modules/gallery-treeble.html">gallery-treeble</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/gallery-datetime/js/DateTime.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&quot;use strict&quot;;

var blackout_min_seconds = -40,
	blackout_max_seconds = +40,
	change_after_focus   = (0 &lt; Y.UA.ie);

/**
 * @module gallery-datetime
 */

/**********************************************************************
 * Manages a date input field and an optional time field.  Calendars and
 * time selection widgets can be attached to these fields, but will not be
 * managed by this class.
 * 
 * Date/time values can be specified as either a Date object or an object
 * specifying year,month,day (all 1-based) or date_str and optionally
 * hour,minute or time_str.  Individual values take precedence over string
 * values.  Time resolution is in minutes.
 * 
 * @main gallery-datetime
 * @class DateTime
 * @extends Base
 * @constructor
 * @param config {Object}
 */

function DateTime(config)
{
	DateTime.superclass.constructor.apply(this, arguments);
}

DateTime.NAME = &quot;datetime&quot;;

function setNode(n)
{
	return Y.one(n) || Attribute.INVALID_VALUE;
}

function dateTimeSetter(value)
{
	return value ? Y.DateTimeUtils.normalize(value, this.get(&#x27;blankTime&#x27;)) : null;
};

DateTime.ATTRS =
{
	/**
	 * Date input field to use.  Can be augmented with a Calendar via
	 * gallery-input-calendar-sync.
	 * 
	 * @attribute dateInput
	 * @type {Node|String}
	 * @required
	 * @writeonce
	 */
	dateInput:
	{
		setter:    setNode,
		writeOnce: true
	},

	/**
	 * Time input field to use.  Can be enhanced with gallery-timepicker.
	 * 
	 * @attribute timeInput
	 * @type {Node|String}
	 * @writeonce
	 */
	timeInput:
	{
		setter:    setNode,
		writeOnce: true
	},

	/**
	 * Set to false to require a date to be entered.  If dateInput is
	 * configured with Y.InputCalendarSync, allowBlank will be copied from
	 * there.
	 *
	 * @attribute allowBlank
	 * @type {Boolean}
	 * @default true
	 */
	allowBlank:
	{
		value:     true,
		validator: Y.Lang.isBoolean
	},

	/**
	 * Default date and time, used during initialization and by resetDateTime().
	 * 
	 * @attribute defaultDateTime
	 * @type {Object}
	 */
	defaultDateTime:
	{
		setter: dateTimeSetter
	},

	/**
	 * Minimum date and time.
	 * 
	 * @attribute minDateTime
	 * @type {Object}
	 */
	minDateTime:
	{
		setter: dateTimeSetter
	},

	/**
	 * Maximum date and time.
	 * 
	 * @attribute minDateTime
	 * @type {Object}
	 */
	maxDateTime:
	{
		setter: dateTimeSetter
	},

	/**
	 * Time value to use when no time is specified as part of a date.
	 * 
	 * @attribute blankTime
	 * @type {Object}
	 * @default { hour:0, minute:0 }
	 */
	blankTime:
	{
		value:     { hour:0, minute:0 },
		validator: function(value)
		{
			return (Y.Lang.isObject(value) &amp;&amp;
					Y.Lang.isNumber(value.hour) &amp;&amp;
					Y.Lang.isNumber(value.minute));
		}
	},

	/**
	 * Blackout ranges, specified as a list of objects, each defining start
	 * and end.  The data is overwritten, so this is a write-only value.
	 * 
	 * @attribute blackout
	 * @type {Array}
	 * @default []
	 */
	blackouts:
	{
		value:     [],
		validator: Y.Lang.isArray,
		setter:    function(ranges)
		{
			ranges = ranges || [];

			// store ranges in ascending order of start time

			var blackouts  = [],
				blank_time = this.get(&#x27;blankTime&#x27;);
			for (var i=0; i&lt;ranges.length; i++)
			{
				var r   = ranges[i];
				r.start = Y.DateTimeUtils.normalize(r.start, blank_time);
				r.end   = Y.DateTimeUtils.normalize(r.end,   blank_time);

				r =
				[
					new Date(r.start.year, r.start.month-1, r.start.day,
							 r.start.hour, r.start.minute, blackout_min_seconds)
							 .getTime(),
					new Date(r.end.year, r.end.month-1, r.end.day,
							 r.end.hour, r.end.minute, blackout_max_seconds)
							 .getTime()
				];

				var inserted = false;
				for (var j=0; j&lt;blackouts.length; j++)
				{
					var r1 = blackouts[j];
					if (r[0] &lt;= r1[0])
					{
						if (j &gt; 0 &amp;&amp;
							r[0] &lt;  blackouts[j-1][1] &amp;&amp;
							r[1] &lt;= blackouts[j-1][1])
						{
							// covered by prev
						}
						else if (j &gt; 0 &amp;&amp;
								 r[0] - 60000 &lt; blackouts[j-1][1] &amp;&amp;
								 r1[0] &lt; r[1] + 60000)
						{
							// overlaps prev and next
							r = [ blackouts[j-1][0], r[1] ];
							blackouts.splice(j-1, 2, r);
						}
						else if (j &gt; 0 &amp;&amp;
								 r[0] - 60000 &lt; blackouts[j-1][1])
						{
							// overlaps prev
							blackouts[j-1][1] = r[1];
						}
						else if (r1[0] &lt; r[1] + 60000)
						{
							// overlaps next
							r1[0] = r[0];
						}
						else
						{
							blackouts.splice(j, 0, r);
						}
						inserted = true;
						break;
					}
				}

				// j == blackouts.length

				if (!inserted &amp;&amp; j &gt; 0 &amp;&amp;
					r[0] &lt;  blackouts[j-1][1] &amp;&amp;
					r[1] &lt;= blackouts[j-1][1])
				{
					// covered by prev
				}
				else if (!inserted &amp;&amp; j &gt; 0 &amp;&amp;
						 r[0] - 60000 &lt; blackouts[j-1][1])
				{
					// overlaps prev
					blackouts[j-1][1] = r[1];
				}
				else if (!inserted)
				{
					blackouts.push(r);
				}
			}

			return blackouts;
		}
	},

	/**
	 * The direction to push the selected date and time when the user
	 * selects a day with partial blackout.  The default value of zero
	 * means go to the nearest available time.
	 *
	 * @attribute blackoutSnapDirection
	 * @type {-1,0,+1}
	 * @default 0
	 */
	blackoutSnapDirection:
	{
		value:     0,
		validator: function(value)
		{
			return (value == -1 || value === 0 || value == +1);
		}
	},

	/**
	 * Duration of visual ping in milliseconds when the value of an input
	 * field is modified because of a min/max or blackout restriction.  Set
	 * to zero to disable.
	 * 
	 * @attribute pingDuration
	 * @type {Number}
	 * @default 2000
	 */
	pingDuration:
	{
		value:     2000,
		validator: Y.Lang.isNumber
	},

	/**
	 * CSS class applied to input field when it is pinged.
	 * 
	 * @attribute pingClass
	 * @type {String}
	 * @default &quot;yui3-datetime-ping&quot;
	 */
	pingClass:
	{
		value:     &#x27;yui3-datetime-ping&#x27;,
		validator: Y.Lang.isString
	}
};

/**
 * @event limitsEnforced
 * @description Fires after min/max and blackouts have been enforced.
 */

function checkEnforceDateTimeLimits()
{
	if (!this.ignore_value_set)
	{
		enforceDateTimeLimits.call(this, &#x27;same-day&#x27;);
	}
}

function enforceDateTimeLimits(
	/* string */	algo)
{
	var date = this.getDateTime();
	if (!date &amp;&amp; this.get(&#x27;allowBlank&#x27;))
	{
		var date_len = this.get(&#x27;dateInput&#x27;).get(&#x27;value&#x27;).length;
		if (date_len === 0)
		{
			this.ignore_value_set = true;
			this.get(&#x27;timeInput&#x27;).set(&#x27;value&#x27;, &#x27;&#x27;);
			this.ignore_value_set = false;

			this.prev_date_time = null;
			this.fire(&#x27;limitsEnforced&#x27;);
			return;
		}
		else if (date_len &gt; 0 &amp;&amp; this.get(&#x27;timeInput&#x27;).get(&#x27;value&#x27;).length === 0)
		{
			this.get(&#x27;timeInput&#x27;).set(&#x27;value&#x27;, Y.DateTimeUtils.formatTime(this.get(&#x27;blankTime&#x27;)));		// recursive
			this.fire(&#x27;limitsEnforced&#x27;);
			return;
		}
	}

	if (!date &amp;&amp; this.prev_date_time)
	{
		date = Y.clone(this.prev_date_time);
		this.ignore_value_set = true;
		this.get(&#x27;dateInput&#x27;).set(&#x27;value&#x27;, Y.DateTimeUtils.formatDate(date));
		this.get(&#x27;timeInput&#x27;).set(&#x27;value&#x27;, Y.DateTimeUtils.formatTime(date));
		this.ignore_value_set = false;
	}
	else if (!date)
	{
		return;
	}
	date = date.date;

	var orig_date = new Date(date.getTime());

	// blackout ranges

	var blackouts = this.get(&#x27;blackouts&#x27;);
	if (blackouts.length &gt; 0)
	{
		var t      = date.getTime(),
			orig_t = t,
			snap   = algo == &#x27;same-day&#x27; ? 0 : this.get(&#x27;blackoutSnapDirection&#x27;);

		for (var i=0; i&lt;blackouts.length; i++)
		{
			var blackout = blackouts[i];
			if (blackout[0] &lt; t &amp;&amp; t &lt; blackout[1])
			{
				if (snap &gt; 0)
				{
					t = blackout[1] + 60000;
				}
				else if (snap &lt; 0)
				{
					t = blackout[0];
				}
				else if (t - blackout[0] &lt; blackout[1] - t)
				{
					t = blackout[0];
				}
				else
				{
					t = blackout[1] + 60000;
				}

				break;
			}
		}

		if (t != orig_t)
		{
			date = new Date(t);
		}
	}

	// min/max last, shrink inward if blackout dates extend outside [min,max] range

	var min = this.get(&#x27;minDateTime&#x27;);
	if (min)
	{
		var t = min.date.getTime();

		if (blackouts.length &gt; 0)
		{
			var orig_t = t;
			var i      = 0;
			while (i &lt; blackouts.length &amp;&amp; blackouts[i][0] &lt; t)
			{
				t = Math.max(orig_t, blackouts[i][1]);
				i++;
			}
		}

		if (date.getTime() &lt; t)
		{
			date = new Date(t);
		}
	}

	var max = this.get(&#x27;maxDateTime&#x27;);
	if (max)
	{
		var t = max.date.getTime();

		if (blackouts.length &gt; 0)
		{
			var orig_t = t;
			var i      = blackouts.length - 1;
			while (i &gt;= 0 &amp;&amp; t &lt; blackouts[i][1])
			{
				t = Math.min(orig_t, blackouts[i][0]);
				i--;
			}
		}

		if (t &lt; date.getTime())
		{
			date = new Date(t);
		}
	}

	// update controls that changed

	if (date.getFullYear() !== orig_date.getFullYear() ||
		date.getMonth()    !== orig_date.getMonth()    ||
		date.getDate()     !== orig_date.getDate())
	{
		var timer       = getEnforceTimer.call(this);
		timer.dateInput = Y.DateTimeUtils.formatDate(date);
		timer.timeInput = Y.DateTimeUtils.formatTime(date);
	}
	else if (date.getHours() !== orig_date.getHours() ||
			 date.getMinutes() !== orig_date.getMinutes())
	{
		var timer       = getEnforceTimer.call(this);
		timer.timeInput = Y.DateTimeUtils.formatTime(date);
	}
	else
	{
		this.fire(&#x27;limitsEnforced&#x27;);
	}

	// save valid input, in case use types invalid date next time

	this.prev_date_time = dateTimeSetter.call(this, date);
}

function getEnforceTimer()
{
	if (!this.enforce_timer)
	{
		this.enforce_timer = Y.later(0, this, enforceTimerCallback);
	}
	return this.enforce_timer;
}

function enforceTimerCallback()
{
	var timer          = this.enforce_timer;
	this.enforce_timer = null;

	var ping_list         = [];
	this.ignore_value_set = true;

	Y.each([&#x27;dateInput&#x27;, &#x27;timeInput&#x27;], function(name)
	{
		if (timer[name])
		{
			this.get(name).set(&#x27;value&#x27;, timer[name]);
			ping_list.push(name);
		}
	},
	this);

	this.ignore_value_set = false;
	ping.apply(this, ping_list);

	this.fire(&#x27;limitsEnforced&#x27;);
}

function updateCalendarRendering()
{
	if (!this.calendar)
	{
		return;
	}

	function mkpath()
	{
		var obj = rules;
		Y.each(arguments, function(key)
		{
			if (!obj[key])
			{
				obj[key] = {};
			}
			obj = obj[key];
		});
	}

	function set(date, type)
	{
		var y = date.getFullYear(),
			m = date.getMonth(),
			d = date.getDate();

		mkpath(y, m, d);

		rules[y][m][d] = type;
	}

	function disableRemaining(date, delta)
	{
		var d = new Date(date);
		d.setDate(d.getDate() + delta);

		while (d.getMonth() == date.getMonth())
		{
			set(d, &#x27;disabled&#x27;);
			d.setDate(d.getDate() + delta);
		}
	}

	var blackouts = this.get(&#x27;blackouts&#x27;).slice(0),
		rules     = {};

	var min = this.get(&#x27;minDateTime&#x27;);
	if (min)
	{
		if (blackouts.length &gt; 0)
		{
			var t       = min.date.getTime();
			var changed = false;
			for (var i=0; i &lt; blackouts.length; i++)
			{
				var blackout = blackouts[i];
				if (blackout[1] &lt;= t)
				{
					blackouts.shift();
					i--;
				}
				else if (blackout[0] &lt; t)
				{
					var start = new Date(blackout[0]);
					start.setHours(0);
					start.setMinutes(0);
					start.setSeconds(blackout_min_seconds);
					blackouts[i] = [ start.getTime(), blackout[1] ];
					changed      = true;
					break;
				}
			}
		}

		if (!changed &amp;&amp;
			(min.hour &gt; 0 || min.minute &gt; 0))
		{
			set(min.date, &#x27;partial&#x27;);
		}

		disableRemaining(min.date, -1);
	}

	var max = this.get(&#x27;maxDateTime&#x27;);
	if (max)
	{
		if (blackouts.length &gt; 0)
		{
			var t       = max.date.getTime();
			var changed = false;
			for (var i=blackouts.length-1; i&gt;=0; i--)
			{
				var blackout = blackouts[i];
				if (t &lt;= blackout[0])
				{
					blackouts.pop();
				}
				else if (t &lt; blackout[1])
				{
					var end = new Date(blackout[1]);
					end.setHours(23);
					end.setMinutes(59);
					end.setSeconds(blackout_max_seconds);
					blackouts[i] = [ blackout[0], end.getTime() ];
					changed      = true;
					break;
				}
			}
		}

		if (!changed &amp;&amp;
			(max.hour &lt; 23 || max.minute &lt; 59))
		{
			set(max.date, &#x27;partial&#x27;);
		}

		disableRemaining(max.date, +1);
	}

	for (var i=0; i&lt;blackouts.length; i++)
	{
		var blackout = blackouts[i];
		var start    = new Date(blackout[0] + blackout_max_seconds*1000);
		var end      = new Date(blackout[1] + blackout_min_seconds*1000);

		if (start.getHours() &gt; 0 || start.getMinutes() &gt; 0)
		{
			set(start, &#x27;partial&#x27;);
			start.setDate(start.getDate()+1);
			start.setHours(0);
		}

		if (end.getHours() &lt; 23 || end.getMinutes() &lt; 59)
		{
			set(end, &#x27;partial&#x27;);
			end.setDate(end.getDate()-1);
			end.setHours(23);
		}

		while (start.getTime() &lt; end.getTime())
		{
			set(start, &#x27;disabled&#x27;);
			start.setDate(start.getDate()+1);
		}
	}

	this.calendar.set(&#x27;customRenderer&#x27;,
	{
		rules:          rules,
		filterFunction: renderFilter
	});
}

function renderFilter(date, node, rules)
{
	if (Y.Array.indexOf(rules, &#x27;partial&#x27;) &gt;= 0)
	{
		node.addClass(&#x27;yui3-datetime-partial&#x27;);
	}
	else if (Y.Array.indexOf(rules, &#x27;disabled&#x27;) &gt;= 0)
	{
		node.addClass(&#x27;yui3-calendar-selection-disabled&#x27;);
	}
}

function ping()
{
	var duration = this.get(&#x27;pingDuration&#x27;);
	if (duration &lt;= 0)
	{
		return;
	}

	var nodes = new Y.NodeList(Y.reduce(arguments, [], function(list, name)
	{
		list.push(this.get(name));
		return list;
	},
	this));

	var ping_class = this.get(&#x27;pingClass&#x27;);
	if (this.ping_task)
	{
		this.ping_task.nodes.removeClass(ping_class);
		this.ping_task.cancel();
		nodes = nodes.concat(this.ping_task.nodes);
	}

	nodes.addClass(ping_class);

	this.ping_task = Y.later(duration, this, function()
	{
		this.ping_task = null;
		nodes.removeClass(ping_class);
	});

	this.ping_task.nodes = nodes;
}

Y.extend(DateTime, Y.Base,
{
	initializer: function(
		/* object/string */	container,
		/* map */			config)
	{
		var date_input = this.get(&#x27;dateInput&#x27;),
			time_input = this.get(&#x27;timeInput&#x27;);
		if (!time_input)
		{
			time_input = Y.Node.create(&#x27;&lt;input type=&quot;hidden&quot;&gt;&lt;/input&gt;&#x27;);
			this.set(&#x27;timeInput&#x27;, time_input);
			time_input.set(&#x27;value&#x27;, Y.DateTimeUtils.formatTime(this.get(&#x27;blankTime&#x27;)));
			var created_time_input = true;
		}

		var default_date_time = this.get(&#x27;defaultDateTime&#x27;);
		if (default_date_time)
		{
			date_input.set(&#x27;value&#x27;, Y.DateTimeUtils.formatDate(default_date_time));
			if (!created_time_input)
			{
				time_input.set(&#x27;value&#x27;, Y.DateTimeUtils.formatTime(default_date_time));
			}

			this.prev_date_time = default_date_time;
		}

		if (date_input.calendarSync)
		{
			this.calendar = date_input.calendarSync.get(&#x27;calendar&#x27;);

			if (this.calendar &amp;&amp; default_date_time)
			{
				this.calendar.set(&#x27;date&#x27;, default_date_time.date);
			}

			var t = this.get(&#x27;minDateTime&#x27;);
			if (this.calendar &amp;&amp; t)
			{
				this.calendar.set(&#x27;minimumDate&#x27;, t.date);
			}

			t = this.get(&#x27;maxDateTime&#x27;);
			if (this.calendar &amp;&amp; t)
			{
				this.calendar.set(&#x27;maximumDate&#x27;, t.date);
			}

			this.set(&#x27;allowBlank&#x27;, date_input.calendarSync.get(&#x27;allowBlank&#x27;));
		}

		// changes

		date_input.on(&#x27;change&#x27;, enforceDateTimeLimits, this);
		date_input.after(&#x27;valueSet&#x27;, checkEnforceDateTimeLimits, this);

		time_input.on(&#x27;change&#x27;, enforceDateTimeLimits, this);
		time_input.after(&#x27;valueSet&#x27;, checkEnforceDateTimeLimits, this);

		enforceDateTimeLimits.call(this);

		function updateLimit(key, e)
		{
			if (e.newVal)
			{
				enforceDateTimeLimits.call(this);
				if (this.calendar)
				{
					this.calendar.set(key, e.newVal.date);
				}
			}
			else if (this.calendar)
			{
				this.calendar.set(key, null);
			}

			updateCalendarRendering.call(this);
		}

		this.after(&#x27;minDateTimeChange&#x27;, Y.bind(updateLimit, this, &#x27;minimumDate&#x27;));
		this.after(&#x27;maxDateTimeChange&#x27;, Y.bind(updateLimit, this, &#x27;maximumDate&#x27;));

		this.after(&#x27;blackoutsChange&#x27;, function()
		{
			enforceDateTimeLimits.call(this);
			updateCalendarRendering.call(this);
		});

		updateCalendarRendering.call(this);
	},

	/**
	 * Get the currently selected date and time.
	 * 
	 * @method getDateTime
	 * @return {Object} year,month,day,hour,minute,date,date_str,time_str
	 */
	getDateTime: function()
	{
		try
		{
			var date = Y.DateTimeUtils.parseDate(this.get(&#x27;dateInput&#x27;).get(&#x27;value&#x27;));
			if (!date)
			{
				return false;
			}
		}
		catch (e)
		{
			return false;
		}

		try
		{
			var time = Y.DateTimeUtils.parseTime(this.get(&#x27;timeInput&#x27;).get(&#x27;value&#x27;));
			if (!time)
			{
				return false;
			}
		}
		catch (e)
		{
			return false;
		}

		var result      = Y.DateTimeUtils.normalize(Y.mix(date, time));
		result.date_str = Y.DateTimeUtils.formatDate(result);
		result.time_str = Y.DateTimeUtils.formatTime(result);
		return result;
	},

	/**
	 * Set the date and time.
	 *
	 * @method setDateTime
	 * @param date_time {Object} date and time
	 */
	setDateTime: function(
		/* object */	date_time)
	{
		date_time = dateTimeSetter.call(this, date_time);
		if (date_time)
		{
			this.ignore_value_set = true;
			this.get(&#x27;dateInput&#x27;).set(&#x27;value&#x27;, Y.DateTimeUtils.formatDate(date_time));
			this.get(&#x27;timeInput&#x27;).set(&#x27;value&#x27;, Y.DateTimeUtils.formatTime(date_time));
			this.ignore_value_set = false;

			enforceDateTimeLimits.call(this);
		}
	},

	/**
	 * Reset the date and time to the values in &#x60;defaultDateTime&#x60;.
	 * 
	 * @method resetDateTime
	 */
	resetDateTime: function()
	{
		var d = this.get(&#x27;defaultDateTime&#x27;);
		if (d)
		{
			this.setDateTime(d);
		}
		else if (this.get(&#x27;allowBlank&#x27;))
		{
			this.clearDateTime();
		}
		else
		{
			return;
		}

		enforceDateTimeLimits.call(this);
	},

	/**
	 * Clear the date and time.
	 *
	 * @method clearDateTime
	 */
	clearDateTime: function()
	{
		if (this.get(&#x27;allowBlank&#x27;))
		{
			this.get(&#x27;dateInput&#x27;).set(&#x27;value&#x27;, &#x27;&#x27;);
			// timeInput is automatically cleared
		}
		else
		{
			this.resetDateTime();
		}
	}
});

Y.DateTime = DateTime;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
