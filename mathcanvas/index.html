<!DOCTYPE HTML>
<html>

<head>
	<title>MathCanvas Example</title>
	<meta http-equiv=content-type content="text/html; charset=utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=yes" />

	<script src="http://yui.yahooapis.com/3.10.2/build/yui/yui-min.js"></script>
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.10.2/build/cssreset/cssreset-min.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.10.2/build/cssfonts/cssfonts-min.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.10.2/build/cssbase/cssbase-min.css">

	<script src="gallery-canvas-debug.js"></script>
	<script src="gallery-math-debug.js"></script>
	<script src="gallery-complexnumber-debug.js"></script>
	<script src="gallery-mathcanvas-debug.js"></script>
	<link rel="stylesheet" type="text/css" href="assets/gallery-mathcanvas.css">

	<style type="text/css">
	#canvas { border: 1px solid black; }
	#expr { width: 320px; }

	.small-screen-break { display:none; }

	@media screen and (max-device-width: 801px)
	{
		.small-screen-break { display:inline; }
	}
	</style>
</head>

<body>

<h1><a href="http://yuilibrary.com/gallery/show/mathcanvas">YUI 3 MathCanvas</a> Example</h1>

<div id="controls">
	<input type="text" id="expr" value="max(sin(sqrt(5)),sqrt(abs(cos(pi))),e)"></input>
	<br class="small-screen-break" />
	<button id="render">Display</button>
	<button id="font-down">Smaller</button>
	<button id="font-up">Larger</button>
</div>

<div id="canvas"></div>
<p>Value: <span id="value">0</span></p>
<p>Expr: <span id="expr2">0</span></p>

<p><a href="../yuidoc/modules/gallery-mathcanvas.html">Show me the documentation</a></p>
<p><a href="/yui-modules/">Back to project list</a></p>

<script type="text/javascript">
YUI.config.debug_mathcanvas_keyboard = /debug=true/.test(window.location.search);

YUI({
	filter: 'raw', combine: false
}).use('gallery-mathcanvas', function(Y) {
"use strict";

	var canvas = new Y.MathCanvas(
	{
		minWidth:  300,
		minHeight: 100,
		fontSize:  2
	});

	try
	{
		canvas.render('#canvas');
	}
	catch (e)
	{
		alert(e);
		return;
	}

	function evaluate()
	{
		Y.one('#value').set('innerHTML', canvas.get('func').evaluate(
		{
			x:  1,
			y:  2,
			z:  Y.MathCanvas.Parser.parse('x+y'),
			w1: Y.ComplexMath.I,
			w2: new Y.ComplexNumber(0,-1)
		}));

		Y.one('#expr2').set('innerHTML', canvas.get('func').toString());
	}

	var expr_input = Y.one('#expr');
	Y.on('click', function()
	{
		try
		{
			canvas.set('func', expr_input.get('value'));
			evaluate();
		}
		catch (e)
		{
			alert(e);
		}
	},
	'#render');

	canvas.on('evaluate', function()
	{
		try
		{
			evaluate();
		}
		catch (e)
		{
			alert(e);
		}
	});

	Y.on('click', function()
	{
		var size = canvas.get('fontSize');
		if (size > 1)
		{
			size--;
			canvas.set('fontSize', size);
		}
	},
	'#font-down');

	Y.on('click', function()
	{
		canvas.set('fontSize', canvas.get('fontSize') + 1);
	},
	'#font-up');
});
</script>

</body>
</html>
