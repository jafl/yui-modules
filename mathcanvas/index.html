<!DOCTYPE HTML>
<html>

<head>
	<title>MathCanvas Example</title>
	<meta http-equiv=content-type content="text/html; charset=utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=yes" />

	<script src="http://yui.yahooapis.com/3.15.0/build/yui/yui-min.js"></script>
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.15.0/build/cssreset/cssreset-min.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.15.0/build/cssfonts/cssfonts-min.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.15.0/build/cssbase/cssbase-min.css">
<!--
	<script src="../../vendomatic/combo.php?yui/yui/yui-min.js"></script>
	<link rel="stylesheet" type="text/css" href="../../vendomatic/combo.php?yui/cssreset/cssreset-min.css&yui/cssfonts/cssfonts-min.css&yui/cssbase/cssbase-min.css&yui/cssbutton/cssbutton-min.css" />
-->
	<script src="gallery-node-optimizations-debug.js"></script>
	<script src="gallery-canvas-debug.js"></script>
	<script src="gallery-math-debug.js"></script>
	<script src="gallery-complexnumber-debug.js"></script>
	<script src="gallery-mathcanvas-debug.js"></script>
	<link rel="stylesheet" type="text/css" href="assets/gallery-mathcanvas.css">

	<style type="text/css">
	.help { margin-bottom:0; display:none; }
	.desktop .desktop { display:block; }
	.touch .desktop { display:none; }
	.desktop .mobile { display:none; }
	.touch .mobile { display:block;}

	#canvas { border:1px solid black; margin-bottom:1em; }
	#expr-input { width:100%; }
	.value { font-size:2em; }
	</style>
</head>

<body class="yui3-skin-sam">

<h1>Calculator</h1>

<p class="help desktop">Click the ? and then type an expression.  Type = to evaluate.</p>
<p class="help mobile">Tap the ? and then use the keyboard to type an expression.    Press = to evaluate.</p>
<div id="canvas"></div>
<p class="value">Value: <span id="value">0</span></p>
<p class="help desktop">Available functions (Type the name followed by open parenthesis):<ul id="fn-names"></ul></p>

<script type="text/javascript">
YUI().use('gallery-mathcanvas', function(Y) {
"use strict";

	if (Y.UA.touchEnabled)
	{
		Y.one('body').addClass('touch');
	}
	else
	{
		Y.one('body').addClass('desktop');

		Y.one('#fn-names').set('innerHTML',
			Object.keys(Y.MathFunction.name_map).sort().reduce(function(s, n)
			{
				return s + '<li>' + n + '</li>';
			},
			''));
	}

	var canvas = new Y.MathCanvas(
	{
		minWidth:  Y.one('body').get('clientWidth'),
		minHeight: 100,
		fontSize:  2
	});

	try
	{
		canvas.render('#canvas');
	}
	catch (e)
	{
		alert(e);
		return;
	}

	canvas.on('evaluate', function()
	{
		try
		{
			Y.one('#value').set('innerHTML',
				Math.roundTo(canvas.get('func').evaluate(), 8));
		}
		catch (e)
		{
			alert(e);
		}
	});
});
</script>

</body>
</html>
