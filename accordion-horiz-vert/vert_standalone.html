<!DOCTYPE HTML>
<html>
<head>
	<title>YUI 3 Accordion Vert Standalone Example</title>
	<meta http-equiv=content-type content="text/html; charset=utf-8">

	<script src="http://jafl.github.io/yui3/build/yui/yui-min.js"></script>

	<style type="text/css">
	.yui3-js-enabled .yui3-widget-loading { display: none; }

	/* YUI 3 Accordion Examples Page Styling */

	#accordion {margin:0 340px 0 10px;padding:0 10px 10px;background-color:#aaa;}
	#accordion h4 {padding:10px 0 6px;}

	/* YUI 3 Accordion Sample Skin Styling */

	.accordion-test-vert {width:auto;background-color:#fff;}
	.my-title-vert {background-color:#ccc;margin:1px;}
	.my-title-vert a {display:block;text-align:center;cursor:pointer;}
	.my-title-vert a {padding:4px 0;}
	.my-title-vert a:focus,
	.my-title-vert a:hover {background-color:#eee;}
	.my-section-vert{margin:1px;padding:10px;}
	</style>
</head>
<body class="yui3-skin-sam">

<div id="accordion">
	<h4>Vertical</h4>
	<div id="accordion-test-vert-markup" class="accordion-test-vert"></div>
	<ul id="accordion-test-vert-markup-content" class="yui3-widget-loading">
		<li>
			<div class="my-title-vert"><a href="javascript:void(0);">#1</a></div>
			<div class="my-section-vert"><p>testing</p></div>
		</li>
		<li>
			<div class="my-title-vert"><a href="javascript:void(0);">#2</a></div>
			<div class="my-section-vert"><p>testing testing</p></div>
		</li>
		<li>
			<div class="my-title-vert"><a href="javascript:void(0);">#3</a></div>
			<div class="my-section-vert">
				<p>testing</p><p>testing</p><p>testing</p><p>testing</p><p>testing</p>
				<p>testing</p><p>testing</p><p>testing</p><p>testing</p><p>testing</p>
			</div>
		</li>
	</ul>
</div>

<script type="text/javascript">
YUI({
//	filter: 'debug', combine: false,
	gallery: 'gallery-2014.02.20-23-55'
}).use(
	'gallery-accordion-horiz-vert',
	'anim-base',
	'node-focusmanager',
function(Y)
{
	function onTitleClicked(e, a)
	{
		var t = e.target;
		var i = a.findSection(e.target);
		if (i >= 0)
		{
			a.toggleSection(i);
		}
	}

	function updateFocusMgr()
	{
		var a    = this;
		var keys = a.get('horizontal') ?
			{ next: "down:39", previous: "down:37" } :
			{ next: "down:40", previous: "down:38" };

		var node = a.get('contentBox');
		node.unplug(Y.Plugin.NodeFocusManager);
		node.plug(Y.Plugin.NodeFocusManager,
		{
			descendants: '.yui3-accordion-title a',
			keys:        keys,
			circular:    false,
			focusClass:
			{
				className: a.getClassName('title', 'focused'),
				fn: function (node)
				{
					return node.get('parentNode');
				}
			}
		});
	}

	// create accordion

	var vm = new Y.Accordion(
	{
		srcNode: '#accordion-test-vert-markup-content',
		replaceTitleContainer:   false,
		replaceSectionContainer: false,
		allowMultipleOpen:       true
	});

	Y.on('domready', function()
	{
		vm.render('#accordion-test-vert-markup');
		Y.delegate('click', onTitleClicked, '#accordion-test-vert-markup', '.my-title-vert', null, vm);

		updateFocusMgr.call(vm);

		vm.on('insert', function()
		{
			Y.later(1, this, updateFocusMgr);
		});
		vm.on('remove', updateFocusMgr);
	});
});
</script>

</body>
</html>
